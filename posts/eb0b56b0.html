<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="H多看源码多读书 - 勤于思考善领悟"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><meta name="theme-version" content="1.3.0"><meta name="root" content="/"><link rel="dns-prefetch" href="http://example.com"><meta name="keywords" content="vue3"><meta name="description" content="
由于vite脚手架要禁止*.cjs 和 eslint版本升级废弃rc配置文件， 故重新搭建。
核心采用**antfu**大神预设配置 替代prettier和eslint设置，保留styleli..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>0-1搭建vue3项目及配置 | H多看源码多读书 - 勤于思考善领悟</title><link rel="alternate" href="/atom.xml" title="H多看源码多读书 - 勤于思考善领悟" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=1d1bccdabbf21f3604f985399285f5cf"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=17d35b1ddb5a58cc19379d19f22b9fdc"><link rel="stylesheet" href="/css/style.css?rev=1be479d06cbb29d0c56ae25586ad88bc"><div class="hide"><script type="text/javascript">!function(){var t="https:"===document.location.protocol?"https://":"http://",c=document.createElement("script");c.src="https://s95.cnzz.com/z_stat.php?web_id=1272564536",c.async=!0,document.body.appendChild(c);var e=document.createElement("script");e.src=t+"s19.cnzz.com/z_stat.php?id=1263868967&show=pic1",e.async=!0,document.body.appendChild(e)}()</script></div><meta name="generator" content="Hexo 7.3.0"></head><!--[if lte IE 8]><style>
    html{ font-size: 1em }
</style><![endif]--><!--[if lte IE 9]><div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div><![endif]--><body><header class="main-header" style="background-image:url(https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/banner.webp)"><div class="main-header-box"><a class="header-avatar" href="/" title="ZHB"><img src="/img/avatar.webp" alt="logo头像" class="img-responsive center-block"></a><div class="branding"><img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block"></div></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span><i class="fa fa-bars"></i></span> <a class="navbar-brand" href="http://example.com">H多看源码多读书 - 勤于思考善领悟</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa"></i> 首页</a></li><li role="presentation" class="text-center"><a href="/categories/"><i class="fa"></i> 分类</a></li><li role="presentation" class="text-center"><a href="/tags/"><i class="fa"></i> 标签</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa"></i> 时间轴</a></li><li role="presentation" class="text-center"><a href="/about/"><i class="fa"></i> 关于</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-9 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="0-1搭建vue3项目及配置">0-1搭建vue3项目及配置</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/">框架与生态</a></span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta"><a class="tag-none-link" href="/tags/vue3/" rel="tag">vue3</a></span></span><span class="fa-wrap"><i class="fa fa-clock-o"></i> <span class="date-meta">2025/08/20</span></span></div></div><div class="post-body post-content"><blockquote><p>由于vite脚手架要禁止*.cjs 和 eslint版本升级废弃rc配置文件， 故重新搭建。</p><p>核心采用**<code>antfu</code>**大神预设配置 替代prettier和eslint设置，保留stylelint原因是暂时antfu不支持。</p></blockquote><h3 id="1、前置条件"><a href="#1、前置条件" class="headerlink" title="1、前置条件"></a><strong><font color="red">1、前置条件</font></strong></h3><h4 id="1-1、node版本"><a href="#1-1、node版本" class="headerlink" title="1.1、node版本"></a><strong><font color="#10c300">1.1、node版本</font></strong></h4><p>node 最好&gt;20 因为eslint9的需要 本次项目node为20.15.1</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103820848.png" alt="image-20240828103820848"></p><h4 id="1-2、包管理器"><a href="#1-2、包管理器" class="headerlink" title="1.2、包管理器"></a><strong><font color="#10c300">1.2、包管理器</font></strong></h4><p>包管理器 采用pnpm</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20241207213915592.png" alt="image-20241207213915592"></p><h4 id="1-3、VsCode插件"><a href="#1-3、VsCode插件" class="headerlink" title="1.3、VsCode插件"></a><strong><font color="#10c300">1.3、VsCode插件</font></strong></h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.vscode/extensions.json</span><br><span class="line">它的作用是：当其他开发者用 VS Code 打开你的项目时，VS Code 会自动弹出提示，建议安装这些插件。</span><br><span class="line">recommendations：数组，列出推荐给团队成员的 VS Code 扩展插件 ID。</span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;recommendations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;Vue.volar&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;dbaeumer.vscode-eslint&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;esbenp.prettier-vscode&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;csstools.postcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;stylelint.vscode-stylelint&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;antfu.unocss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;simonhe.to-unocss&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103527225.png" alt="image-20240828103527225"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103542672.png" alt="image-20240828103542672"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103556492.png" alt="image-20240828103556492"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103620621.png" alt="image-20240828103620621"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103706879.png" alt="image-20240828103706879"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828140147090.png" alt="image-20240828140147090"></p><br><h3 id="2、创建项目"><a href="#2、创建项目" class="headerlink" title="2、创建项目"></a><strong><font color="red">2、创建项目</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建（二选一）</span></span><br><span class="line">pnpm create vite (vite官方)</span><br><span class="line">pnpm create vue@latest (vue官方)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命名</span></span><br><span class="line">? Project name: » vite-project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择框架</span></span><br><span class="line">    Vanilla</span><br><span class="line">&gt;   Vue</span><br><span class="line">    React</span><br><span class="line">    Preact</span><br><span class="line">    Lit</span><br><span class="line">    Svelte</span><br><span class="line">    Solid</span><br><span class="line">    Qwik</span><br><span class="line">    Others</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择自己需要的语言</span></span><br><span class="line">? Select a variant: »</span><br><span class="line">    TypeScript</span><br><span class="line">    JavaScript</span><br><span class="line">&gt;   Customize with create-vue (现成的模板——推荐)</span><br><span class="line">    Nuxt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选配</span></span><br><span class="line">√ 是否使用 TypeScript 语法？ » 是</span><br><span class="line">√ 是否启用 JSX 支持？  » 是</span><br><span class="line">√ 是否引入 Vue Router 进行单页面应用开发？ » 是</span><br><span class="line">√ 是否引入 Pinia 用于状态管理？ » 是</span><br><span class="line">√ 是否引入 Vitest 用于单元测试？  » 是</span><br><span class="line">√ 是否要引入一款端到端（End to End）测试工具？ » 不需要</span><br><span class="line">√ 是否引入 ESLint 用于代码质量检测？ » 否</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化依赖</span></span><br><span class="line">dependencies:</span><br><span class="line">	+ pinia 2.3.1</span><br><span class="line">	+ vue 3.5.13</span><br><span class="line">	+ vue-router 4.5.0</span><br><span class="line"></span><br><span class="line">devDependencies:</span><br><span class="line">	+ @tsconfig/node22 22.0.0</span><br><span class="line">	+ @types/node 22.10.10</span><br><span class="line">	+ @vitejs/plugin-vue 5.2.1</span><br><span class="line">	+ @vitejs/plugin-vue-jsx 4.1.1</span><br><span class="line">	+ @vue/tsconfig 0.7.0</span><br><span class="line">	+ npm-run-all2 7.0.2</span><br><span class="line">	+ typescript 5.7.3</span><br><span class="line">	+ vite 6.0.11</span><br><span class="line">	+ vite-plugin-vue-devtools 7.7.1</span><br><span class="line">	+ vue-tsc 2.2.0</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202504020017399.png" alt="image-20250402001720296"></p><p>如果pnpm版本是 v10.1.0 及以上，安装依赖包的时候pnpm i会有这个警告提示。因为pnpm 从 v10.1.0 开始引入安全机制，默认禁止依赖包运行构建脚本（如 <code>postinstall</code>），需要手动批准。若未明确允许 <code>esbuild</code> 的脚本执行，则会出现此警告。</p><p><strong>解决：修改配置文件（适合长期配置）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pnpm&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;onlyBuiltDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;esbuild&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="3、强制使用pnpm"><a href="#3、强制使用pnpm" class="headerlink" title="3、强制使用pnpm"></a><strong><font color="red">3、强制使用pnpm</font></strong></h3><p><code>engines</code> 字段用于指定支持的 Node.js 版本以及其他依赖包的版本范围。它既不具有提示作用也不具有限制作用，它仅仅是一个标准，告诉使用者该软件包支持哪些版本的环境。</p><p><code>&quot;preinstall&quot;: &quot;npx only-allow pnpm&quot;</code>则具有强制作用，必须使用pnpm。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/ package.json</span><br><span class="line"><span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&gt;=20.15.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pnpm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&gt;=9.0.6&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;preinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx only-allow pnpm&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124112043588.png" alt="image-20250124112043588"></p><br><h3 id="4、-vscode-配置文件"><a href="#4、-vscode-配置文件" class="headerlink" title="4、.vscode 配置文件"></a><strong><font color="red">4、.vscode 配置文件</font></strong></h3><blockquote><p>用于保存带代码格式化功能</p></blockquote><p><strong>.vscode&#x2F;setting.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 这行配置开启了文件嵌套功能，使其在文件资源管理器中生效。</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 这是一个对象，其中定义了多个文件嵌套的模式。每个键值对定义了一个主文件和与之相关联的文件模式</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tsconfig.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.*.json, env.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;vite.config.*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jsconfig*, vitest.config.*, cypress.config.*, playwright.config.*&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;package.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;package-lock.json, pnpm*, .yarnrc*, yarn*, .eslint*, eslint*, .prettier*, prettier*, .editorconfig, commitlint.config.*, lint-staged.config.*, stylelint.config.*, uno.config.*,.gitignore,.stylelintignore&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;typescript.tsdk&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./node_modules/typescript/lib&quot;</span><span class="punctuation">,</span> <span class="comment">// 配置 TypeScript 语言服务的 SDK 路径，指向本地的 TypeScript 库。</span></span><br><span class="line">    <span class="attr">&quot;npm.packageManager&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pnpm&quot;</span><span class="punctuation">,</span> <span class="comment">// 配置使用的包管理器为 pnpm。 设置主要影响 VS Code 内置的一些自动化任务和脚本运行，但并不会影响你在终端中手动输入的命令。</span></span><br><span class="line">    <span class="attr">&quot;editor.tabSize&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="comment">// 设置编辑器中的制表符宽度为 4 个空格。</span></span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esbenp.prettier-vscode&quot;</span><span class="punctuation">,</span> <span class="comment">// 指定默认的代码格式化工具为 esbenp.prettier-vscode</span></span><br><span class="line">    <span class="comment">// 保存文件缓慢时，可以考虑开启以下 3 行配置。</span></span><br><span class="line">    <span class="attr">&quot;vue.server.maxOldSpaceSize&quot;</span><span class="punctuation">:</span> <span class="number">4096</span><span class="punctuation">,</span> <span class="comment">// 设置 Vue 服务器端渲染的最大内存限制为 4GB。</span></span><br><span class="line">    <span class="attr">&quot;vue.server.hybridMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 Vue 服务器端渲染的混合模式。</span></span><br><span class="line">    <span class="attr">&quot;typescript.tsserver.maxTsServerMemory&quot;</span><span class="punctuation">:</span> <span class="number">4096</span><span class="punctuation">,</span> <span class="comment">// 设置 TypeScript 语言服务的最大内存限制为 4GB。</span></span><br><span class="line">    <span class="attr">&quot;files.eol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\n&quot;</span><span class="punctuation">,</span> <span class="comment">// 设置文件的行结束符为换行符（\n）。</span></span><br><span class="line">    <span class="attr">&quot;editor.guides.bracketPairs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用括号对高亮显示功能。</span></span><br><span class="line">    <span class="attr">&quot;editor.bracketPairColorization.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用括号对颜色突出显示功能。</span></span><br><span class="line">    <span class="attr">&quot;vue.inlayHints.missingProps&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 Vue 组件的属性提示功能。</span></span><br><span class="line">    <span class="attr">&quot;vue.autoInsert.dotValue&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 自动插入缺失的属性值。</span></span><br><span class="line">    <span class="attr">&quot;explorer.copyRelativePathSeparator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span> <span class="comment">// 设置复制相对路径时使用的分隔符为正斜杠。</span></span><br><span class="line">    <span class="attr">&quot;search.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置要排除的文件和目录，以减少不必要的搜索。</span></span><br><span class="line">        <span class="attr">&quot;**/node_modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/*.log&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/*.log*&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/dist&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/elehukouben&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.gitignore&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.svn&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.DS_Store&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.idea&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.vscode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/pnpm i.lock&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;out&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dist&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;node_modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;CHANGELOG.md&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;examples&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;res&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;screenshots&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pnpm i-error.log&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.pnpm i&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置要排除的文件和目录，以减少不必要的文件搜索和处理。</span></span><br><span class="line">        <span class="attr">&quot;**/.cache&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.editorconfig&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.eslintcache&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.idea&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.svn&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.hg&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/CVS&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.DS_Store&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.watcherExclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置文件监视器中要排除的文件和目录，以减少不必要的文件监视。</span></span><br><span class="line">        <span class="attr">&quot;**/.git/objects/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git/subtree-cache/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.vscode/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/node_modules/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/dist/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/pnpm i.lock&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint.useFlatConfig&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 ESLint 的扁平化配置。</span></span><br><span class="line">    <span class="attr">&quot;stylelint.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 stylelint 验证。</span></span><br><span class="line">    <span class="attr">&quot;stylelint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// 配置要验证的文件类型，包括 CSS、LESS、SCSS、Vue、Sass。</span></span><br><span class="line">        <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;less&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;postcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;scss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;sass&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;path-intellisense.mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置路径别名，用于提高代码可读性和开发效率。</span></span><br><span class="line">        <span class="attr">&quot;@/&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/src&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.localesPaths&quot;: [&quot;src/locales/lang&quot;], // 配置 i18n-ally 插件的语言文件路径。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.keystyle&quot;: &quot;nested&quot;, // 配置 i18n-ally 插件的键风格为嵌套。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.sortKeys&quot;: true, // 配置 i18n-ally 插件的键排序。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.namespace&quot;: true, // 配置 i18n-ally 插件的命名空间。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.pathMatcher&quot;: &quot;&#123;locale&#125;/&#123;namespaces&#125;.&#123;ext&#125;&quot;, // 配置 i18n-ally 插件的路径匹配器。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.enabledParsers&quot;: [&quot;json&quot;], // 配置 i18n-ally 插件的启用解析器。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.sourceLanguage&quot;: &quot;en&quot;, // 配置 i18n-ally 插件的源语言。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.displayLanguage&quot;: &quot;zh-CN&quot;, // 配置 i18n-ally 插件的显示语言。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.enabledFrameworks&quot;: [&quot;vue&quot;, &quot;react&quot;], // 配置 i18n-ally 插件的启用框架。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁用默认格式化程序，改用eslint</span></span><br><span class="line">    <span class="attr">&quot;prettier.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 自动修复</span></span><br><span class="line">    <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 保存时格式化</span></span><br><span class="line">        <span class="comment">// 保存时启用eslint格式化</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;explicit&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// &quot;never&quot;表示在保存文件时，不会自动整理或排序import语句。性能消耗大，因此关闭。</span></span><br><span class="line">        <span class="attr">&quot;source.organizeImports&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// 保存时启用stylelint格式化less或是sass</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll.stylelint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;explicit&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自定义 ESLint 规则的行为，关闭某些风格规则的警告，但仍然允许自动修复。</span></span><br><span class="line">     <span class="attr">&quot;eslint.rules.customizations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;style/*&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;format/*&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-indent&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-spacing&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-spaces&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-order&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-dangle&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-newline&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*quotes&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*semi&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁用 CSS、LESS 和 SCSS 的内置验证。</span></span><br><span class="line">    <span class="attr">&quot;css.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;less.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;scss.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 启用 ESLint 支持的所有语言类型</span></span><br><span class="line">    <span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;typescriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;html&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;markdown&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;json&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;jsonc&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;yaml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;toml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;xml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;gql&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;graphql&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;astro&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;less&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;scss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;postcss&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这两行的作用就是文件嵌套作用</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;tsconfig.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.*.json, env.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vite.config.*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jsconfig*, vitest.config.*, cypress.config.*, playwright.config.*&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;package.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;package-lock.json, pnpm*, .yarnrc*, yarn*, .eslint*, eslint*, .prettier*, prettier*, .editorconfig&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124144015367.png" alt="image-20250124144015367"></p><br><h3 id="5、styleLint-【采用】"><a href="#5、styleLint-【采用】" class="headerlink" title="5、styleLint 【采用】"></a><strong><font color="red">5、styleLint 【采用】</font></strong></h3><blockquote><p>less和sass 推荐只选一个</p></blockquote><p><strong><font color="#10c300">5.1、依赖包</font></strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">devDependencies<span class="punctuation">:</span></span><br><span class="line">	+ less <span class="number">4.2</span><span class="number">.2</span></span><br><span class="line">	+ postcss-less <span class="number">6.0</span><span class="number">.0</span></span><br><span class="line">	+ sass <span class="number">1.83</span><span class="number">.4</span></span><br><span class="line">	+ postcss-scss <span class="number">4.0</span><span class="number">.9</span></span><br><span class="line">	+ postcss <span class="number">8.5</span><span class="number">.1</span></span><br><span class="line">	+ postcss-html <span class="number">1.8</span><span class="number">.0</span></span><br><span class="line">	+ stylelint <span class="number">16.13</span><span class="number">.2</span></span><br><span class="line">	+ stylelint-config-recess-order <span class="number">6.0</span><span class="number">.0</span></span><br><span class="line">	+ stylelint-config-standard <span class="number">37.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><p><strong><font color="#10c300">5.2、安装</font></strong></p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 选择sass</span><br><span class="line">pnpm i sass postcss postcss-scss postcss-html stylelint stylelint-config-standard-scss stylelint-config-recess-order -D</span><br><span class="line"></span><br><span class="line"># 选择lees</span><br><span class="line">pnpm i less postcss postcss-less postcss-html stylelint stylelint-config-standard-less stylelint-config-recess-order -D</span><br></pre></td></tr></table></figure><table><thead><tr><th>依赖</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>stylelint</td><td>stylelint核心库</td><td>stylelint</td></tr><tr><td>stylelint-config-standard</td><td>Stylelint 的标准配置，适用于普通的 CSS 文件</td><td>帮助开发者编写一致、规范的 CSS 代码。</td></tr><tr><td>stylelint-config-standard-scss</td><td>专门为 SCSS（Sass）文件设计的标准配置</td><td>在此stylelint-config-standard基础上扩展了对 SCSS 语法的支持</td></tr><tr><td>stylelint-config-standard-less</td><td>专门为 less文件设计的标准配置</td><td>在此stylelint-config-standard基础上扩展了对 less语法的支持</td></tr><tr><td>stylelint-config-recess-order</td><td>提供优化样式顺序配置</td><td>css样式书写顺序规范</td></tr><tr><td>postcss</td><td>处理 CSS 的工具</td><td>自动添加浏览器前缀、CSS 进行压缩、去除未使用的 CSS、合并相同的选择器等优化操作等等</td></tr><tr><td>postcss-scss</td><td>postcss的scss解析器</td><td>postcss-scss文档，支持css行类注释</td></tr><tr><td>postcss-html</td><td>解析html(类似html)的postcss语法</td><td>postcss-html文档</td></tr></tbody></table><p><strong>如果项目使用的是scss就使用stylelint-config-standard-scss，如果scss和less都没使用则安装stylelint-config-standard</strong></p><p><strong><font color="#10c300">5.3、配置文件</font></strong></p><p><strong>stylelint.config.mjs</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;stylelint&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// stylelint-config-standard 基础配置</span></span><br><span class="line">    <span class="comment">// stylelint-config-recess-order 样式顺序</span></span><br><span class="line">    <span class="attr">extends</span>: [<span class="string">&#x27;stylelint-config-standard-scss&#x27;</span>, <span class="string">&#x27;stylelint-config-recess-order&#x27;</span>],</span><br><span class="line">    <span class="comment">// 不同文件类型用不同解析器</span></span><br><span class="line">    <span class="attr">overrides</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [<span class="string">&#x27;**/*.(css|html|vue)&#x27;</span>],</span><br><span class="line">            <span class="attr">customSyntax</span>: <span class="string">&#x27;postcss-html&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 选less可以注释scss</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     files: [&#x27;*.less&#x27;, &#x27;**/*.less&#x27;],</span></span><br><span class="line">        <span class="comment">//     customSyntax: &#x27;postcss-less&#x27;,</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// 选sass可以注释上面的less</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [<span class="string">&#x27;*.scss&#x27;</span>, <span class="string">&#x27;**/*.scss&#x27;</span>],</span><br><span class="line">            <span class="attr">customSyntax</span>: <span class="string">&#x27;postcss-scss&#x27;</span>,</span><br><span class="line">            <span class="attr">rules</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;scss/percent-placeholder-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="string">&#x27;scss/at-mixin-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="comment">// &#x27;prettier/prettier&#x27;: true,</span></span><br><span class="line">        <span class="string">&#x27;media-feature-range-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;scss/at-mixin-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-not-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;import-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;function-no-unknown&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-class-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-pseudo-class-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignorePseudoClasses</span>: [<span class="string">&#x27;global&#x27;</span>, <span class="string">&#x27;deep&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;selector-pseudo-element-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignorePseudoElements</span>: [<span class="string">&#x27;v-deep&#x27;</span>, <span class="string">&#x27;:deep&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;at-rule-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignoreAtRules</span>: [</span><br><span class="line">                    <span class="string">&#x27;tailwind&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;apply&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;variants&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;responsive&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;screen&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;function&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;if&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;each&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;include&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;mixin&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;extend&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;use&#x27;</span>,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;no-empty-source&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;named-grid-areas-no-invalid&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;no-descending-specificity&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;font-family-no-missing-generic-family-keyword&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;rule-empty-line-before&#x27;</span>: [</span><br><span class="line">            <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignore</span>: [<span class="string">&#x27;after-comment&#x27;</span>, <span class="string">&#x27;first-nested&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;unit-no-unknown&#x27;</span>: [<span class="literal">true</span>, &#123; <span class="attr">ignoreUnits</span>: [<span class="string">&#x27;rpx&#x27;</span>] &#125;],</span><br><span class="line">        <span class="string">&#x27;order/order&#x27;</span>: [</span><br><span class="line">            [</span><br><span class="line">                <span class="string">&#x27;dollar-variables&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;custom-properties&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;at-rules&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;declarations&#x27;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;at-rule&#x27;</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;supports&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;at-rule&#x27;</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;media&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&#x27;rules&#x27;</span>,</span><br><span class="line">            ],</span><br><span class="line">            &#123; <span class="attr">severity</span>: <span class="string">&#x27;error&#x27;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">ignoreFiles</span>: [<span class="string">&#x27;**/*.js&#x27;</span>, <span class="string">&#x27;**/*.jsx&#x27;</span>, <span class="string">&#x27;**/*.tsx&#x27;</span>, <span class="string">&#x27;**/*.ts&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><font color="#10c300">5.4、新增脚本</font></strong></p><p><strong>package.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 修复报错</span></span><br><span class="line">    <span class="attr">&quot;lint:stylelint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stylelint  \&quot;**/*.&#123;css,scss,less,vue,html&#125;\&quot; --fix&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong><font color="#10c300">5.4、添加忽略文件</font></strong></p><p><strong>.stylelintignore</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dist<span class="comment">/*</span></span><br><span class="line"><span class="comment">/public/*</span></span><br></pre></td></tr></table></figure><br><h3 id="6、antfu-组合prettier-eslint-【采用】"><a href="#6、antfu-组合prettier-eslint-【采用】" class="headerlink" title="6、antfu 组合prettier&amp;eslint 【采用】"></a><strong><font color="red">6、antfu 组合prettier&amp;eslint 【采用】</font></strong></h3><blockquote><p>配置网站 <a target="_blank" rel="noopener" href="https://github.com/antfu/eslint-config/tree/feat/support-eslint-9?tab=readme-ov-file">https://github.com/antfu/eslint-config/tree/feat/support-eslint-9?tab=readme-ov-file</a></p><p>先选一个unocss 免得后续再去安装unocss的@unocss&#x2F;eslint-plugin</p></blockquote><p><strong><font color="#10c300">6.1、命令行界面 (CLI) 安装</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/ 空格选择 回车下一步</span><br><span class="line">npx @antfu/eslint-config@latest</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124161525291.png" alt="image-20250124161525291"></p><p>最后一步选NO，配置setting.json中的内容，因为之前一次性配置了，因为这里选no。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">devDependencies<span class="punctuation">:</span></span><br><span class="line">	+ @antfu/eslint-config <span class="number">3.16</span><span class="number">.0</span></span><br><span class="line">	+ @unocss/eslint-plugin <span class="number">65.4</span><span class="number">.3</span></span><br><span class="line">	+ eslint <span class="number">9.18</span><span class="number">.0</span></span><br><span class="line">	+ eslint-plugin-format <span class="number">1.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><p>默认会添加这些依赖到包管理文件package.json（未安装），因此需要重新安装下依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i</span><br></pre></td></tr></table></figure><br><p><strong><font color="#10c300">6.2、配置文件</font></strong></p><blockquote><p>修改生成配置文件<code>eslint.config.js</code>为<code>eslint.config.mjs</code> 用于eslint规则校验</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import antfu from &#x27;@antfu/eslint-config&#x27;</span><br><span class="line"></span><br><span class="line">export default antfu(</span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        stylistic<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            indent<span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="comment">// 缩进</span></span><br><span class="line">            quotes<span class="punctuation">:</span> &#x27;single&#x27;<span class="punctuation">,</span> <span class="comment">// 单引号</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        formatters<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">//</span></span><br><span class="line">        typescript<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 支持ts</span></span><br><span class="line">        unocss<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 支持unocss</span></span><br><span class="line">        isInEditor<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 保存删除未引入的代码</span></span><br><span class="line">        vue<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            overrides<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="comment">// vue文件顺序</span></span><br><span class="line">                &#x27;vue/block-order&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;error&#x27;<span class="punctuation">,</span> <span class="punctuation">&#123;</span> order<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">[</span>&#x27;template&#x27;<span class="punctuation">,</span> &#x27;script&#x27;<span class="punctuation">]</span><span class="punctuation">,</span> &#x27;style&#x27;<span class="punctuation">]</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> </span><br><span class="line">                &#x27;vue/singleline-html-element-content-newline&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭单行元素内容换行</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        rules<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            &#x27;no-console&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭console检查</span></span><br><span class="line">            &#x27;no-debugger&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭debugger检查</span></span><br><span class="line">            &#x27;antfu/top-level-function&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 顶级函数检测(开启时会将箭头函数转换为普通函数)</span></span><br><span class="line">            &#x27;antfu/if-newline&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 禁止换行 例如 if (a) return a使这种return a不会换行</span></span><br><span class="line">            &#x27;style/brace-style&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭大括号风格检查(只要有大括号就会换行的情况)</span></span><br><span class="line">            &#x27;no-alert&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭alert检查</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 9x版本 忽略文件这种配置方式 废弃掉eslintignore</span></span><br><span class="line">        ignores<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            &#x27;*.md&#x27;<span class="punctuation">,</span></span><br><span class="line">            &#x27;**<span class="comment">/*.md&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.sh&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.husky&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.local&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;node_modules&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.md&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.woff&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.ttf&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.idea&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;docs/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;public/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;/bin/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;Dockerfile&#x27;,</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment"></span></span><br></pre></td></tr></table></figure><br><p><strong><font color="#10c300">6.3、新增脚本</font></strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint .&quot;</span><span class="punctuation">,</span> <span class="comment">// 检测</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --fix&quot;</span> <span class="comment">// 修复</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="7、-gitignore文件"><a href="#7、-gitignore文件" class="headerlink" title="7、.gitignore文件"></a><strong><font color="red">7、.gitignore文件</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">Logs</span></span><br><span class="line">logs</span><br><span class="line">*.<span class="property">log</span></span><br><span class="line">npm-debug.<span class="property">log</span>*</span><br><span class="line">yarn-debug.<span class="property">log</span>*</span><br><span class="line">yarn-error.<span class="property">log</span>*</span><br><span class="line">lerna-debug.<span class="property">log</span>*</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Diagnostic</span> <span class="title function_">reports</span> (<span class="attr">https</span>:<span class="comment">//nodejs.org/api/report.html)</span></span><br><span class="line">report.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.<span class="property">json</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Runtime</span> data</span><br><span class="line">pids</span><br><span class="line">*.<span class="property">pid</span></span><br><span class="line">*.<span class="property">seed</span></span><br><span class="line">*.<span class="property">pid</span>.<span class="property">lock</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Directory</span> <span class="keyword">for</span> instrumented libs generated by jscoverage/<span class="title class_">JSCover</span></span><br><span class="line">lib-cov</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Coverage</span> directory used by tools like istanbul</span><br><span class="line">coverage</span><br><span class="line">*.<span class="property">lcov</span></span><br><span class="line"></span><br><span class="line"># nyc test coverage</span><br><span class="line">.<span class="property">nyc_output</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Grunt</span> intermediate <span class="title function_">storage</span> (<span class="attr">https</span>:<span class="comment">//gruntjs.com/creating-plugins#storing-task-files)</span></span><br><span class="line">.<span class="property">grunt</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Bower</span> dependency <span class="title function_">directory</span> (<span class="attr">https</span>:<span class="comment">//bower.io/)</span></span><br><span class="line">bower_components</span><br><span class="line"></span><br><span class="line"># node-waf configuration</span><br><span class="line">.<span class="property">lock</span>-wscript</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Compiled</span> binary <span class="title function_">addons</span> (<span class="attr">https</span>:<span class="comment">//nodejs.org/api/addons.html)</span></span><br><span class="line">build/<span class="title class_">Release</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Dependency</span> directories</span><br><span class="line">node_modules/</span><br><span class="line">jspm_packages/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Snowpack</span> dependency <span class="title function_">directory</span> (<span class="attr">https</span>:<span class="comment">//snowpack.dev/)</span></span><br><span class="line">web_modules/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">TypeScript</span> cache</span><br><span class="line">*.<span class="property">tsbuildinfo</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> npm cache directory</span><br><span class="line">.<span class="property">npm</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> eslint cache</span><br><span class="line">.<span class="property">eslintcache</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Microbundle</span> cache</span><br><span class="line">.<span class="property">rpt2_cache</span>/</span><br><span class="line">.<span class="property">rts2_cache_cjs</span>/</span><br><span class="line">.<span class="property">rts2_cache_es</span>/</span><br><span class="line">.<span class="property">rts2_cache_umd</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> <span class="variable constant_">REPL</span> history</span><br><span class="line">.<span class="property">node_repl_history</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Output</span> <span class="keyword">of</span> <span class="string">&#x27;npm pack&#x27;</span></span><br><span class="line">*.<span class="property">tgz</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Yarn</span> <span class="title class_">Integrity</span> file</span><br><span class="line">.<span class="property">yarn</span>-integrity</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># parcel-bundler <span class="title function_">cache</span> (<span class="attr">https</span>:<span class="comment">//parceljs.org/)</span></span><br><span class="line">.<span class="property">cache</span></span><br><span class="line">.<span class="property">parcel</span>-cache</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Next</span>.<span class="property">js</span> build output</span><br><span class="line">.<span class="property">next</span></span><br><span class="line">out</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Nuxt</span>.<span class="property">js</span> build / generate output</span><br><span class="line">.<span class="property">nuxt</span></span><br><span class="line">dist</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Gatsby</span> files</span><br><span class="line">.<span class="property">cache</span>/</span><br><span class="line"># <span class="title class_">Comment</span> <span class="keyword">in</span> the public line <span class="keyword">in</span> <span class="keyword">if</span> your project uses <span class="title class_">Gatsby</span> and not <span class="title class_">Next</span>.<span class="property">js</span></span><br><span class="line"># <span class="attr">https</span>:<span class="comment">//nextjs.org/blog/next-9-1#public-directory-support</span></span><br><span class="line"># public</span><br><span class="line"></span><br><span class="line"># vuepress build output</span><br><span class="line">.<span class="property">vuepress</span>/dist</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Serverless</span> directories</span><br><span class="line">.<span class="property">serverless</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">FuseBox</span> cache</span><br><span class="line">.<span class="property">fusebox</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">DynamoDB</span> <span class="title class_">Local</span> files</span><br><span class="line">.<span class="property">dynamodb</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">TernJS</span> port file</span><br><span class="line">.<span class="property">tern</span>-port</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Stores</span> <span class="title class_">VSCode</span> versions used <span class="keyword">for</span> testing <span class="title class_">VSCode</span> extensions</span><br><span class="line">.<span class="property">vscode</span>-test</span><br><span class="line"></span><br><span class="line"># yarn v2</span><br><span class="line">.<span class="property">yarn</span>/cache</span><br><span class="line">.<span class="property">yarn</span>/unplugged</span><br><span class="line">.<span class="property">yarn</span>/build-state.<span class="property">yml</span></span><br><span class="line">.<span class="property">yarn</span>/install-state.<span class="property">gz</span></span><br><span class="line">.<span class="property">pnp</span>.*</span><br><span class="line"></span><br><span class="line">stats.<span class="property">html</span></span><br><span class="line"></span><br><span class="line">.<span class="property">stylelintcache</span></span><br></pre></td></tr></table></figure><br><h3 id="8、代码提交检查"><a href="#8、代码提交检查" class="headerlink" title="8、代码提交检查"></a><strong><font color="red">8、代码提交检查</font></strong></h3><p>Husky + Lint-staged + Commitlint 来配置 Git 提交代码规范。</p><blockquote><p>核心内容是配置 <strong>Husky</strong> 的<code>pre-commit</code>和 <code>commit-msg</code> 两个钩子:</p><p>**<code>pre-commit</code>：**Husky + Lint-staged 整合实现 Git 提交前代码规范检测&#x2F;格式化 (前提：ESlint + Prettier + Stylelint 代码统一规范)；</p><p><strong><code>commit-msg</code>：</strong> Husky + Commitlint 整合实现生成规范化且高度自定义的 Git commit message。</p></blockquote><h4 id="8-1、husky-Git-钩子工具"><a href="#8-1、husky-Git-钩子工具" class="headerlink" title="8.1、husky Git 钩子工具 "></a><strong><font color="#10c300">8.1、husky Git 钩子工具</font></strong></h4><p>Husky 是 Git 钩子工具，可以设置在 git 各个阶段（<code>pre-commit</code>、<code>commit-msg</code> 等）触发。</p><p>官网<a target="_blank" rel="noopener" href="https://typicode.github.io/husky">https://typicode.github.io/husky</a> 推荐安装指令</p><br><p><font color="orange">命令行界面 (CLI) 安装</font></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky-init</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124173230055.png" alt="image-20250124173230055"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207141214268.png" alt="image-20240207141214268"></p><p>默认会添加这个依赖到包管理文件package.json（未安装），因此需要重新安装下依赖</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/ pnpm i</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124173359482.png" alt="image-20250124173359482"></p><br><h4 id="8-2、Lint-staged-检测提交代码"><a href="#8-2、Lint-staged-检测提交代码" class="headerlink" title="8.2、Lint-staged 检测提交代码 "></a><strong><font color="#10c300">8.2、Lint-staged 检测提交代码</font></strong></h4><blockquote><p>lint-staged 是一个在 git add 到暂存区的文件运行 linters (ESLint&#x2F;Prettier&#x2F;StyleLint) 的工具进行检测，避免在 git commit 提交时在整个项目执行。</p></blockquote><h5 id="1）安装"><a href="#1）安装" class="headerlink" title="1）安装 "></a><strong><font color="cornflowerblue">1）安装</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i lint-staged -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件"><a href="#2）配置文件" class="headerlink" title="2）配置文件 "></a><strong><font color="cornflowerblue">2）配置文件 </font></strong></h5><p><strong>a、新建 lint-staged.config.mjs 配置文件</strong></p><p>cache缓存能使钩子检测速度更快</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;lint-staged&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="string">&#x27;*.&#123;js,ts,tsx,vue&#125;&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;eslint --fix --cache --cache-location .eslintcache&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;*.&#123;scss,html&#125;&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;stylelint --fix --cache --cache-location .stylelintcache --allow-empty-input&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;*.css&#x27;</span>: [<span class="string">&#x27;prettier --write&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>b、package.json 中添加指令</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;lint:lint-staged&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><strong>c、文件<code>.husky/pre-commit</code>修改提交前钩子命令</strong></p><p>提交的时候执行pre-commit文件中命令，然后触发package.json 中的lint:lint-staged，从而执行lint-staged.config.mjs配置文件去做检测。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!<span class="regexp">/usr/</span>bin/env sh</span><br><span class="line">. <span class="string">&quot;$(dirname -- &quot;</span>$0<span class="string">&quot;)/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"># 添加该命令</span><br><span class="line">npm run <span class="attr">lint</span>:lint-staged --allow-empty</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207143016869.png" alt="image-20240207143016869"></p><br><h4 id="8-3、Commitlint-检测提交命名"><a href="#8-3、Commitlint-检测提交命名" class="headerlink" title="8.3、Commitlint 检测提交命名 "></a><strong><font color="#10c300">8.3、Commitlint 检测提交命名</font></strong></h4><blockquote><p>Commitlint 检查您的提交消息是否符合 Conventional comm it format 规范。– <a target="_blank" rel="noopener" href="https://commitlint.js.org/">Commitlint 官网</a></p></blockquote><h5 id="1）安装-1"><a href="#1）安装-1" class="headerlink" title="1）安装 "></a><strong><font color="cornflowerblue">1）安装</font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i @commitlint/cli @commitlint/config-conventional -D</span><br></pre></td></tr></table></figure><br><h5 id="2）语法规范"><a href="#2）语法规范" class="headerlink" title="2）语法规范 "></a><strong><font color="cornflowerblue">2）语法规范</font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 语法规范</span><br><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;footer&gt;</span><br><span class="line">       </span><br><span class="line">// 示例</span><br><span class="line">feat(用户模块): 新增用户登录功能</span><br><span class="line"></span><br><span class="line">此提交引入了一个新的用户登录功能，允许用户通过邮箱和密码进行身份验证。</span><br><span class="line">同时，还包含了输入字段的验证和错误处理。</span><br><span class="line"></span><br><span class="line">Closes #123</span><br></pre></td></tr></table></figure><br><h5 id="3）语法拆解说明"><a href="#3）语法拆解说明" class="headerlink" title="3）语法拆解说明"></a><strong><font color="cornflowerblue">3）语法拆解说明</font></strong></h5><ol><li>头部（Header）<ul><li><strong><code>&lt;type&gt;</code></strong>: 提交的类型，常见的类型包括：<ul><li><code>feat</code>: 新增功能</li><li><code>fix</code>: 修复缺陷</li><li><code>docs</code>: 文档变更</li><li><code>style</code>: 代码格式（不影响功能）</li><li><code>refactor</code>: 代码重构</li><li><code>perf</code>: 性能优化</li><li><code>test</code>: 添加测试或改动已有测试</li><li><code>build</code>: 构建过程或外部依赖的变更</li><li><code>ci</code>: 修改 CI 配置</li><li><code>chore</code>: 其他杂项更改</li><li><code>revert</code>: 回滚提交</li></ul></li><li><strong><code>&lt;scope&gt;</code></strong>: 可选，表示提交影响的范围（如模块名、文件名等），例如 <code>ui</code> 或 <code>api</code>。可以用括号括起来。</li><li><strong><code>&lt;subject&gt;</code></strong>: 提交的简要描述，建议不超过 50 个字符，使用祈使句（例如：<code>add login feature</code>）。</li></ul></li><li><strong>正文（Body）</strong><ul><li>可选，用于详细描述提交的内容和背景。可以包含多行，建议每行不超过 72 个字符。</li><li>说明为什么要做这些更改，以及如何解决了问题或实现了功能。</li></ul></li><li><strong>尾部（Footer）</strong><ul><li>可选，通常用于引用相关的任务、问题编号或其他重要的元信息。</li><li>例如：<code>Closes #123</code> 或 <code>Fixes #456</code>，表示这个提交关闭或修复了特定的问题。</li></ul></li></ol><br><h5 id="4）注意"><a href="#4）注意" class="headerlink" title="4）注意 "></a><strong><font color="cornflowerblue">4）注意</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502252255451.png" alt="image-20250225005214324"></p><br><h5 id="5）配置文件"><a href="#5）配置文件" class="headerlink" title="5）配置文件 "></a><strong><font color="cornflowerblue">5）配置文件</font></strong></h5><p>根目录创建 <code>commitlint.config.mjs</code> 配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&quot;@commitlint/types&quot;).UserConfig</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">ignores</span>: [<span class="function">(<span class="params">commit</span>) =&gt;</span> commit.<span class="title function_">includes</span>(<span class="string">&quot;init&quot;</span>)],</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;@commitlint/config-conventional&quot;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;body-leading-blank&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="string">&quot;footer-leading-blank&quot;</span>: [<span class="number">1</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="string">&quot;header-max-length&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>, <span class="number">108</span>],</span><br><span class="line">    <span class="string">&quot;subject-empty&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="string">&quot;type-empty&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="string">&quot;subject-case&quot;</span>: [<span class="number">0</span>],</span><br><span class="line">    <span class="string">&quot;type-enum&quot;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">&quot;always&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="string">&quot;feat&quot;</span>, <span class="comment">// 新增功能</span></span><br><span class="line">        <span class="string">&quot;fix&quot;</span>, <span class="comment">// 修复缺陷</span></span><br><span class="line">        <span class="string">&quot;docs&quot;</span>, <span class="comment">// 文档变更</span></span><br><span class="line">        <span class="string">&quot;style&quot;</span>, <span class="comment">// 代码格式（不影响功能，例如空格、分号等格式修正）</span></span><br><span class="line">        <span class="string">&quot;refactor&quot;</span>, <span class="comment">// 代码重构（不包括 bug 修复、功能新增）</span></span><br><span class="line">        <span class="string">&quot;perf&quot;</span>, <span class="comment">// 性能优化</span></span><br><span class="line">        <span class="string">&quot;test&quot;</span>, <span class="comment">// 添加疏漏测试或已有测试改动</span></span><br><span class="line">        <span class="string">&quot;build&quot;</span>, <span class="comment">// 构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）</span></span><br><span class="line">        <span class="string">&quot;ci&quot;</span>, <span class="comment">// 修改 CI 配置、脚本</span></span><br><span class="line">        <span class="string">&quot;revert&quot;</span>, <span class="comment">// 回滚 commit</span></span><br><span class="line">        <span class="string">&quot;chore&quot;</span>, <span class="comment">// 对构建过程或辅助工具和库的更改（不影响源文件、测试用例）</span></span><br><span class="line">        <span class="string">&#x27;wip&#x27;</span>, <span class="comment">// 开发中临时提交</span></span><br><span class="line">      ],</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>执行下面命令生成 <code>commint-msg</code> 钩子用于 git 提交信息校验</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .<span class="property">husky</span>/commit-msg <span class="string">&quot;npx --no -- commitlint --edit $1&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207142542813.png" alt="image-20240207142542813"></p><br><h3 id="9、其他"><a href="#9、其他" class="headerlink" title="9、其他"></a><strong><font color="red">9、其他</font></strong></h3><blockquote><p><strong>不使用antfu 直接使用prettier&amp;eslint &amp;styleLint</strong></p></blockquote><h4 id="9-1、prettier"><a href="#9-1、prettier" class="headerlink" title="9.1、prettier"></a><strong><font color="#10c300">9.1、prettier</font></strong></h4><h5 id="1）安装-2"><a href="#1）安装-2" class="headerlink" title="1）安装 "></a><strong><font color="cornflowerblue">1）安装</font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i prettier -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件-1"><a href="#2）配置文件-1" class="headerlink" title="2）配置文件 "></a><strong><font color="cornflowerblue">2）配置文件</font></strong></h5><p>根目录创建 <code>prettier.config.mjs</code> 配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;prettier&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">$schema</span>: <span class="string">&quot;https://json.schemastore.org/prettierrc&quot;</span>,</span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="9-2、eslint"><a href="#9-2、eslint" class="headerlink" title="9.2、eslint"></a><strong><font color="#10c300">9.2、eslint</font></strong></h4><blockquote><p><strong>使用9x版本 扁平化设计 导致很多插件版本滞后</strong></p></blockquote><h5 id="1）安装-3"><a href="#1）安装-3" class="headerlink" title="1）安装 "></a><strong><font color="cornflowerblue">1）安装</font></strong></h5><p>脚手架快速安装 然后pnpm i安装相关依赖包（如果创建项目的时候安装了，则不需要安装）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create @eslint/config@latest</span><br></pre></td></tr></table></figure><p>额外安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i eslint-define-config eslint-plugin-import -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件-2"><a href="#2）配置文件-2" class="headerlink" title="2）配置文件 "></a><strong><font color="cornflowerblue">2）配置文件</font></strong></h5><p>修改<code>eslint.config.js</code>为<code>eslint.config.mjs</code>保持风格统一</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> globals <span class="keyword">from</span> <span class="string">&quot;globals&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginJs <span class="keyword">from</span> <span class="string">&quot;@eslint/js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> tseslint <span class="keyword">from</span> <span class="string">&quot;typescript-eslint&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginVue <span class="keyword">from</span> <span class="string">&quot;eslint-plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginImport <span class="keyword">from</span> <span class="string">&quot;eslint-plugin-import&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineFlatConfig &#125; <span class="keyword">from</span> <span class="string">&quot;eslint-define-config&quot;</span>;</span><br><span class="line"><span class="comment">// 修复 https://eslint.nodejs.cn/blog/2024/05/eslint-compatibility-utilities/</span></span><br><span class="line"><span class="keyword">import</span> &#123; fixupPluginRules &#125; <span class="keyword">from</span> <span class="string">&quot;@eslint/compat&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineFlatConfig</span>([</span><br><span class="line">  <span class="comment">// 上面这一大截是官方的</span></span><br><span class="line">  &#123; <span class="attr">files</span>: [<span class="string">&quot;**/*.&#123;js,mjs,cjs,ts,vue&#125;&quot;</span>] &#125;,</span><br><span class="line">  pluginJs.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123; <span class="attr">globals</span>: globals.<span class="property">browser</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  ...tseslint.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line">  ...pluginVue.<span class="property">configs</span>[<span class="string">&quot;flat/essential&quot;</span>],</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&quot;**/*.vue&quot;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123;</span><br><span class="line">      <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">parser</span>: tseslint.<span class="property">parser</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 这是引入顺序插件</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&quot;**/*.vue&quot;</span>, <span class="string">&quot;**/*.?([cm])ts&quot;</span>, <span class="string">&quot;**/*.?([cm])tsx&quot;</span>],</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="comment">// 修复插件还没升级到9版本</span></span><br><span class="line">      <span class="attr">import</span>: <span class="title function_">fixupPluginRules</span>(pluginImport),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">      <span class="comment">// 插件还没升级到9x版本</span></span><br><span class="line">      <span class="string">&quot;import/first&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">      <span class="string">&quot;import/no-duplicates&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      <span class="string">&quot;import/order&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">groups</span>: [</span><br><span class="line">            <span class="comment">/* </span></span><br><span class="line"><span class="comment">              builtin ：内置模块，如 path，fs等 Node.js内置模块。</span></span><br><span class="line"><span class="comment">              external ：外部模块，如 lodash ，react 等第三方库。</span></span><br><span class="line"><span class="comment">              internal ：内部模块，如相对路径的模块、包名前缀为 @ 的模块。</span></span><br><span class="line"><span class="comment">              unknown ：未知模块，如模块名没有指定扩展名或模块路径缺失扩展名。</span></span><br><span class="line"><span class="comment">              parent ：父级目录的模块。</span></span><br><span class="line"><span class="comment">              sibling ：同级目录的模块。</span></span><br><span class="line"><span class="comment">              index ：当前目录的 index 文件。</span></span><br><span class="line"><span class="comment">              object ：使用ES6 导入的模块。</span></span><br><span class="line"><span class="comment">              type ：使用 import type 导入的模块。</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            [<span class="string">&quot;builtin&quot;</span>, <span class="string">&quot;external&quot;</span>],</span><br><span class="line">            <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">            [<span class="string">&quot;parent&quot;</span>, <span class="string">&quot;sibling&quot;</span>],</span><br><span class="line">            <span class="string">&quot;index&quot;</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>,</span><br><span class="line">            <span class="string">&quot;object&quot;</span>,</span><br><span class="line">            <span class="string">&quot;unknown&quot;</span>,</span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">pathGroups</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">pattern</span>: <span class="string">&quot;../**&quot;</span>,</span><br><span class="line">              <span class="attr">group</span>: <span class="string">&quot;parent&quot;</span>,</span><br><span class="line">              <span class="attr">position</span>: <span class="string">&quot;after&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">pattern</span>: <span class="string">&quot;./*.scss&quot;</span>,</span><br><span class="line">              <span class="attr">group</span>: <span class="string">&quot;sibling&quot;</span>,</span><br><span class="line">              <span class="attr">position</span>: <span class="string">&quot;after&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">          <span class="comment">// 不同组之间是否换行。</span></span><br><span class="line">          <span class="comment">// &#x27;newlines-between&#x27;: &#x27;always&#x27;,</span></span><br><span class="line">          <span class="comment">// 根据字母顺序对每组内的引用进行排序。</span></span><br><span class="line">          <span class="attr">alphabetize</span>: &#123;</span><br><span class="line">            <span class="attr">order</span>: <span class="string">&quot;asc&quot;</span>,</span><br><span class="line">            <span class="attr">caseInsensitive</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><br><h3 id="10、简化组件命名"><a href="#10、简化组件命名" class="headerlink" title="10、简化组件命名"></a><strong><font color="red">10、简化组件命名</font></strong></h3><p><strong>正常组件命名</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>:<span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 下面的写法是setup语法糖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>使用<code>vite-plugin-vue-setup-extend</code></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-vue-setup-extend -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>组件中使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="11、打包环境区分"><a href="#11、打包环境区分" class="headerlink" title="11、打包环境区分"></a><strong><font color="red">11、打包环境区分</font></strong></h3><p>vite.config.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>返回四个参数：</strong></p><ul><li><code>mode</code>：当前的运行模式（例如 <code>development</code> 或 <code>production</code>），没配置env文件默认就只有这两个值。</li><li><code>command</code>：当前运行的命令（例如 <code>serve</code> 或 <code>build</code>），本地运行返回serve，使用打包之后返回的build</li><li><code>isSsrBuild</code>：是否在进行服务器端渲染的构建。</li><li><code>isPreview</code>：是否在预览模式下运行。</li></ul><p><strong>实践可知：</strong></p><p>在运行本地项目时：</p><p>有无<code>.env</code>文件时，<code>vite.config.ts</code>文件中res返回都是<code>mode=&quot;development&quot;</code>，<code>command=&quot;serve&quot;</code>；</p><p>在运行打包项目时：</p><p>默认无<code>.env</code>文件时，<code>vite.config.ts</code>文件中res返回<code>mode=&quot;production&quot;</code>，<code>command=&quot;build&quot;</code>；</p><p>有<code>.env</code>文件时，根据打包的配置来的 ，如果你打包运行的是<code>.env.sit</code>文件，res返回的则是<code>mode=&quot;sit&quot;</code>，<code>command=&quot;build&quot;</code>；</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;run-p type-check \&quot;build-only &#123;@&#125;\&quot; --&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:sit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- sit&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:uat&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- uat&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- production&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type-check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --build&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build-only&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite build --mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>vite.config.ts 中访问.env文件：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> process <span class="keyword">from</span> <span class="string">&#x27;node:process&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> env = <span class="title function_">loadEnv</span>(mode, process.<span class="title function_">cwd</span>())</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(env)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .env</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;local&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.sit</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;sit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.uat</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;sit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.product</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;production&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="12、添加基准路径"><a href="#12、添加基准路径" class="headerlink" title="12、添加基准路径"></a><strong><font color="red">12、添加基准路径</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="string">&#x27;/pc/&#x27;</span>),</span><br><span class="line">    <span class="attr">routes</span>: [],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">base</span>: env.<span class="property">VITE_BASE_URL</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="13、添加打包的dist文件预览配置"><a href="#13、添加打包的dist文件预览配置" class="headerlink" title="13、添加打包的dist文件预览配置"></a><strong><font color="red">13、添加打包的dist文件预览配置</font></strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;preview&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="14、本地代理服务配置"><a href="#14、本地代理服务配置" class="headerlink" title="14、本地代理服务配置"></a><strong><font color="red">14、本地代理服务配置</font></strong></h3><p>官网<a target="_blank" rel="noopener" href="https://cn.vitejs.dev/config/server-options.html#server-proxy">https://cn.vitejs.dev/config/server-options.html#server-proxy</a></p><p><code>vite.config.ts</code>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">        <span class="comment">// 监听所有公共ip</span></span><br><span class="line">        <span class="attr">host</span>: <span class="string">&#x27;0.0.0.0&#x27;</span>,</span><br><span class="line">        <span class="attr">cors</span>: <span class="literal">true</span>, <span class="comment">// 允许所有来源访问本地开发服务器的资源</span></span><br><span class="line">        <span class="attr">port</span>: <span class="number">3300</span>,</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;/api&#x27;</span>: &#123; <span class="comment">// 代理前缀</span></span><br><span class="line">                <span class="comment">// 转发地址 前端请求http://localhost:3000/api/users代理后实际请求			       					   http://www.example.com/users </span></span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;http://www.example.com&#x27;</span>,</span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// 修改 Origin 头为目标地址</span></span><br><span class="line">                <span class="comment">// 移除路径中开头的 /api 前缀 例如：/api/users → /users</span></span><br><span class="line">                <span class="attr">rewrite</span>: <span class="function">(<span class="params">path: string</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>参数解析</strong></p><p>cors和changeOrigin</p><p>在 <code>vite.config.ts</code> 中，<code>cors: true</code> 和 <code>changeOrigin: true</code> 用于解决不同场景下的跨域问题，具体区别如下：</p><p>1、<strong><code>cors: true</code></strong></p><ul><li><strong>作用</strong>：配置开发服务器（Vite Dev Server）的 CORS 响应头，允许浏览器跨域访问本地开发服务器的资源。</li><li><strong>实现方式</strong>：<br>当设置为 <code>true</code> 时，Vite 会默认添加 <code>Access-Control-Allow-Origin: *</code> 响应头，允许所有来源的请求。若需更精细控制（如指定允许的域名），可通过 <code>CorsOptions</code> 对象配置。</li><li><strong>适用场景</strong>：<br>用于本地开发环境，解决前端资源（如静态文件）被其他域名访问时的 CORS 限制。例如，主应用加载微前端子应用的资源时可能需要此配置。</li></ul><p>2、<strong><code>changeOrigin: true</code></strong></p><ul><li><strong>作用</strong>：在代理请求时修改请求头的 <code>Origin</code> 字段为目标服务器的地址，绕过目标服务器的 CORS 校验。</li><li><strong>实现方式</strong>：<br>代理将前端请求的 <code>Origin</code>（如 <code>[http://localhost:3000 ](http://localhost:3000 )</code>）改为目标服务器的域名（如 <code>[https://apiservice.com ](https://apiservice.com )</code>），使目标服务器认为请求来自同源，从而避免 CORS 拦截。</li><li><strong>适用场景</strong>：<br>用于代理接口请求，尤其是当前端与后端分离开发时。例如，将 <code>/api</code> 路径的请求代理到 <code>[http://localhost:8080 ]</code>，并通过 <code>changeOrigin: true</code> 让后端正常响应。</li></ul><p><strong>两者的区别</strong></p><table><thead><tr><th>配置项</th><th>作用对象</th><th>核心目的</th><th>典型使用场景</th></tr></thead><tbody><tr><td><code>cors: true</code></td><td>Vite 开发服务器</td><td>允许浏览器跨域访问本地资源</td><td>微前端资源加载、本地静态服务</td></tr><tr><td><code>changeOrigin: true</code></td><td>代理请求</td><td>绕过目标服务器的 CORS 校验</td><td>接口代理到不同域的后端服务</td></tr></tbody></table><p><strong>注意事项</strong></p><ul><li><strong>优先级</strong>：<br><code>changeOrigin: true</code> 仅影响代理请求的 <code>Origin</code> 头，而 <code>cors: true</code> 影响的是 Vite 开发服务器自身的响应头。两者可同时使用。</li><li><strong>生产环境</strong>：<br><code>cors: true</code> 和代理配置仅在开发环境生效，生产环境需通过后端或 Nginx 配置 CORS。</li><li><strong>冲突处理</strong>：<br>若后端强制校验 <code>Origin</code>，需确保 <code>changeOrigin: true</code> 修改后的值与后端允许的域名一致</li></ul><br><h3 id="15、axios二次封装"><a href="#15、axios二次封装" class="headerlink" title="15、axios二次封装"></a><strong><font color="red">15、axios二次封装</font></strong></h3><p><code>utils/request.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Base</span> <span class="keyword">from</span> <span class="string">&#x27;@/utils/base&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">config: customInternalAxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">headersType</span>) &#123;</span><br><span class="line">        config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = config.<span class="property">headersType</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> base = <span class="title class_">Base</span>()</span><br><span class="line">    base.<span class="property">requestTime</span> = <span class="title function_">dayjs</span>().<span class="title function_">format</span>(<span class="string">&#x27;YYYYDDMMHmmss&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> &#123; params, data &#125; = config</span><br><span class="line">    <span class="keyword">const</span> newParams = &#123; ...(data || params), ...base &#125;</span><br><span class="line">    <span class="keyword">if</span> (params) &#123;</span><br><span class="line">        config.<span class="property">params</span> = newParams</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        config.<span class="property">data</span> = newParams</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function">(<span class="params">response: AxiosResponse</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; body, msgCd, msgInfo &#125; = response.<span class="property">data</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果响应是二进制流，则直接返回，用于下载文件、Excel 导出等(待测试)</span></span><br><span class="line">        <span class="keyword">if</span> (response.<span class="property">config</span>.<span class="property">responseType</span> === <span class="string">&#x27;blob&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> response</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接口请求成功</span></span><br><span class="line">        <span class="keyword">if</span> (msgCd.<span class="title function_">slice</span>(-<span class="number">5</span>) === <span class="string">&#x27;00000&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> body</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 登录失效</span></span><br><span class="line">        <span class="keyword">if</span> (msgCd === <span class="string">&#x27;MPL99001&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">name</span> !== <span class="string">&#x27;login&#x27;</span>) &#123;</span><br><span class="line">                router.<span class="title function_">replace</span>(&#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">                    <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">fullPath</span> &#125;,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 其他错误</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(msgInfo || <span class="string">&#x27;错误&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[ajax error]&#x27;</span>, error)</span><br><span class="line">        <span class="keyword">let</span> msgInfo = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> &#123; message &#125; = error</span><br><span class="line">        <span class="keyword">if</span> (message === <span class="string">&#x27;Network Error&#x27;</span>) &#123;</span><br><span class="line">            msgInfo = <span class="string">&#x27;操作失败，网络异常！&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message.<span class="title function_">includes</span>(<span class="string">&#x27;timeout&#x27;</span>)) &#123;</span><br><span class="line">            msgInfo = <span class="string">&#x27;接口请求超时，请刷新页面后重试！&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message.<span class="title function_">includes</span>(<span class="string">&#x27;Request failed with status code&#x27;</span>)) &#123;</span><br><span class="line">            msgInfo = <span class="string">`接口请求失败，请稍后重试！<span class="subst">$&#123;message.substr(message.length - <span class="number">3</span>)&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(msgInfo)</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure><p><code>api/user/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CommonAPI</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取首页信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 请求参数，默认为空对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> 包含首页信息的Promise对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">homeInformationQuery</span>(<span class="params">data = &#123;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> request&lt;any, <span class="title class_">HomeInformationQueryResult</span>&gt;(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/fortune-business/v1/common/home-information-query&#x27;</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            data,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">CommonAPI</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 请求参数 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 响应参数 */</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">HomeInformationQueryResult</span> &#123;</span><br><span class="line">    <span class="attr">fundInfoList</span>: <span class="title class_">FundInfoList</span></span><br><span class="line">    <span class="attr">newUserFlag</span>: boolean</span><br><span class="line">    <span class="attr">userSignFlag</span>: boolean</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">FundInfo</span> &#123;</span><br><span class="line">    <span class="attr">fundDesc</span>: string</span><br><span class="line">    <span class="attr">fundName</span>: string</span><br><span class="line">    <span class="attr">fundDayLy</span>: string</span><br><span class="line">    <span class="attr">fundIcon</span>: string</span><br><span class="line">    fundElectronicAccount?: any</span><br><span class="line">    <span class="attr">fundCorpId</span>: string</span><br><span class="line">    <span class="attr">fundNo</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储全部基金的数组类型</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">FundInfoList</span> = <span class="title class_">FundInfo</span>[]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>***.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">UserAPI</span> <span class="keyword">from</span> <span class="string">&#x27;@/api/user&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">login</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title class_">CommonAPI</span>.<span class="title function_">homeInformationQuery</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">login</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="16、打包分析"><a href="#16、打包分析" class="headerlink" title="16、打包分析"></a><strong><font color="red">16、打包分析</font></strong></h3><p>插件网站<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/rollup-plugin-visualizer">https://www.npmjs.com/package/rollup-plugin-visualizer</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add rollup-plugin-visualizer -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; visualizer &#125; <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-visualizer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">visualizer</span>(&#123;</span><br><span class="line">            <span class="comment">// 注意这里要设置为true，否则无效</span></span><br><span class="line">            <span class="attr">open</span>: !!((command === <span class="string">&#x27;build&#x27;</span> &amp;&amp; mode === <span class="string">&#x27;development&#x27;</span>)), </span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;stats.html&#x27;</span>, <span class="comment">// 分析图生成的文件名</span></span><br><span class="line">            <span class="attr">gzipSize</span>: <span class="literal">true</span>, <span class="comment">// 收集 gzip 大小并将其显示</span></span><br><span class="line">            <span class="attr">brotliSize</span>: <span class="literal">true</span>, <span class="comment">// 收集 brotli 大小并将其显示</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="17、gzip压缩"><a href="#17、gzip压缩" class="headerlink" title="17、gzip压缩"></a><strong><font color="red">17、gzip压缩</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i vite-plugin-compression -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 压缩gzip</span></span><br><span class="line"><span class="keyword">import</span> viteCompression <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-compression&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title function_">viteCompression</span>(&#123;</span><br><span class="line">        <span class="attr">verbose</span>: <span class="literal">true</span>, <span class="comment">// 是否在控制台输出压缩结果</span></span><br><span class="line">        <span class="attr">disable</span>: <span class="literal">false</span>, <span class="comment">// 是否禁用压缩</span></span><br><span class="line">        <span class="attr">deleteOriginFile</span>: <span class="literal">false</span>, <span class="comment">// 删除源文件</span></span><br><span class="line">        <span class="attr">threshold</span>: <span class="number">10240</span>, <span class="comment">// 文件大小超过此值时进行压缩，单位为字节即10kb</span></span><br><span class="line">        <span class="attr">algorithm</span>: <span class="string">&#x27;gzip&#x27;</span>, <span class="comment">// 压缩算法，可选 &#x27;gzip&#x27; 或 &#x27;brotli&#x27;</span></span><br><span class="line">        <span class="attr">ext</span>: <span class="string">&#x27;.gz&#x27;</span> <span class="comment">// 压缩后的文件扩展名</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>nginx服务器上还要对应配置</strong></p><p>在server节点下新增以下配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    </span><br><span class="line">    # 追加如下配置</span><br><span class="line">    # gzip - 动态压缩配置</span><br><span class="line">    gzip            on;                # 开启gzip压缩</span><br><span class="line">    gzip_vary       on;                # 添加Vary: Accept-Encoding响应头，支持CDN缓存</span><br><span class="line">    gzip_proxied    any;               # 对所有代理请求都进行压缩</span><br><span class="line">    gzip_comp_level 6;                 # 压缩级别6（1-9），平衡压缩率和CPU占用</span><br><span class="line">    # 指定哪些 MIME 类型的文件需要压缩</span><br><span class="line">    gzip_types      text/plain         # .txt文本文件</span><br><span class="line">                    text/css           # .css样式文件</span><br><span class="line">                    text/xml           # .xml文件</span><br><span class="line">                    text/javascript    # .js文件（旧MIME类型）</span><br><span class="line">                    application/json   # .json API响应</span><br><span class="line">                    application/javascript  # .js文件（新MIME类型）</span><br><span class="line">                    application/xml    # XML文件</span><br><span class="line">                    application/xml+rss     # RSS订阅</span><br><span class="line">                    application/rss+xml     # RSS订阅</span><br><span class="line">                    application/atom+xml    # Atom订阅</span><br><span class="line">                    image/svg+xml      # .svg矢量图</span><br><span class="line">                    font/ttf           # .ttf字体文件</span><br><span class="line">                    font/otf           # .otf字体文件</span><br><span class="line">                    font/woff          # .woff字体文件（虽然已压缩，但有时仍可获益）</span><br><span class="line">                    application/x-font-ttf       # 字体文件（兼容旧格式）</span><br><span class="line">                    application/x-javascript;    # JS文件（兼容旧格式）</span><br><span class="line">    </span><br><span class="line">    # gzip_static - 使用预先压缩的.gz文件</span><br><span class="line">    gzip_static     on;  # 优先使用构建时生成的.gz文件，提升性能</span><br><span class="line">    gzip_min_length 1k;  # 小于1KB的文件不压缩</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果是打包成docker镜像，Dockerfile可配置如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx:1.25.2-alpine-slim</span><br><span class="line"></span><br><span class="line">COPY dist /usr/share/nginx/html/</span><br><span class="line"></span><br><span class="line"># 开启gzip压缩配置</span><br><span class="line">RUN sed -i &#x27;/server_name  localhost;/a \</span><br><span class="line"> gzip on;</span><br><span class="line"> gzip_static on;</span><br><span class="line"> gzip_buffers  4 16k;</span><br><span class="line"> gzip_min_length 1k;</span><br><span class="line"> gzip_comp_level 9;</span><br><span class="line"> gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line"> gzip_proxied    any;</span><br><span class="line"> gzip_vary on;</span><br><span class="line"> gzip_disable &quot;MSIE [1-6]&quot;;&#x27;</span><br><span class="line"></span><br><span class="line"># 指定于外界交互的端口</span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure><p>这些配置项的作用如下：</p><ul><li><code>gzip on;</code> 启用 Gzip 功能。</li><li><code>gzip_static on;</code> 允许 Nginx 直接返回已压缩的静态文件。</li><li><code>gzip_types</code> 指定需要压缩的文件类型。</li><li><code>gzip_vary on;</code> 添加 <code>Vary: Accept-Encoding</code> 头部，确保浏览器正确处理压缩文件。</li><li><code>gzip_comp_level</code> 设置压缩级别，数值越大压缩率越高，但性能消耗也越大（1-9）</li><li><code>gzip_buffers</code> 设置缓冲区大小。</li><li><code>gzip_http_version</code> 设置 HTTP 版本。</li><li><code>gzip_disable</code> 禁用对特定浏览器的 Gzip 压缩。</li><li><code>gzip_proxied</code> 用于控制 Gzip 压缩的行为，特别是在处理来自代理服务器的请求时。<strong>any</strong>: 对所有请求（包括来自代理的请求）执行 Gzip 压缩</li></ul><br><h3 id="18、图片压缩"><a href="#18、图片压缩" class="headerlink" title="18、图片压缩"></a><strong><font color="red">18、图片压缩</font></strong></h3><p>插件网站<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/vite-plugin-image-optimizer">vite-plugin-image-optimizer</a> （弃用）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-image-optimizer -D</span><br><span class="line">pnpm add sharp -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ViteImageOptimizer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-image-optimizer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">ViteImageOptimizer</span>(&#123; <span class="comment">// 图片压缩</span></span><br><span class="line">            <span class="attr">png</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">jpeg</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">jpg</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">webp</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">60</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>插件网站<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/vite-plugin-image-tools">vite-plugin-image-tools</a>（推荐）</p><p>vite插件，支持图片压缩和自动转webp，目前只支持’png’, ‘jpg’, ‘webp’, ‘avif’, ‘tiff’, ‘gif’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm add -D vite-plugin-image-tools</span><br><span class="line">pnpm add spritesmith -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VitePluginImageTools</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-image-tools&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">VitePluginImageTools</span>(&#123;</span><br><span class="line">      	<span class="attr">quality</span>: <span class="number">80</span>, <span class="comment">// 图片质量</span></span><br><span class="line">        <span class="attr">enableWebp</span>: <span class="literal">true</span>, <span class="comment">// 开启webp转换</span></span><br><span class="line">        <span class="attr">limitSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// 小于10KB不做任何压缩转换处理（10KB = 10 * 1024 bytes）</span></span><br><span class="line">        <span class="attr">webpConfig</span>: &#123;</span><br><span class="line">            <span class="attr">deleteOriginImg</span>: <span class="literal">true</span>, <span class="comment">// 打包时删除原图，减少产物体积</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>参数</p><table><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>Description</th></tr></thead><tbody><tr><td>quality</td><td>number</td><td>80</td><td>图片质量 (1-100)</td></tr><tr><td>includes</td><td>string&#x2F;RegExp</td><td>‘’</td><td>‘<code>xxx.png&#39;.includs(inclouds) includes.test(&#39;xxx.png&#39;)</code>jpe?g</td></tr><tr><td>excludes</td><td>string&#x2F;RegExp</td><td>‘’</td><td>排除项，如：!’<code>xxx.png&#39;.includs(inclouds) !includes.test(&#39;xxx.png&#39;)</code></td></tr><tr><td>filter</td><td>function</td><td>() &#x3D;&gt; true</td><td>过滤方法，可自定义过滤图片逻辑，支持async 参数：图片路径 如： filter: (path) &#x3D;&gt; { return path.includes(‘.png’) }</td></tr><tr><td>compatibility</td><td>boolean</td><td>false</td><td>是否兼容低版本浏览器，生产环境生效， true：只有css中的图片会转webp（暂时只支持打包时候处理css） false：全部转webp</td></tr><tr><td>bodyWebpClassName</td><td>string</td><td>webp</td><td>body标签的webp class，用于生成兼容webp的class</td></tr><tr><td>enableWebp</td><td>boolean</td><td>false</td><td>生产环境是否转webp</td></tr><tr><td>enableDev</td><td>boolean</td><td>false</td><td>开发环境是否开启压缩</td></tr><tr><td>enableDevWebp</td><td>boolean</td><td>false</td><td>开发环境是否开启转webp</td></tr><tr><td>cacheDir</td><td>string</td><td>‘node_modules&#x2F;.cache&#x2F;vite-plugin-image’</td><td>缓存路径， 默认，只在开发环境生效</td></tr><tr><td>sharpConfig</td><td>Object</td><td>{ jpeg?: JpegOptions, jpg?: JpegOptions, png?: PngOptions, webp?: WebpOptions, avif?: AvifOptions, tiff?: TiffOptions, gif?: GifOptions}</td><td><a target="_blank" rel="noopener" href="https://sharp.pixelplumbing.com/api-output/#_top">sharp配置</a></td></tr><tr><td>svgoConfig</td><td>Object</td><td>{plugins:[‘preset-default’,{name:’removerXMLNS’},{name:’removeViewBox’}],js2svg:{indent:2, pretty: true}}</td><td><a target="_blank" rel="noopener" href="https://svgo.dev/docs/preset-default/">https://svgo.dev/docs/preset-default/</a></td></tr></tbody></table><p>✅ <strong>结论</strong>：<br><code>vite-plugin-image-tools</code> 默认不会删除原图，这是有意设计（兼容性考虑）。<br>如果你确定不需要原图，可以写 Node 脚本删除原图（不建议删除）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">removeOriginalImages</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;remove-original-images&#x27;</span>,</span><br><span class="line">    <span class="title function_">closeBundle</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> outDir = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>) <span class="comment">// 输出目录</span></span><br><span class="line">      <span class="keyword">const</span> extsToRemove = [<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;.jpeg&#x27;</span>]</span><br><span class="line">      <span class="keyword">const</span> stack = [outDir]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span> (stack.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dir = stack.<span class="title function_">pop</span>()!</span><br><span class="line">        <span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(dir)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> file <span class="keyword">of</span> files) &#123;</span><br><span class="line">          <span class="keyword">const</span> fullPath = path.<span class="title function_">join</span>(dir, file)</span><br><span class="line">          <span class="keyword">const</span> stat = fs.<span class="title function_">statSync</span>(fullPath)</span><br><span class="line">          <span class="keyword">if</span> (stat.<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">            stack.<span class="title function_">push</span>(fullPath)</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (extsToRemove.<span class="title function_">includes</span>(path.<span class="title function_">extname</span>(fullPath).<span class="title function_">toLowerCase</span>())) &#123;</span><br><span class="line">            fs.<span class="title function_">unlinkSync</span>(fullPath)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已删除原始图片文件&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 你的其他插件</span></span><br><span class="line">    <span class="title function_">removeOriginalImages</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="19、解决ts无法识别路由中导入的vue组件"><a href="#19、解决ts无法识别路由中导入的vue组件" class="headerlink" title="19、解决ts无法识别路由中导入的vue组件"></a><strong><font color="red">19、解决ts无法识别路由中导入的vue组件</font></strong></h3><p><code>env.d.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">declare module &#x27;*.vue&#x27; &#123;</span><br><span class="line">    import type &#123; DefineComponent &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    const component: DefineComponent</span><br><span class="line">    export default component</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="20、将路由和pinia分离到独立模块"><a href="#20、将路由和pinia分离到独立模块" class="headerlink" title="20、将路由和pinia分离到独立模块"></a><strong><font color="red">20、将路由和pinia分离到独立模块</font></strong></h3><p>将路由和pinia分离到独立模块，提高可维护性和可扩展性</p><p><code>/src/plugins/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setupRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setupStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">install</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">        <span class="comment">// 路由(router)</span></span><br><span class="line">        <span class="title function_">setupRouter</span>(app)</span><br><span class="line">        <span class="comment">// 状态管理(store)</span></span><br><span class="line">        <span class="title function_">setupStore</span>(app)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/router/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BASE_URL</span>),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/home/index.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">meta</span>: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span>, <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setupRouter</span> = (<span class="params">app: App</span>) =&gt; &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(router)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/store/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局注册 store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setupStore</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(pinia)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/main.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&#x27;@/plugins&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(plugins)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><br><h3 id="21、添加mock工具"><a href="#21、添加mock工具" class="headerlink" title="21、添加mock工具"></a><strong><font color="red">21、添加mock工具</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-mock-dev-server -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mockDevServerPlugin <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock-dev-server&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        env.<span class="property">VITE_MOCK_DEV_SERVER</span> === <span class="string">&#x27;true&#x27;</span> ? <span class="title function_">mockDevServerPlugin</span>() : <span class="literal">null</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在项目根目录添加mock文件夹</p><p><code>mock/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;node:path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createDefineMock &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock-dev-server&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> defineMock = <span class="title function_">createDefineMock</span>(<span class="function">(<span class="params">mock</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 拼接url</span></span><br><span class="line">    mock.<span class="property">url</span> = path.<span class="title function_">join</span>(mock.<span class="property">url</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>tsconfig.app.</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;mock/**/*.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>mock/modules/home.mock.ts</code></p><p>这里命名中间一定要用mock，格式xxx.mock.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineMock &#125; <span class="keyword">from</span> <span class="string">&#x27;../index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineMock</span>([</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取首页信息</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/fortune-business/v1/common/home-information-query&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: [<span class="string">&#x27;POST&#x27;</span>],</span><br><span class="line">        <span class="attr">body</span>: &#123;</span><br><span class="line">            <span class="attr">msgCd</span>: <span class="string">&#x27;00000&#x27;</span>,</span><br><span class="line">            <span class="attr">mockFlag</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;交易成功&#x27;</span>,</span><br><span class="line">            <span class="attr">body</span>: &#123;</span><br><span class="line">                <span class="attr">newUserFlag</span>: <span class="literal">false</span>, <span class="comment">// 是否新用户</span></span><br><span class="line">                <span class="attr">userSignFlag</span>: <span class="literal">true</span>, <span class="comment">// false需要用户签隐私协议</span></span><br><span class="line">                <span class="attr">fundInfoList</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">funType</span>: <span class="string">&#x27;稳健理财&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundDesc</span>: <span class="string">&#x27;稳健理财你真棒&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundName</span>: <span class="string">&#x27;汇添富和聚宝货币市场基金&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundDayLy</span>: <span class="string">&#x27;4.26&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundIcon</span>: <span class="string">&#x27;11&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundElectronicAccount</span>: <span class="literal">null</span>,</span><br><span class="line">                        <span class="attr">fundCorpId</span>: <span class="string">&#x27;MS-BANK&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundNo</span>: <span class="string">&#x27;000600&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure><br><h3 id="22、添加ESLint配置检查器-启动项"><a href="#22、添加ESLint配置检查器-启动项" class="headerlink" title="22、添加ESLint配置检查器 启动项"></a><strong><font color="red">22、添加ESLint配置检查器 启动项</font></strong></h3><p><code>package.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;eslint-config-inspector&quot;: &quot;pnpm dlx eslint --inspect-config&quot;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><br><h3 id="23、添加404页"><a href="#23、添加404页" class="headerlink" title="23、添加404页"></a><strong><font color="red">23、添加404页</font></strong></h3><p><code>src/router/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BASE_URL</span>),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="comment">// Vue3 的写法，兼容子路径</span></span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/404.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">meta</span>: &#123; <span class="attr">requiresAuth</span>: <span class="literal">false</span>, <span class="attr">title</span>: <span class="string">&#x27;中国移动支付-404&#x27;</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setupRouter</span> = (<span class="params">app: App</span>) =&gt; &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(router)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="24、引用scss文件"><a href="#24、引用scss文件" class="headerlink" title="24、引用scss文件"></a><strong><font color="red">24、引用scss文件</font></strong></h3><p>添加scss文件</p><p><code>src/styles/common.scss</code></p><p><code>src/styles/mixin.scss</code></p><p><code>src/styles/variables.scss</code></p><p><strong><code>vite.config.ts</code></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode, command &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="attr">css</span>: &#123;</span><br><span class="line">            <span class="comment">// css预处理器</span></span><br><span class="line">            <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">                <span class="attr">scss</span>: &#123;</span><br><span class="line">                    <span class="attr">additionalData</span>: <span class="string">`</span></span><br><span class="line"><span class="string">                        @use &quot;@/styles/variables.scss&quot; as *;</span></span><br><span class="line"><span class="string">                        @use &quot;@/styles/mixin.scss&quot; as *;`</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="25、打包拆分-小图片转base64"><a href="#25、打包拆分-小图片转base64" class="headerlink" title="25、打包拆分 小图片转base64"></a><strong><font color="red">25、打包拆分 小图片转base64</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add terser -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode, command &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">assetsInlineLimit</span>: <span class="number">1024</span> * <span class="number">10</span>, <span class="comment">// 10kb以下，转Base64</span></span><br><span class="line">    <span class="attr">chunkSizeWarningLimit</span>: <span class="number">2000</span>, <span class="comment">// 消除打包大小超过500kb警告</span></span><br><span class="line">    <span class="attr">minify</span>: <span class="string">&#x27;terser&#x27;</span>, <span class="comment">// Vite 2.6.x 以上需要配置 minify: &quot;terser&quot;, terserOptions 才能生效</span></span><br><span class="line">    <span class="attr">terserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">compress</span>: &#123;</span><br><span class="line">            <span class="attr">keep_infinity</span>: <span class="literal">true</span>, <span class="comment">// 防止 Infinity 被压缩成 1/0，这可能会导致 Chrome 上的性能问题</span></span><br><span class="line">            <span class="attr">drop_console</span>: mode === <span class="string">&#x27;production&#x27;</span>, <span class="comment">// 生产环境去除 console</span></span><br><span class="line">            <span class="attr">drop_debugger</span>: <span class="literal">true</span>, <span class="comment">// 生产环境去除 debugger</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">format</span>: &#123;</span><br><span class="line">            <span class="attr">comments</span>: <span class="literal">false</span>, <span class="comment">// 删除注释</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">        <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="comment">// 每个node_modules模块分成一个js文件</span></span><br><span class="line">            <span class="title function_">manualChunks</span>(<span class="params">id: string</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (id.<span class="title function_">includes</span>(<span class="string">&#x27;node_modules&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">const</span> packageName = id.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;node_modules/.pnpm/&#x27;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>].<span class="title function_">toString</span>()</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 1.第三方依赖合并在一起</span></span><br><span class="line">                    <span class="comment">// return &#x27;vendor&#x27;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 2.把第三方依赖单独抽离出来</span></span><br><span class="line">                    <span class="comment">// return packageName</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 3.将较大型或常用的第三方库单独打包</span></span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;pinia&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;axios&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;dayjs&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;bowser&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;bowser&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;vue-router&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;vue&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&#x27;vendor&#x27;</span> <span class="comment">// 其他第三方依赖合并在一起</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">entryFileNames</span>: <span class="string">&#x27;js/[name].[hash].js&#x27;</span>,</span><br><span class="line">            <span class="attr">chunkFileNames</span>: <span class="string">&#x27;js/[name].[hash].js&#x27;</span>,</span><br><span class="line">            <span class="attr">assetFileNames</span>: <span class="function">(<span class="params">assetInfo: any</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> info = assetInfo.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">                <span class="keyword">let</span> extType = info[info.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line">                <span class="keyword">if</span> (<span class="regexp">/\.(?:png|jpe?g|gif|svg|webp)(?:\?.*)?$/</span>.<span class="title function_">test</span>(assetInfo.<span class="property">name</span>)) &#123;</span><br><span class="line">                    extType = <span class="string">&#x27;img&#x27;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/\.(?:mp4|webm|ogg|mp3|wav|aac)(?:\?.*)?$/i</span>.<span class="title function_">test</span>(assetInfo.<span class="property">name</span>)) &#123;</span><br><span class="line">                    extType = <span class="string">&#x27;media&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;extType&#125;</span>/[name].[hash].[ext]`</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="26、添加Vconsole打印"><a href="#26、添加Vconsole打印" class="headerlink" title="26、添加Vconsole打印"></a><strong><font color="red">26、添加Vconsole打印</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-vconsole vconsole -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> viteVConsole <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vconsole&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  	<span class="attr">plugins</span>: [</span><br><span class="line">         <span class="title function_">viteVConsole</span>(&#123;</span><br><span class="line">            <span class="attr">entry</span>: [path.<span class="title function_">resolve</span>(<span class="string">&#x27;src/main.ts&#x27;</span>)], <span class="comment">// 项目入口文件 [[1, 6]]</span></span><br><span class="line">            <span class="attr">enabled</span>: mode !== <span class="string">&#x27;production&#x27;</span>, <span class="comment">// 根据环境启用 [[3, 6]]</span></span><br><span class="line">            <span class="attr">localEnabled</span>: <span class="literal">true</span>, <span class="comment">// 本地开发时强制启用 [[6]]</span></span><br><span class="line">            <span class="attr">config</span>: &#123;</span><br><span class="line">                <span class="attr">theme</span>: <span class="string">&#x27;dark&#x27;</span>, <span class="comment">// 主题配置</span></span><br><span class="line">                <span class="attr">maxLogNumber</span>: <span class="number">1000</span>, <span class="comment">// 日志数量限制</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">	]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="27、简化SVG使用"><a href="#27、简化SVG使用" class="headerlink" title="27、简化SVG使用"></a><strong><font color="red">27、简化SVG使用</font></strong></h3><p>插件网站<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/vite-svg-loader">https://www.npmjs.com/package/vite-svg-loader</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-svg-loader -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> svgLoader <span class="keyword">from</span> <span class="string">&#x27;vite-svg-loader&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">svgLoader</span>(&#123;</span><br><span class="line">            <span class="comment">// &#x27;url&#x27;: img标签引入 &#x27;raw&#x27;：demo元素 v-html引入   &#x27;component&#x27;: 组件展示</span></span><br><span class="line">            <span class="attr">defaultImport</span>: <span class="string">&#x27;url&#x27;</span>,</span><br><span class="line">            <span class="attr">svgo</span>: <span class="literal">true</span>, <span class="comment">// 启用SVGO优化</span></span><br><span class="line">            <span class="attr">svgoConfig</span>: &#123;</span><br><span class="line">                <span class="attr">multipass</span>: <span class="literal">false</span>, <span class="comment">// 关闭对SVG文件进行多次优化迭代（更彻底地压缩 SVG，会增加处理时间）</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// env.d.ts 模块声明</span><br><span class="line">/// &lt;reference types=&quot;vite-svg-loader&quot; /&gt;</span><br></pre></td></tr></table></figure><p><code>.vue文件使用</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;url&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">w100</span> <span class="attr">:src</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;raw&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">w100</span> <span class="attr">v-html</span>=<span class="string">&quot;logo&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;component&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logo</span> <span class="attr">w100</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;@/assets/logo.svg&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="28、px转换"><a href="#28、px转换" class="headerlink" title="28、px转换"></a><strong><font color="red">28、px转换</font></strong></h3><h4 id="cnjm-postcss-px-to-viewport"><a href="#cnjm-postcss-px-to-viewport" class="headerlink" title="cnjm-postcss-px-to-viewport"></a><strong><font color="#10c300">cnjm-postcss-px-to-viewport</font></strong></h4><p><strong><code>px转vw/vh</code></strong></p><p>插件网站<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/cnjm-postcss-px-to-viewport">https://www.npmjs.com/package/cnjm-postcss-px-to-viewport</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add cnjm-postcss-px-to-viewport -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import px2viewport from &#x27;cnjm-postcss-px-to-viewport&#x27;</span><br><span class="line"></span><br><span class="line">// https://vite.dev/config/</span><br><span class="line">export default defineConfig((&#123; mode &#125;) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        css: &#123;</span><br><span class="line">            postcss: &#123;</span><br><span class="line">                plugins: [</span><br><span class="line">                    px2viewport(&#123;</span><br><span class="line">                        unitToConvert: &#x27;px&#x27;, // 要转化的单位</span><br><span class="line">                        viewportWidth: 750, // UI设计稿的宽度</span><br><span class="line">                        unitPrecision: 6, // 转换后的精度，即小数点位数</span><br><span class="line">                        propList: [&#x27;*&#x27;], // 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span><br><span class="line">                        viewportUnit: &#x27;vw&#x27;, // 指定需要转换成的视窗单位，默认vw</span><br><span class="line">                        fontViewportUnit: &#x27;vw&#x27;, // 指定字体需要转换成的视窗单位，默认vw</span><br><span class="line">                        selectorBlackList: [&#x27;ignore&#x27;], // 指定不转换为视窗单位的类名，</span><br><span class="line">                        minPixelValue: 1, // 默认值1，小于或等于1px则不进行转换</span><br><span class="line">                        mediaQuery: true, // 是否在媒体查询的css代码中也进行转换，默认false</span><br><span class="line">                        replace: true, // 是否转换后直接更换属性值</span><br><span class="line">                        exclude: [], // 设置忽略文件，用正则做目录名匹配</span><br><span class="line">                        landscape: false, // 是否处理横屏情况</span><br><span class="line">                        // 如果没有使用其他的尺寸来设计，下面这个方法可以不需要， 这个自定义的方法是针对处理vant组件下的设计稿为375问题</span><br><span class="line">                        customFun: (&#123; file &#125;: &#123; file: string &#125;) =&gt; &#123;</span><br><span class="line">                            const designWidth = path.join(file).includes(path.join(&#x27;node_modules&#x27;, &#x27;vant&#x27;))</span><br><span class="line">                                ? 375</span><br><span class="line">                                : 750</span><br><span class="line">                            return designWidth</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;),</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在 TypeScript 中，<code>declare module</code> 用于声明一个模块的类型定义，通常在以下情况下使用：</p><ol><li><strong>没有类型定义文件的第三方库</strong>：如果你正在使用一个第三方库（如 <code>cnjm-postcss-px-to-viewport</code>），但该库没有提供官方的类型定义文件（例如 <code>.d.ts</code> 文件），你可以使用 <code>declare module</code> 来告诉 TypeScript 这个模块存在，从而避免编译时报错。</li><li><strong>临时解决方案</strong>：这是一个临时的声明，通常用于快速解决类型检查问题。它不会为模块提供具体的类型信息，只是告诉 TypeScript 这个模块是有效的。</li></ol><p><code>types/cnjm-postcss-px-to-viewport.d.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare module &#x27;cnjm-postcss-px-to-viewport&#x27;</span><br></pre></td></tr></table></figure><p><code>tsconfig.node.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;extends&quot;: &quot;@tsconfig/node22/tsconfig.json&quot;,</span><br><span class="line">    &quot;compilerOptions&quot;: &#123;</span><br><span class="line">        &quot;types&quot;: [&quot;node&quot;, &quot;./types/vite.config.d.ts&quot;],</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;include&quot;: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>declare module ‘cnjm-postcss-px-to-viewport</strong></p><p>这行代码的意思是：</p><ul><li>声明一个名为 <code>&#39;cnjm-postcss-px-to-viewport&#39;</code> 的模块。</li><li>TypeScript 不会对该模块的导入进行类型检查。</li><li>你可以在项目中导入并使用这个模块，但它的类型是 <code>any</code>，即没有具体的类型信息。</li></ul><h4 id="vite-plugin-px2rem"><a href="#vite-plugin-px2rem" class="headerlink" title="vite-plugin-px2rem"></a><strong><font color="#10c300">vite-plugin-px2rem</font></strong></h4><p><strong><code>px转rem</code></strong></p><p>插件网站<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/vite-plugin-px2rem#vite-plugin-px2rem">https://www.npmjs.com/package/vite-plugin-px2rem#vite-plugin-px2rem</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-px2rem -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">px2rem</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">750</span>,</span><br><span class="line">            <span class="attr">rootFontSize</span>: <span class="number">16</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="29、预构建的依赖项"><a href="#29、预构建的依赖项" class="headerlink" title="29、预构建的依赖项"></a><strong><font color="red">29、预构建的依赖项</font></strong></h3><p>强制预构建的依赖项，在开发服务器启动时，Vite 会预先处理这些库，以确保它们快速加载和解析</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [],</span><br><span class="line">    <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">        <span class="attr">include</span>: [</span><br><span class="line">            <span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;vue-router&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pinia&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;axios&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;@vueuse/core&#x27;</span>,</span><br><span class="line">         ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="30、计算白屏时间"><a href="#30、计算白屏时间" class="headerlink" title="30、计算白屏时间"></a><strong><font color="red">30、计算白屏时间</font></strong></h3><p>白屏时间（First Paint Time）是一个非常重要的指标。它指的是从用户输入网址并按下回车键，到浏览器开始渲染页面内容的时间段。在这段时间内，用户看到的只是一个空白页面，因此白屏时间的长短直接影响了用户的体验。</p><h4 id="30-1、什么是白屏时间？"><a href="#30-1、什么是白屏时间？" class="headerlink" title="30.1、什么是白屏时间？"></a><strong><font color="#10c300">30.1、什么是白屏时间？</font></strong></h4><p>白屏时间是指从用户发起页面请求到浏览器首次开始渲染页面内容的时间。具体来说，白屏时间包括以下几个阶段：</p><ol><li><strong>DNS解析</strong>：浏览器将域名解析为IP地址。</li><li><strong>建立TCP连接</strong>：浏览器与服务器建立TCP连接（三次握手）。</li><li><strong>发起HTTP请求</strong>：浏览器向服务器发送HTTP请求。</li><li><strong>服务器响应</strong>：服务器处理请求并返回响应数据。</li><li><strong>浏览器解析HTML</strong>：浏览器解析HTML文档并构建DOM树。</li><li><strong>浏览器渲染页面</strong>：浏览器根据DOM树和CSSOM树生成渲染树，并开始渲染页面。</li><li><strong>页面展示第一个标签</strong>：浏览器首次将页面内容渲染到屏幕上。</li></ol><p>白屏时间的长短直接影响了用户对网站的第一印象。如果白屏时间过长，用户可能会感到不耐烦，甚至直接关闭页面。因此，优化白屏时间是前端性能优化的重要目标之一。</p><br><h4 id="30-2、白屏时间的影响因素"><a href="#30-2、白屏时间的影响因素" class="headerlink" title="30.2、白屏时间的影响因素"></a><strong><font color="#10c300">30.2、白屏时间的影响因素</font></strong></h4><p>白屏时间的长短受到多种因素的影响，主要包括以下几个方面：</p><ol><li><strong>网络性能</strong>：网络延迟、带宽、DNS解析时间等都会影响白屏时间。如果网络状况不佳，DNS解析和TCP连接建立的时间会变长，从而导致白屏时间增加。</li><li><strong>服务器性能</strong>：服务器的响应速度、处理能力等也会影响白屏时间。如果服务器响应缓慢，浏览器需要等待更长的时间才能接收到HTML文档。</li><li><strong>前端页面结构</strong>：HTML文档的大小、复杂度、外部资源的加载顺序等都会影响白屏时间。如果HTML文档过大或包含大量外部资源，浏览器需要更长的时间来解析和渲染页面。</li><li><strong>浏览器性能</strong>：浏览器的渲染引擎性能、缓存机制等也会影响白屏时间。不同浏览器的渲染性能可能存在差异，导致白屏时间不同。</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.ts&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 性能 观察器 观察者模式</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 获取所有的 性能 指标</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> entries) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// body 里的第一个 标签的渲染</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// &#x27;first-paint&#x27; 表示页面首次开始绘制的时间点，也就是白屏结束的时间点</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (entry.<span class="property">name</span> === <span class="string">&#x27;first-paint&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> whiteScreenTime = entry.<span class="property">startTime</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 1s=1000ms</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`白屏时间：<span class="subst">$&#123;whiteScreenTime&#125;</span>ms`</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 首次绘制 first-paint</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 首次内容绘制 first-contentful-paint 事件</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// observe 监听性能指标</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// buffered 属性设置为 true，表示包含性能时间线缓冲区中已经记录的相关事件</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 这样即使在创建 PerformanceObserver 之前事件已经发生，也能被捕获到</span></span></span><br><span class="line"><span class="language-javascript">            observer.<span class="title function_">observe</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;paint&#x27;</span>, <span class="attr">buffered</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="post-footer"><div>转载声明： 商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">ZHB</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/posts/e3b10f75.html" class="pre-post btn btn-default" title="element-Plus按需加载以及注意事项"><i class="fa fa-angle-left fa-fw"></i> <span class="hidden-lg">上一篇</span> <span class="hidden-xs">element-Plus按需加载以及注意事项</span></a> <a href="/posts/5f5fe4d5.html" class="next-post btn btn-default" title="TypeScrip装饰器"><span class="hidden-lg">下一篇</span> <span class="hidden-xs">TypeScrip装饰器</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div class="utteranc"><script src="https://utteranc.es/client.js" repo="shenliyang/snippet-comment" issue-term="pathname" issue-number="" theme="github-light" label="" crossorigin="anonymous" async></script></div></div></main><aside id="article-toc" role="navigation" class="col-md-3"><div class="widget"><h3 class="title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6"><span class="toc-text">1、前置条件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1%E3%80%81node%E7%89%88%E6%9C%AC"><span class="toc-text">1.1、node版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2%E3%80%81%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-text">1.2、包管理器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3%E3%80%81VsCode%E6%8F%92%E4%BB%B6"><span class="toc-text">1.3、VsCode插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">2、创建项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%BC%BA%E5%88%B6%E4%BD%BF%E7%94%A8pnpm"><span class="toc-text">3、强制使用pnpm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81-vscode-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">4、.vscode 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81styleLint-%E3%80%90%E9%87%87%E7%94%A8%E3%80%91"><span class="toc-text">5、styleLint 【采用】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81antfu-%E7%BB%84%E5%90%88prettier-eslint-%E3%80%90%E9%87%87%E7%94%A8%E3%80%91"><span class="toc-text">6、antfu 组合prettier&amp;eslint 【采用】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81-gitignore%E6%96%87%E4%BB%B6"><span class="toc-text">7、.gitignore文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E6%A3%80%E6%9F%A5"><span class="toc-text">8、代码提交检查</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1%E3%80%81husky-Git-%E9%92%A9%E5%AD%90%E5%B7%A5%E5%85%B7"><span class="toc-text">8.1、husky Git 钩子工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2%E3%80%81Lint-staged-%E6%A3%80%E6%B5%8B%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81"><span class="toc-text">8.2、Lint-staged 检测提交代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E5%AE%89%E8%A3%85"><span class="toc-text">1）安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">2）配置文件 </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3%E3%80%81Commitlint-%E6%A3%80%E6%B5%8B%E6%8F%90%E4%BA%A4%E5%91%BD%E5%90%8D"><span class="toc-text">8.3、Commitlint 检测提交命名</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E5%AE%89%E8%A3%85-1"><span class="toc-text">1）安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="toc-text">2）语法规范</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%EF%BC%89%E8%AF%AD%E6%B3%95%E6%8B%86%E8%A7%A3%E8%AF%B4%E6%98%8E"><span class="toc-text">3）语法拆解说明</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%EF%BC%89%E6%B3%A8%E6%84%8F"><span class="toc-text">4）注意</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%EF%BC%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">5）配置文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E5%85%B6%E4%BB%96"><span class="toc-text">9、其他</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1%E3%80%81prettier"><span class="toc-text">9.1、prettier</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E5%AE%89%E8%A3%85-2"><span class="toc-text">1）安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-1"><span class="toc-text">2）配置文件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2%E3%80%81eslint"><span class="toc-text">9.2、eslint</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89%E5%AE%89%E8%A3%85-3"><span class="toc-text">1）安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-2"><span class="toc-text">2）配置文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81%E7%AE%80%E5%8C%96%E7%BB%84%E4%BB%B6%E5%91%BD%E5%90%8D"><span class="toc-text">10、简化组件命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81%E6%89%93%E5%8C%85%E7%8E%AF%E5%A2%83%E5%8C%BA%E5%88%86"><span class="toc-text">11、打包环境区分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%E3%80%81%E6%B7%BB%E5%8A%A0%E5%9F%BA%E5%87%86%E8%B7%AF%E5%BE%84"><span class="toc-text">12、添加基准路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13%E3%80%81%E6%B7%BB%E5%8A%A0%E6%89%93%E5%8C%85%E7%9A%84dist%E6%96%87%E4%BB%B6%E9%A2%84%E8%A7%88%E9%85%8D%E7%BD%AE"><span class="toc-text">13、添加打包的dist文件预览配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14%E3%80%81%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE"><span class="toc-text">14、本地代理服务配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15%E3%80%81axios%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85"><span class="toc-text">15、axios二次封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16%E3%80%81%E6%89%93%E5%8C%85%E5%88%86%E6%9E%90"><span class="toc-text">16、打包分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17%E3%80%81gzip%E5%8E%8B%E7%BC%A9"><span class="toc-text">17、gzip压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18%E3%80%81%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9"><span class="toc-text">18、图片压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19%E3%80%81%E8%A7%A3%E5%86%B3ts%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%AB%E8%B7%AF%E7%94%B1%E4%B8%AD%E5%AF%BC%E5%85%A5%E7%9A%84vue%E7%BB%84%E4%BB%B6"><span class="toc-text">19、解决ts无法识别路由中导入的vue组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20%E3%80%81%E5%B0%86%E8%B7%AF%E7%94%B1%E5%92%8Cpinia%E5%88%86%E7%A6%BB%E5%88%B0%E7%8B%AC%E7%AB%8B%E6%A8%A1%E5%9D%97"><span class="toc-text">20、将路由和pinia分离到独立模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21%E3%80%81%E6%B7%BB%E5%8A%A0mock%E5%B7%A5%E5%85%B7"><span class="toc-text">21、添加mock工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22%E3%80%81%E6%B7%BB%E5%8A%A0ESLint%E9%85%8D%E7%BD%AE%E6%A3%80%E6%9F%A5%E5%99%A8-%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="toc-text">22、添加ESLint配置检查器 启动项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23%E3%80%81%E6%B7%BB%E5%8A%A0404%E9%A1%B5"><span class="toc-text">23、添加404页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24%E3%80%81%E5%BC%95%E7%94%A8scss%E6%96%87%E4%BB%B6"><span class="toc-text">24、引用scss文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25%E3%80%81%E6%89%93%E5%8C%85%E6%8B%86%E5%88%86-%E5%B0%8F%E5%9B%BE%E7%89%87%E8%BD%ACbase64"><span class="toc-text">25、打包拆分 小图片转base64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26%E3%80%81%E6%B7%BB%E5%8A%A0Vconsole%E6%89%93%E5%8D%B0"><span class="toc-text">26、添加Vconsole打印</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27%E3%80%81%E7%AE%80%E5%8C%96SVG%E4%BD%BF%E7%94%A8"><span class="toc-text">27、简化SVG使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28%E3%80%81px%E8%BD%AC%E6%8D%A2"><span class="toc-text">28、px转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cnjm-postcss-px-to-viewport"><span class="toc-text">cnjm-postcss-px-to-viewport</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vite-plugin-px2rem"><span class="toc-text">vite-plugin-px2rem</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29%E3%80%81%E9%A2%84%E6%9E%84%E5%BB%BA%E7%9A%84%E4%BE%9D%E8%B5%96%E9%A1%B9"><span class="toc-text">29、预构建的依赖项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#30%E3%80%81%E8%AE%A1%E7%AE%97%E7%99%BD%E5%B1%8F%E6%97%B6%E9%97%B4"><span class="toc-text">30、计算白屏时间</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#30-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E7%99%BD%E5%B1%8F%E6%97%B6%E9%97%B4%EF%BC%9F"><span class="toc-text">30.1、什么是白屏时间？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#30-2%E3%80%81%E7%99%BD%E5%B1%8F%E6%97%B6%E9%97%B4%E7%9A%84%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0"><span class="toc-text">30.2、白屏时间的影响因素</span></a></li></ol></li></ol></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi"></div></div><div class="col-sm-12"><span>Copyright &copy; 2017</span> | <span>Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a></span> | <span>Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a></span></div></div></div></div><script src="/js/app.js?rev=2f9097f8c1d5adfecd923b78b47be31b"></script></body></html>