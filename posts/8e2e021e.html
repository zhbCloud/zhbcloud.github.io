<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="H多看源码多读书 - 勤于思考善领悟"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><meta name="theme-version" content="1.3.0"><meta name="root" content="/"><link rel="dns-prefetch" href="http://example.com"><meta name="keywords" content="css,前端,javaScript,vue,vue3,html"><meta name="description" content="一、HTML暂无


二、CSS1、清除浮动12345678910111213// 清除浮动（双伪元素）.clearfix:before,.clearfix:after &#123;  cont..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>【置顶】超级有用的html/css/js/vue等技巧 持续更新中 | H多看源码多读书 - 勤于思考善领悟</title><link rel="alternate" href="/atom.xml" title="H多看源码多读书 - 勤于思考善领悟" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=1d1bccdabbf21f3604f985399285f5cf"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=17d35b1ddb5a58cc19379d19f22b9fdc"><link rel="stylesheet" href="/css/style.css?rev=1be479d06cbb29d0c56ae25586ad88bc"><div class="hide"><script type="text/javascript">!function(){var t="https:"===document.location.protocol?"https://":"http://",c=document.createElement("script");c.src="https://s95.cnzz.com/z_stat.php?web_id=1272564536",c.async=!0,document.body.appendChild(c);var e=document.createElement("script");e.src=t+"s19.cnzz.com/z_stat.php?id=1263868967&show=pic1",e.async=!0,document.body.appendChild(e)}()</script></div><meta name="generator" content="Hexo 7.3.0"></head><!--[if lte IE 8]><style>
    html{ font-size: 1em }
</style><![endif]--><!--[if lte IE 9]><div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div><![endif]--><body><header class="main-header" style="background-image:url(https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/banner.webp)"><div class="main-header-box"><a class="header-avatar" href="/" title="ZHB"><img src="/img/avatar.webp" alt="logo头像" class="img-responsive center-block"></a><div class="branding"><img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block"></div></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span><i class="fa fa-bars"></i></span> <a class="navbar-brand" href="http://example.com">H多看源码多读书 - 勤于思考善领悟</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa"></i> 首页</a></li><li role="presentation" class="text-center"><a href="/categories/"><i class="fa"></i> 分类</a></li><li role="presentation" class="text-center"><a href="/tags/"><i class="fa"></i> 标签</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa"></i> 时间轴</a></li><li role="presentation" class="text-center"><a href="/about/"><i class="fa"></i> 关于</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-9 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="【置顶】超级有用的html/css/js/vue等技巧 持续更新中">【置顶】超级有用的html/css/js/vue等技巧 持续更新中</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta"><a class="tag-none-link" href="/tags/css/" rel="tag">css</a> <a class="tag-none-link" href="/tags/html/" rel="tag">html</a> <a class="tag-none-link" href="/tags/javaScript/" rel="tag">javaScript</a> <a class="tag-none-link" href="/tags/vue/" rel="tag">vue</a> <a class="tag-none-link" href="/tags/vue3/" rel="tag">vue3</a></span></span><span class="fa-wrap"><i class="fa fa-clock-o"></i> <span class="date-meta">2030/08/22</span></span></div></div><div class="post-body post-content"><h2 id="一、HTML"><a href="#一、HTML" class="headerlink" title="一、HTML"></a><strong>一、HTML</strong></h2><p>暂无</p><br><h2 id="二、CSS"><a href="#二、CSS" class="headerlink" title="二、CSS"></a><strong>二、CSS</strong></h2><h3 id="1、清除浮动"><a href="#1、清除浮动" class="headerlink" title="1、清除浮动"></a><strong><font color="red">1、清除浮动</font></strong></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 清除浮动（双伪元素）</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line">// ie6 <span class="number">7</span> 专门清除浮动的样式</span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  *<span class="attribute">zoom</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>清除浮动的原理</strong></p><p><code>clear:both</code>清除浮动的关键</p><p><code>clear</code>是CSS中的定位属性，规定元素的哪一侧不允许其他浮动元素。那么<code>clear:both</code>就是规定在左右两侧均不允许浮动元素。</p><p><code>clear</code>属性只能在块级元素上其作用，这就是清除浮动样式中<code>display:table</code>的作用。</p><br><h2 id="三、JavaScript"><a href="#三、JavaScript" class="headerlink" title="三、JavaScript"></a><strong>三、JavaScript</strong></h2><h3 id="1、基于URLSearchParams或URL获取queryString的值"><a href="#1、基于URLSearchParams或URL获取queryString的值" class="headerlink" title="1、基于URLSearchParams或URL获取queryString的值"></a><strong><font color="red">1、基于URLSearchParams或URL获取queryString的值</font></strong></h3><p>测试链接：</p><p><a target="_blank" rel="noopener" href="https://cf.cmpay.com/mpl/credit_orderResult.html?orderNo=50620520605&orderDate=2052">https://cf.cmpay.com/mpl/credit_orderResult.html?orderNo=50620520605&amp;orderDate=2052</a></p><p><strong>URLSearchParams</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// location.search 取到的是&quot;?orderNo=50620520605&amp;orderDate=2052&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> urlSP = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(location.<span class="property">search</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryString</span>(<span class="params">key</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> urlSP.<span class="title function_">get</span>(key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getQueryString</span>(<span class="string">&#x27;orderNo&#x27;</span>) <span class="comment">// 50620520605</span></span><br></pre></td></tr></table></figure><p><strong>URL</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> urlObj = <span class="keyword">new</span> <span class="title function_">URL</span>(location.<span class="property">href</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryString</span>(<span class="params">key</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> urlObj.<span class="property">searchParams</span>.<span class="title function_">get</span>(key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getQueryString</span>(<span class="string">&#x27;orderNo&#x27;</span>) <span class="comment">// 50620520605</span></span><br></pre></td></tr></table></figure><br><h3 id="2、基于atob和btoa的base64编码和解码"><a href="#2、基于atob和btoa的base64编码和解码" class="headerlink" title="2、基于atob和btoa的base64编码和解码"></a><strong><font color="red">2、基于atob和btoa的base64编码和解码</font></strong></h3><p>浏览器内置了base64编码和解码的能力</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># <span class="built_in">encodeURIComponent</span>() 函数可把字符串作为 <span class="variable constant_">URI</span> 组件进行编码</span><br><span class="line"># <span class="built_in">unescape</span>() 函数可对通过 <span class="built_in">escape</span>() 编码的字符串进行解码</span><br><span class="line"># <span class="title function_">btoa</span>() 方法用于创建一个 base-<span class="number">64</span> 编码的字符串</span><br><span class="line"># <span class="title function_">atob</span>() 方法用于解码使用 base-<span class="number">64</span> 编码的字符串</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">utf8_to_b64</span>(<span class="params"> str </span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="title function_">btoa</span>(<span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>( str )));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b64_to_utf8</span>(<span class="params"> str </span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(<span class="built_in">escape</span>(<span class="variable language_">window</span>.<span class="title function_">atob</span>( str )));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">utf8_to_b64</span>(<span class="string">&#x27;✓ à la mode&#x27;</span>); <span class="comment">// &quot;4pyTIMOgIGxhIG1vZGU=&quot;</span></span><br><span class="line"><span class="title function_">b64_to_utf8</span>(<span class="string">&#x27;4pyTIMOgIGxhIG1vZGU=&#x27;</span>); <span class="comment">// &quot;✓ à la mode&quot;</span></span><br></pre></td></tr></table></figure><br><h3 id="3、相对地址转换为绝对地址"><a href="#3、相对地址转换为绝对地址" class="headerlink" title="3、相对地址转换为绝对地址"></a><strong><font color="red">3、相对地址转换为绝对地址</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">realativeToAbs</span>(<span class="params">href</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> aEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    aEl.<span class="property">href</span> = href;</span><br><span class="line">    <span class="keyword">const</span> result = aEl.<span class="property">href</span>;</span><br><span class="line">    aEl = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">realativeToAbs</span>(<span class="string">&quot;../a/b/b/index.html&quot;</span>) <span class="comment">// http://127.0.0.1:5500/a/b/b/index.html</span></span><br></pre></td></tr></table></figure><br><h3 id="4-、禁止图片拖拽、禁止右键、禁止选择、禁止复制"><a href="#4-、禁止图片拖拽、禁止右键、禁止选择、禁止复制" class="headerlink" title="4 、禁止图片拖拽、禁止右键、禁止选择、禁止复制"></a><strong><font color="red">4 、禁止图片拖拽、禁止右键、禁止选择、禁止复制</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;dragstart&#x27;</span>,<span class="string">&#x27;contextmenu&#x27;</span>, <span class="string">&#x27;selectstart&#x27;</span>, <span class="string">&#x27;copy&#x27;</span>].<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(ev, <span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span><br><span class="line">        ev.<span class="title function_">preventDefault</span>();</span><br><span class="line">        ev.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br><h3 id="5、es6的解构赋值"><a href="#5、es6的解构赋值" class="headerlink" title="5、es6的解构赋值"></a><strong><font color="red">5、es6的解构赋值</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">c</span>:<span class="number">3</span>,</span><br><span class="line">    <span class="attr">d</span>:<span class="number">4</span>,</span><br><span class="line">    <span class="attr">e</span>:<span class="number">5</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> a = obj.<span class="property">a</span>;</span><br><span class="line"><span class="keyword">const</span> b = obj.<span class="property">b</span>;</span><br><span class="line"><span class="keyword">const</span> c = obj.<span class="property">c</span>;</span><br><span class="line"><span class="keyword">const</span> d = obj.<span class="property">d</span>;</span><br><span class="line"><span class="keyword">const</span> e = obj.<span class="property">e</span>;</span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> &#123;a,b,c,d,e&#125; = obj;</span><br><span class="line"></span><br><span class="line">#其他：</span><br><span class="line"><span class="comment">// 属性名和变量名不一样时</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">a</span>: f, <span class="attr">b</span>: l &#125; = obj;</span><br><span class="line">f <span class="comment">// 1</span></span><br><span class="line">l <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定默认值</span></span><br><span class="line"><span class="keyword">let</span> &#123; x = <span class="number">11</span> &#125; = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">66</span>] = [];</span><br><span class="line">x <span class="comment">// 11</span></span><br><span class="line">a <span class="comment">// 66</span></span><br></pre></td></tr></table></figure><p>注意解构的对象不能为<code>undefined</code>、<code>null</code>。否则会报错，故要给被解构的对象一个默认值。</p><p><strong>const {a,b,c,d,e} &#x3D; obj || {};</strong></p><br><h3 id="6、合并数据"><a href="#6、合并数据" class="headerlink" title="6、合并数据"></a><strong><font color="red">6、合并数据</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> c = a.<span class="title function_">concat</span>(b);<span class="comment">//[1,2,3,1,5,6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">33</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">66</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj1, obj2) <span class="comment">//&#123;a: 1, b: 2, c: 66&#125; 属性名相同最后对象覆盖前面对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> c = [...a, ...b] <span class="comment">//[1,2,3,1,5,6] 不去重</span></span><br><span class="line"><span class="keyword">const</span> c = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...a, ...b])] <span class="comment">//[1,2,3,5,6] 去重</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">33</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">66</span> &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;...obj1, ...obj2&#125;); <span class="comment">//&#123;a: 1, b: 2, c: 66&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="7、关于拼接字符串"><a href="#7、关于拼接字符串" class="headerlink" title="7、关于拼接字符串"></a><strong><font color="red">7、关于拼接字符串</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;小明&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> score = <span class="number">59</span>;</span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(score &gt; <span class="number">60</span>)&#123;</span><br><span class="line">  result = <span class="string">`<span class="subst">$&#123;name&#125;</span>的考试成绩及格`</span>; </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  result = <span class="string">`<span class="subst">$&#123;name&#125;</span>的考试成绩不及格`</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> result = <span class="string">`<span class="subst">$&#123;name&#125;</span><span class="subst">$&#123;score &gt; <span class="number">60</span>?<span class="string">&#x27;的考试成绩及格&#x27;</span>:<span class="string">&#x27;的考试成绩不及格&#x27;</span>&#125;</span>`</span>; <span class="comment">// 小明的考试成绩不及格</span></span><br></pre></td></tr></table></figure><br><h3 id="8、扁平化数组"><a href="#8、扁平化数组" class="headerlink" title="8、扁平化数组"></a><strong><font color="red">8、扁平化数组</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deps = &#123;</span><br><span class="line">    <span class="string">&#x27;采购部&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">    <span class="string">&#x27;人事部&#x27;</span>:[<span class="number">5</span>,<span class="number">8</span>,<span class="number">12</span>],</span><br><span class="line">    <span class="string">&#x27;行政部&#x27;</span>:[<span class="number">5</span>,<span class="number">14</span>,<span class="number">79</span>],</span><br><span class="line">    <span class="string">&#x27;运输部&#x27;</span>:[<span class="number">3</span>,<span class="number">64</span>,<span class="number">105</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> member = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> deps)&#123;</span><br><span class="line">    <span class="keyword">const</span> value = deps[item];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value))&#123;</span><br><span class="line">        member = [...member,...value]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">member = [...<span class="keyword">new</span> <span class="title class_">Set</span>(member)]  <span class="comment">// [1, 2, 3, 5, 8, 12, 14, 79, 64, 105]</span></span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">let</span> member = <span class="title class_">Object</span>.<span class="title function_">values</span>(deps).<span class="title function_">flat</span>(<span class="title class_">Infinity</span>); <span class="comment">// [1, 2, 3, 5, 8, 12, 14, 79, 64, 105]</span></span><br></pre></td></tr></table></figure><br><h3 id="9、添加对象属性"><a href="#9、添加对象属性" class="headerlink" title="9、添加对象属性"></a><strong><font color="red">9、添加对象属性</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> key = <span class="string">`topic<span class="subst">$&#123;index&#125;</span>`</span>;</span><br><span class="line">obj[key] = <span class="string">&#x27;话题内容&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#改进：es6</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line">obj[<span class="string">`topic<span class="subst">$&#123;index&#125;</span>`</span>] = <span class="string">&#x27;话题内容&#x27;</span>;</span><br></pre></td></tr></table></figure><br><h3 id="10、非空的判断"><a href="#10、非空的判断" class="headerlink" title="10、非空的判断"></a><strong><font color="red">10、非空的判断</font></strong></h3><p><strong>空值合并操作符</strong>（<strong><code>??</code></strong>）</p><p>只有当左侧为null和undefined时，才会返回右侧的值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a === <span class="literal">null</span> || a === <span class="literal">undefined</span>) &#123;    </span><br><span class="line">	<span class="title function_">doSomething</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也就是如果需要验证一个值是否等于null或者undefined，可以使用null合并操作符来简化上面的代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a ?? <span class="title function_">doSomething</span>()</span><br></pre></td></tr></table></figure><p>这样，仅当 a 未定义或为空时，才会执行控制合并运算符之后的代码。空合并运算符 ??是一个逻辑运算符，当左侧操作数为 null 或未定义时返回其右侧操作数，否则返回左侧操作数。</p><p>例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nullValue = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> emptyText = <span class="string">&quot;&quot;</span>; <span class="comment">// 空字符串，是一个假值，Boolean(&quot;&quot;) === false</span></span><br><span class="line"><span class="keyword">const</span> someNumber = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> valA = nullValue ?? <span class="string">&quot;valA 的默认值&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> valB = emptyText ?? <span class="string">&quot;valB 的默认值&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> valC = someNumber ?? <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valA); <span class="comment">// &quot;valA 的默认值&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valB); <span class="comment">// &quot;&quot;（空字符串虽然是假值，但不是 null 或者 undefined）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valC); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure><br><h3 id="11、获取对象属性值"><a href="#11、获取对象属性值" class="headerlink" title="11、获取对象属性值"></a><strong><font color="red">11、获取对象属性值</font></strong></h3><p>可选链操作符 （?.）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> name = obj &amp;&amp; obj.<span class="property">name</span>;</span><br><span class="line"></span><br><span class="line">#改进：es6</span><br><span class="line"><span class="keyword">const</span> name = obj?.<span class="property">name</span>;</span><br></pre></td></tr></table></figure><br><h3 id="12、html编码和解码"><a href="#12、html编码和解码" class="headerlink" title="12、html编码和解码"></a><strong><font color="red">12、html编码和解码</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1.</span>用浏览器内部转换器实现html编码（转义）</span><br><span class="line"><span class="attr">htmlEncode</span>: <span class="keyword">function</span> (<span class="params">html</span>) &#123;</span><br><span class="line">    <span class="comment">//1.首先动态创建一个容器标签元素，如DIV</span></span><br><span class="line">    <span class="keyword">var</span> temp = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="comment">//2.然后将要转换的字符串设置为这个元素的innerText或者textContent</span></span><br><span class="line">    (temp.<span class="property">textContent</span> != <span class="literal">undefined</span>) ? (temp.<span class="property">textContent</span> = html) : (temp.<span class="property">innerText</span> = html);</span><br><span class="line">    <span class="comment">//3.最后返回这个元素的innerHTML，即得到经过HTML编码转换的字符串了</span></span><br><span class="line">    <span class="keyword">var</span> output = temp.<span class="property">innerHTML</span>;</span><br><span class="line">    temp = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">htmlEncode</span>(<span class="string">&quot;&lt;div class=&#x27;demo&#x27;&gt;测试&lt;/div&gt;&quot;</span>));</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>用浏览器内部转换器实现html解码（反转义）</span><br><span class="line"><span class="attr">htmlDecode</span>: <span class="keyword">function</span> (<span class="params">text</span>) &#123;</span><br><span class="line">    <span class="comment">//1.首先动态创建一个容器标签元素，如DIV</span></span><br><span class="line">    <span class="keyword">var</span> temp = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="comment">//2.然后将要转换的字符串设置为这个元素的innerHTML(ie，火狐，google都支持)</span></span><br><span class="line">    temp.<span class="property">innerHTML</span> = text;</span><br><span class="line">    <span class="comment">//3.最后返回这个元素的innerText或者textContent，即得到经过HTML解码的字符串了。</span></span><br><span class="line">    <span class="keyword">var</span> output = temp.<span class="property">innerText</span> || temp.<span class="property">textContent</span>;</span><br><span class="line">    temp = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">htmlDecode</span>(<span class="string">&quot;&amp;lt;div class=&#x27;demo&#x27;&amp;gt;测试&amp;lt;/div&amp;gt;&quot;</span>));</span><br></pre></td></tr></table></figure><br><h3 id="13、箭头函数"><a href="#13、箭头函数" class="headerlink" title="13、箭头函数"></a><strong><font color="red">13、箭头函数</font></strong></h3><p>var func &#x3D; () &#x3D;&gt; ({ foo: 1 }); 返回的是括号里面的对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="title function_">prompt</span>(<span class="string">&quot;What is your age?&quot;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> welcome = (age &lt; <span class="number">18</span>) ? <span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&#x27;Hello&#x27;</span>) : <span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&quot;Greetings!&quot;</span>);</span><br><span class="line"><span class="title function_">welcome</span>();</span><br></pre></td></tr></table></figure><p><strong><font color="red" size="3">重要特性</font></strong></p><p><strong><font color="cornflowerblue" size="3">1）没有arguments</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1</span>、普通函数中的<span class="variable language_">arguments</span>正确使用：</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">n</span>) &#123;   </span><br><span class="line">	 <span class="comment">// arguments[0] 表示传给foo函数的第一个参数，也就是n    </span></span><br><span class="line">    <span class="keyword">var</span> <span class="title function_">f</span> = (<span class="params"></span>) =&gt; <span class="variable language_">arguments</span>[<span class="number">0</span>] + n;    </span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">f</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(<span class="number">1</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="number">3</span>); <span class="comment">// 6</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="number">3</span>, <span class="number">2</span>);<span class="comment">//6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、箭头函数中无法使用<span class="variable language_">arguments</span></span><br><span class="line"><span class="comment">// ReferenceError: arguments is not defined</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">func</span> = (<span class="params">a, b</span>) =&gt; &#123;<span class="keyword">return</span> <span class="variable language_">arguments</span>[<span class="number">0</span>];&#125;</span><br></pre></td></tr></table></figure><p><strong><font color="cornflowerblue" size="3">2）没有prototype属性</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p><strong><font color="cornflowerblue" size="3">3）不能使用new</font></strong></p><p>箭头函数没有this，不能用作构造函数，也就无法使用 new</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> <span class="title class_">Foo</span>(); <span class="comment">// TypeError: Foo is not a constructor</span></span><br></pre></td></tr></table></figure><br><h3 id="14、初始化一个数组"><a href="#14、初始化一个数组" class="headerlink" title="14、初始化一个数组"></a><strong><font color="red">14、初始化一个数组</font></strong></h3><p>如果你想初始化一个指定长度的一维数组并指定默认值，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = <span class="title class_">Array</span>(<span class="number">6</span>).<span class="title function_">fill</span>(<span class="string">&#x27;&#x27;</span>); </span><br><span class="line"><span class="comment">// [&#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;]</span></span><br></pre></td></tr></table></figure><p>如果你想初始化一个指定长度的二维数组并指定默认值，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> matrix = <span class="title class_">Array</span>(<span class="number">6</span>).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="title class_">Array</span>(<span class="number">5</span>).<span class="title function_">fill</span>(<span class="number">0</span>)); </span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">// 	[0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// 	[0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// 	[0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// 	[0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// 	[0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// 	[0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><br><h3 id="15、数组求和-最大值-最小值"><a href="#15、数组求和-最大值-最小值" class="headerlink" title="15、数组求和&#x2F;最大值&#x2F;最小值"></a><strong><font color="red">15、数组求和&#x2F;最大值&#x2F;最小值</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array  = [<span class="number">5</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">2</span>];</span><br></pre></td></tr></table></figure><p><font color="orange">1）求和 </font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a+b);</span><br></pre></td></tr></table></figure><p><font color="orange">2）寻找最大值</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a &gt; b ? a : b);  <span class="title class_">Math</span>.<span class="title function_">max</span>(...array)</span><br></pre></td></tr></table></figure><p><font color="orange">2）寻找最小值</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a &lt; b ? a : b);  <span class="title class_">Math</span>.<span class="title function_">min</span>(...array)</span><br></pre></td></tr></table></figure><p>请记住：数组的reduce方法可以用来解决很多数组求值问题。</p><br><h3 id="16、滤错误值"><a href="#16、滤错误值" class="headerlink" title="16、滤错误值"></a><strong><font color="red">16、滤错误值</font></strong></h3><p>如果要过滤数组中的值，例如 false、0、null、undefined 等，可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="number">0</span>, <span class="literal">undefined</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="string">&#x27;&#x27;</span>, <span class="literal">false</span>];</span><br><span class="line">array.<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line"><span class="comment">// [1, 6, 7]</span></span><br></pre></td></tr></table></figure><br><h3 id="17、空数组"><a href="#17、空数组" class="headerlink" title="17、空数组"></a><strong><font color="red">17、空数组</font></strong></h3><p>如果要清空数组，可以将数组的长度设置为 0。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;E&quot;</span>, <span class="string">&quot;F&quot;</span>]</span><br><span class="line">array.<span class="property">length</span> = <span class="number">0</span> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array)  <span class="comment">// []</span></span><br></pre></td></tr></table></figure><br><h3 id="18、计算性能"><a href="#18、计算性能" class="headerlink" title="18、计算性能"></a><strong><font color="red">18、计算性能</font></strong></h3><p>以下操作可用于计算代码的性能。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>(); </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;    </span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> endTime = performance.<span class="title function_">now</span>();</span><br><span class="line"><span class="keyword">const</span> totaltime = endTime - startTime;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(totaltime); <span class="comment">// 10.3333333</span></span><br></pre></td></tr></table></figure><br><h3 id="19、将数组元素转换为数字"><a href="#19、将数组元素转换为数字" class="headerlink" title="19、将数组元素转换为数字"></a><strong><font color="red">19、将数组元素转换为数字</font></strong></h3><p>如果有一个数组，并且你想将数组的元素转换为数字，你可以使用 map 方法来完成。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3.1415&#x27;</span>, <span class="string">&#x27;-10.01&#x27;</span>];</span><br><span class="line">array.<span class="title function_">map</span>(<span class="title class_">Number</span>);  <span class="comment">// [12, 1, 3.1415, -10.01]</span></span><br></pre></td></tr></table></figure><p>这样，map 对数组的每个元素执行 Number 构造函数，并在遍历数组时返回结果。</p><br><h3 id="20、将类数组转换为数组"><a href="#20、将类数组转换为数组" class="headerlink" title="20、将类数组转换为数组"></a><strong><font color="red">20、将类数组转换为数组</font></strong></h3><p>可以使用以下方法将类数组转换为数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>);</span><br></pre></td></tr></table></figure><p>此外，还可以使用扩展运算符来实现。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="variable language_">arguments</span>]</span><br></pre></td></tr></table></figure><br><h3 id="21、对象属性的动态声明"><a href="#21、对象属性的动态声明" class="headerlink" title="21、对象属性的动态声明"></a><strong><font color="red">21、对象属性的动态声明</font></strong></h3><p>如果你想动态地为一个对象声明属性，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dynamic = <span class="string">&#x27;color&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> item = &#123;    </span><br><span class="line">	<span class="attr">brand</span>: <span class="string">&#x27;Ford&#x27;</span>,</span><br><span class="line">    [dynamic]: <span class="string">&#x27;Blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// &#123; brand: &quot;Ford&quot;, color: &quot;Blue&quot; &#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="22、缩短console-log"><a href="#22、缩短console-log" class="headerlink" title="22、缩短console.log()"></a><strong><font color="red">22、缩短console.log()</font></strong></h3><p>每次debug都要写很多console.log()会比较麻烦，可以用下面的形式来简化这段代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> c = <span class="variable language_">console</span>.<span class="property">log</span>.<span class="title function_">bind</span>(<span class="variable language_">document</span>) </span><br><span class="line"><span class="title function_">c</span>(<span class="number">222</span>) </span><br><span class="line"><span class="title function_">c</span>(<span class="string">&quot;hello world&quot;</span>)</span><br></pre></td></tr></table></figure><p>这将每次只执行 c 方法。</p><br><h3 id="23、删除数组元素"><a href="#23、删除数组元素" class="headerlink" title="23、删除数组元素"></a><strong><font color="red">23、删除数组元素</font></strong></h3><p>如果我们想删除一个数组的元素，可以使用delete来完成，但是删除后元素会变成undefined，不会消失，而且执行会消耗很多时间，所以大部分情况下不会满足我们的需求。所以我们可以使用数组的 slice() 方法来删除数组的元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line"><span class="keyword">const</span> arrayRemoveed = array.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array)  <span class="comment">// [&quot;c&quot;, &quot;d&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayRemoveed)  <span class="comment">// [&quot;a&quot;, &quot;b&quot;]</span></span><br></pre></td></tr></table></figure><br><h3 id="24、检查对象是否为空"><a href="#24、检查对象是否为空" class="headerlink" title="24、检查对象是否为空"></a><strong><font color="red">24、检查对象是否为空</font></strong></h3><p>如果我们想检查对象是否为空，我们可以使用以下内容。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(&#123;&#125;).<span class="property">length</span>  <span class="comment">// 0</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(&#123;<span class="attr">key</span>: <span class="number">1</span>&#125;).<span class="property">length</span>  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>Object.keys() 方法用于获取对象的键，它将返回一个包含这些键值的数组。如果返回数组的长度为 0，则该对象必须为空。</p><br><h3 id="25、获取数组中的最后一项"><a href="#25、获取数组中的最后一项" class="headerlink" title="25、获取数组中的最后一项"></a><strong><font color="red">25、获取数组中的最后一项</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br></pre></td></tr></table></figure><p>1、如果要获取数组中的最后一项，通常会这样编写代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr[arr.<span class="property">length</span> - <span class="number">1</span>]  <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>2、我们也可以使用数组的 slice 方法来获取最后一个元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">slice</span>(-<span class="number">1</span>) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>当我们将 slice 方法的参数设置为负值时，它会从数组后面开始截取数组值，如果要截取最后两个值，则传入参数-2。</p><p>3、使用“at方法”读取</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">at</span>(-<span class="number">1</span>) <span class="comment">// 5</span></span><br><span class="line">array.<span class="title function_">at</span>(<span class="number">0</span>) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><br><h3 id="26、数组元素的随机排序"><a href="#26、数组元素的随机排序" class="headerlink" title="26、数组元素的随机排序"></a><strong><font color="red">26、数组元素的随机排序</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">99</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="keyword">const</span> newArr = arr.<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> (&#123; <span class="attr">v</span>: val, <span class="attr">r</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() &#125;));</span><br><span class="line">newArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">r</span> - b.<span class="property">r</span>);</span><br><span class="line"><span class="keyword">const</span> showList = newArr.<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> val.<span class="property">v</span>).<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">6</span>); <span class="comment">// 截取长度未6的随机数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(showList)</span><br></pre></td></tr></table></figure><br><h2 id="四、Vue"><a href="#四、Vue" class="headerlink" title="四、Vue"></a><strong>四、Vue</strong></h2><h3 id="1、computed中使用this？"><a href="#1、computed中使用this？" class="headerlink" title="1、computed中使用this？"></a><strong><font color="red">1、computed中使用this？</font></strong></h3><p>我们通过this能访问到的数据，在computed的第一个参数上都能结构出来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;黄山&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">haha</span>(<span class="params">&#123; address, $attrs, $route, $store, $listeners, $ref &#125;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(address) <span class="comment">// 黄山</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">111</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="2、避免v-if和v-for一起使用"><a href="#2、避免v-if和v-for一起使用" class="headerlink" title="2、避免v-if和v-for一起使用"></a><strong><font color="red">2、避免v-if和v-for一起使用</font></strong></h3><p>在vue的源码中有一段代码是对指令的优先级的处理</p><p><strong>不好的</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"># 这段代码是先处理v-<span class="keyword">for</span>再处理v-<span class="keyword">if</span>的</span><br><span class="line"><span class="comment">// 比如这个列表有一百条数据，再某种情况下，它们都不需要显示，当vue还是会循环这个100条数据显示，再去判断v-if，因此，我们应该避免这种情况的出现。</span></span><br><span class="line"></span><br><span class="line">&lt;h3 v-<span class="keyword">if</span>=<span class="string">&quot;status&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;item in 100&quot;</span> :key=<span class="string">&quot;item&quot;</span>&gt;&#123;&#123;item&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">#优化</span><br><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;status&quot;</span> &gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-for</span>=<span class="string">&quot;item in 100&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><br><h3 id="3、修饰符sync"><a href="#3、修饰符sync" class="headerlink" title="3、修饰符sync"></a><strong><font color="red">3、修饰符sync</font></strong></h3><p>vue 修饰符sync的功能是：当一个子组件改变了一个 prop 的值时，这个变化也会同步到父组件中所绑定</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">:show.sync</span> = <span class="string">&#x27;isShow&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">		<span class="title function_">data</span> () &#123;</span><br><span class="line">    		<span class="keyword">return</span> &#123;</span><br><span class="line">        		<span class="attr">isShow</span>: <span class="literal">true</span></span><br><span class="line">    		&#125;</span><br><span class="line">  		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;script&gt;  </span><br><span class="line"> </span><br><span class="line"># 等同于上面的写法</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">:show</span> = <span class="string">&#x27;isShow&#x27;</span> @<span class="attr">update:show</span>=<span class="string">&quot;change&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">		<span class="attr">props</span>:&#123;</span><br><span class="line">            <span class="attr">isShow</span>: &#123;</span><br><span class="line">            	<span class="attr">type</span>: <span class="title class_">Boolean</span></span><br><span class="line">        	&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">		<span class="title function_">data</span> () &#123;</span><br><span class="line">    		<span class="keyword">return</span> &#123;</span><br><span class="line">        		<span class="attr">isShow</span>: <span class="literal">true</span></span><br><span class="line">    		&#125;</span><br><span class="line">  		&#125;,</span><br><span class="line">        <span class="attr">method</span>: &#123;</span><br><span class="line">            <span class="title function_">change</span>(<span class="params">val</span>) &#123; <span class="comment">// 子组件传来的false</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">isShow</span> = val</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;show&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    展示和隐藏组件</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>隐藏组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>:[<span class="string">&#x27;show&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:show&#x27;</span>,<span class="literal">false</span>) <span class="comment">//触发 input 事件，并传入新值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br><h2 id="五、IOS和安卓踩坑"><a href="#五、IOS和安卓踩坑" class="headerlink" title="五、IOS和安卓踩坑"></a><strong>五、IOS和安卓踩坑</strong></h2><h3 id="1、IOS滑动不流畅"><a href="#1、IOS滑动不流畅" class="headerlink" title="1、IOS滑动不流畅"></a><strong><font color="red">1、IOS滑动不流畅</font></strong></h3><p><strong><font color="#10c300">表现</font></strong></p><p>上下滑动页面会产生卡顿，手指离开页面，页面立即停止运动。整体表现就是滑动不流畅，没有滑动惯性。</p><br><p><strong><font color="#10c300">为什么 iOS 的 webview 中 滑动不流畅，它是如何定义的？</font></strong></p><p>原来在 iOS 5.0 以及之后的版本，滑动 -webkit-overflow-scrolling 有定义有两个值 <code>auto</code> 和 <code>touch</code>，默认值为 <code>auto</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-webkit-<span class="attribute">overflow</span>-scrolling: touch; <span class="comment">/* 当手指从触摸屏上移开，会保持一段时间的滚动 */</span></span><br><span class="line"></span><br><span class="line">-webkit-<span class="attribute">overflow</span>-scrolling: auto; <span class="comment">/* 当手指从触摸屏上移开，滚动会立即停止 */</span></span><br></pre></td></tr></table></figure><br><p><strong><font color="#10c300">解决方案</font></strong></p><p><strong><font color="cornflowerblue" size="3">1）在 滚动容器上 增加滚动 touch 方法 </font></strong></p><p>将<code>-webkit-overflow-scrolling</code> 值设置为 <code>touch</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">overflow</span>-scrolling: touch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>设置滚动条隐藏： <code>.container ::-webkit-scrollbar &#123;display: none;&#125;</code></p></blockquote><p>可能会导致使用<code>position:fixed;</code> 固定定位的元素，随着页面一起滚动</p><p><strong><font color="cornflowerblue" size="3">2）设置 overflow</font></strong></p><p>设置外部 <code>overflow</code> 为 <code>hidden</code>,设置内容元素 <code>overflow</code> 为 <code>auto</code>。内部元素超出 body 即产生滚动，超出的部分 body 隐藏。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>两者结合使用更佳！</p><br><h3 id="2、click-点击事件延时与穿透"><a href="#2、click-点击事件延时与穿透" class="headerlink" title="2、click 点击事件延时与穿透"></a><strong><font color="red">2、click 点击事件延时与穿透</font></strong></h3><p><strong><font color="#10c300">表现</font></strong></p><p>监听元素 <code>click</code> 事件，点击元素触发时间延迟约 <code>300ms</code>。点击蒙层，蒙层消失后，下层元素点击触发。</p><br><p><strong><font color="#10c300">为什么会产生 click 延时？</font></strong></p><p>iOS 中的 safari，为了实现双击缩放操作，在单击 300ms 之后，如果未进行第二次点击，则执行 <code>click</code> 单击操作。也就是说来判断用户行为是否为双击产生的。但是，在 App 中，无论是否需要双击缩放这种行为，<code>click</code> 单击都会产生 300ms 延迟。</p><br><p><strong><font color="#10c300">为什么会产生 click 点击穿透？</font></strong></p><p>双层元素叠加时，在上层元素上绑定 <code>touch</code> 事件，下层元素绑定 <code>click</code> 事件。由于 <code>click</code> 发生在 <code>touch</code> 之后，点击上层元素，元素消失，下层元素会触发 <code>click</code> 事件，由此产生了点击穿透的效果</p><br><p><strong><font color="#10c300">原理与解决方案</font></strong></p><p><strong><font color="cornflowerblue" size="3">1）使用 touchstart 替换 click</font></strong></p><p>移动设备不仅支持点击还支持触摸事件。那么我们现在基本思路就是用 <code>touch</code> 事件代替<code>click</code> 事件。</p><p>将 <code>click</code> 替换成 <code>touchstart</code> 不仅解决了 <code>click</code> 事件延时问题，还解决了穿透问题。因为穿透问题是在 <code>touch</code> 和 <code>click</code> 混用时产生。</p><p>在原生中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.addEventListener(&quot;touchstart&quot;, () =&gt; &#123; console.log(&quot;ok&quot;); &#125;, false);</span><br></pre></td></tr></table></figure><p>在 vue 中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @touchstart=&quot;handleTouchstart()&quot;&gt;点击&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>开源解决方案中，也是既提供了 <code>click</code> 事件，又提供了<code>touchstart</code> 事件。如 vant 中的 <code>button</code> 组件</p><p><strong><font color="cornflowerblue" size="3">2）使用 fastclick 库</font></strong></p><p>使用 <code>npm/yarn</code> 安装后使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import FastClick from &#x27;fastclick&#x27;;</span><br><span class="line"></span><br><span class="line">FastClick.attach(document.body, options);</span><br></pre></td></tr></table></figure><p>同样，使用<code>fastclick</code>库后，<code>click</code> 延时和穿透问题都没了</p><br><h3 id="3、软键盘将页面顶起来、收起未回落问题"><a href="#3、软键盘将页面顶起来、收起未回落问题" class="headerlink" title="3、软键盘将页面顶起来、收起未回落问题"></a><strong><font color="red">3、软键盘将页面顶起来、收起未回落问题</font></strong></h3><p><strong><font color="#10c300">表现</font></strong></p><p>Android 手机中，点击 <code>input</code> 框时，键盘弹出，将页面顶起来，导致页面样式错乱。</p><p>移开焦点时，键盘收起，键盘区域空白，未回落。</p><br><p><strong><font color="#10c300">产生原因</font></strong></p><p>我们在app 布局中会有个固定的底部。安卓一些版本中，输入弹窗出来，会将解压 <code>absolute</code> 和 <code>fixed</code> 定位的元素。导致可视区域变小，布局错乱。</p><br><p><strong><font color="#10c300">原理与解决方案</font></strong></p><p>软键盘将页面顶起来的解决方案，主要是通过监听页面高度变化，强制恢复成弹出前的高度。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 记录原有的视口高度</span></span><br><span class="line"><span class="keyword">const</span> originalHeight = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> resizeHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>;</span><br><span class="line">  <span class="keyword">if</span>(resizeHeight &lt; originalHeight )&#123;</span><br><span class="line">    <span class="comment">// 恢复内容区域高度</span></span><br><span class="line">    <span class="comment">// const container = document.getElementById(&quot;container&quot;)</span></span><br><span class="line">    <span class="comment">// 例如 container.style.height = originalHeight;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>键盘不能回落问题出现在 iOS 12+ 和 wechat 6.7.4+ 中，而在微信 H5 开发中是比较常见的 Bug。</p><p>兼容原理，1.判断版本类型 2.更改滚动的可视区域</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isWechat = <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/MicroMessenger\/([\d\.]+)/i</span>);</span><br><span class="line"><span class="keyword">if</span> (!isWechat) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">const</span> wechatVersion = wechatInfo[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> version = (navigator.<span class="property">appVersion</span>).<span class="title function_">match</span>(<span class="regexp">/OS (\d+)_(\d+)_?(\d+)?/</span>);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 如果设备类型为iOS 12+ 和wechat 6.7.4+，恢复成原来的视口</span></span><br><span class="line"><span class="keyword">if</span> (+wechatVersion.<span class="title function_">replace</span>(<span class="regexp">/\./g</span>, <span class="string">&#x27;&#x27;</span>) &gt;= <span class="number">674</span> &amp;&amp; +version[<span class="number">1</span>] &gt;= <span class="number">12</span>) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>window.scrollTo(x-coord, y-coord)</code>，其中<code>window.scrollTo(0, clientHeight)</code>恢复成原来的视口</p></blockquote></div><div class="post-footer"><div>转载声明： 商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">ZHB</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/posts/f8a2c3d9xr.html" class="next-post btn btn-default" title="Sentry集成与hidden-source-map源码溯源指南"><span class="hidden-lg">下一篇</span> <span class="hidden-xs">Sentry集成与hidden-source-map源码溯源指南</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div class="utteranc"><script src="https://utteranc.es/client.js" repo="shenliyang/snippet-comment" issue-term="pathname" issue-number="" theme="github-light" label="" crossorigin="anonymous" async></script></div></div></main><aside id="article-toc" role="navigation" class="col-md-3"><div class="widget"><h3 class="title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81HTML"><span class="toc-text">一、HTML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81CSS"><span class="toc-text">二、CSS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8"><span class="toc-text">1、清除浮动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81JavaScript"><span class="toc-text">三、JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%9F%BA%E4%BA%8EURLSearchParams%E6%88%96URL%E8%8E%B7%E5%8F%96queryString%E7%9A%84%E5%80%BC"><span class="toc-text">1、基于URLSearchParams或URL获取queryString的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%9F%BA%E4%BA%8Eatob%E5%92%8Cbtoa%E7%9A%84base64%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81"><span class="toc-text">2、基于atob和btoa的base64编码和解码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%9B%B8%E5%AF%B9%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E4%B8%BA%E7%BB%9D%E5%AF%B9%E5%9C%B0%E5%9D%80"><span class="toc-text">3、相对地址转换为绝对地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E3%80%81%E7%A6%81%E6%AD%A2%E5%9B%BE%E7%89%87%E6%8B%96%E6%8B%BD%E3%80%81%E7%A6%81%E6%AD%A2%E5%8F%B3%E9%94%AE%E3%80%81%E7%A6%81%E6%AD%A2%E9%80%89%E6%8B%A9%E3%80%81%E7%A6%81%E6%AD%A2%E5%A4%8D%E5%88%B6"><span class="toc-text">4 、禁止图片拖拽、禁止右键、禁止选择、禁止复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81es6%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="toc-text">5、es6的解构赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE"><span class="toc-text">6、合并数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E5%85%B3%E4%BA%8E%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">7、关于拼接字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E6%89%81%E5%B9%B3%E5%8C%96%E6%95%B0%E7%BB%84"><span class="toc-text">8、扁平化数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E6%B7%BB%E5%8A%A0%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-text">9、添加对象属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81%E9%9D%9E%E7%A9%BA%E7%9A%84%E5%88%A4%E6%96%AD"><span class="toc-text">10、非空的判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-text">11、获取对象属性值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%E3%80%81html%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81"><span class="toc-text">12、html编码和解码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13%E3%80%81%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-text">13、箭头函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84"><span class="toc-text">14、初始化一个数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15%E3%80%81%E6%95%B0%E7%BB%84%E6%B1%82%E5%92%8C-%E6%9C%80%E5%A4%A7%E5%80%BC-%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-text">15、数组求和&#x2F;最大值&#x2F;最小值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16%E3%80%81%E6%BB%A4%E9%94%99%E8%AF%AF%E5%80%BC"><span class="toc-text">16、滤错误值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17%E3%80%81%E7%A9%BA%E6%95%B0%E7%BB%84"><span class="toc-text">17、空数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18%E3%80%81%E8%AE%A1%E7%AE%97%E6%80%A7%E8%83%BD"><span class="toc-text">18、计算性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19%E3%80%81%E5%B0%86%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%95%B0%E5%AD%97"><span class="toc-text">19、将数组元素转换为数字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20%E3%80%81%E5%B0%86%E7%B1%BB%E6%95%B0%E7%BB%84%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%95%B0%E7%BB%84"><span class="toc-text">20、将类数组转换为数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21%E3%80%81%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8A%A8%E6%80%81%E5%A3%B0%E6%98%8E"><span class="toc-text">21、对象属性的动态声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22%E3%80%81%E7%BC%A9%E7%9F%ADconsole-log"><span class="toc-text">22、缩短console.log()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0"><span class="toc-text">23、删除数组元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24%E3%80%81%E6%A3%80%E6%9F%A5%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA"><span class="toc-text">24、检查对象是否为空</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25%E3%80%81%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E9%A1%B9"><span class="toc-text">25、获取数组中的最后一项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26%E3%80%81%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E7%9A%84%E9%9A%8F%E6%9C%BA%E6%8E%92%E5%BA%8F"><span class="toc-text">26、数组元素的随机排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Vue"><span class="toc-text">四、Vue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81computed%E4%B8%AD%E4%BD%BF%E7%94%A8this%EF%BC%9F"><span class="toc-text">1、computed中使用this？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%81%BF%E5%85%8Dv-if%E5%92%8Cv-for%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">2、避免v-if和v-for一起使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E4%BF%AE%E9%A5%B0%E7%AC%A6sync"><span class="toc-text">3、修饰符sync</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81IOS%E5%92%8C%E5%AE%89%E5%8D%93%E8%B8%A9%E5%9D%91"><span class="toc-text">五、IOS和安卓踩坑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81IOS%E6%BB%91%E5%8A%A8%E4%B8%8D%E6%B5%81%E7%95%85"><span class="toc-text">1、IOS滑动不流畅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81click-%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%BB%B6%E6%97%B6%E4%B8%8E%E7%A9%BF%E9%80%8F"><span class="toc-text">2、click 点击事件延时与穿透</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%BD%AF%E9%94%AE%E7%9B%98%E5%B0%86%E9%A1%B5%E9%9D%A2%E9%A1%B6%E8%B5%B7%E6%9D%A5%E3%80%81%E6%94%B6%E8%B5%B7%E6%9C%AA%E5%9B%9E%E8%90%BD%E9%97%AE%E9%A2%98"><span class="toc-text">3、软键盘将页面顶起来、收起未回落问题</span></a></li></ol></li></ol></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi"></div></div><div class="col-sm-12"><span>Copyright &copy; 2017</span> | <span>Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a></span> | <span>Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a></span></div></div></div></div><script src="/js/app.js?rev=2f9097f8c1d5adfecd923b78b47be31b"></script></body></html>