<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="H多看源码多读书 - 勤于思考善领悟"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><meta name="theme-version" content="1.3.0"><meta name="root" content="/"><link rel="dns-prefetch" href="http://example.com"><meta name="keywords" content="Webpack,Sentry,SourceMap"><meta name="description" content="Sentry集成与hidden-source-map源码溯源指南
📚 本方案将指导你如何在 Webpack 5 项目中集成 Sentry，实现生产环境的自动错误捕获和源码还原。


一、背景知..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>Sentry集成与hidden-source-map源码溯源指南 | H多看源码多读书 - 勤于思考善领悟</title><link rel="alternate" href="/atom.xml" title="H多看源码多读书 - 勤于思考善领悟" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=1d1bccdabbf21f3604f985399285f5cf"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=17d35b1ddb5a58cc19379d19f22b9fdc"><link rel="stylesheet" href="/css/style.css?rev=1be479d06cbb29d0c56ae25586ad88bc"><div class="hide"><script type="text/javascript">!function(){var t="https:"===document.location.protocol?"https://":"http://",c=document.createElement("script");c.src="https://s95.cnzz.com/z_stat.php?web_id=1272564536",c.async=!0,document.body.appendChild(c);var e=document.createElement("script");e.src=t+"s19.cnzz.com/z_stat.php?id=1263868967&show=pic1",e.async=!0,document.body.appendChild(e)}()</script></div><meta name="generator" content="Hexo 7.3.0"></head><!--[if lte IE 8]><style>
    html{ font-size: 1em }
</style><![endif]--><!--[if lte IE 9]><div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div><![endif]--><body><header class="main-header" style="background-image:url(https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/banner.webp)"><div class="main-header-box"><a class="header-avatar" href="/" title="ZHB"><img src="/img/avatar.webp" alt="logo头像" class="img-responsive center-block"></a><div class="branding"><img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block"></div></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span><i class="fa fa-bars"></i></span> <a class="navbar-brand" href="http://example.com">H多看源码多读书 - 勤于思考善领悟</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa"></i> 首页</a></li><li role="presentation" class="text-center"><a href="/categories/"><i class="fa"></i> 分类</a></li><li role="presentation" class="text-center"><a href="/tags/"><i class="fa"></i> 标签</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa"></i> 时间轴</a></li><li role="presentation" class="text-center"><a href="/about/"><i class="fa"></i> 关于</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-9 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="Sentry集成与hidden-source-map源码溯源指南">Sentry集成与hidden-source-map源码溯源指南</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96%E4%B8%8E%E8%B4%A8%E9%87%8F/">工程化与质量</a></span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta"><a class="tag-none-link" href="/tags/Sentry/" rel="tag">Sentry</a> <a class="tag-none-link" href="/tags/SourceMap/" rel="tag">SourceMap</a> <a class="tag-none-link" href="/tags/Webpack/" rel="tag">Webpack</a></span></span><span class="fa-wrap"><i class="fa fa-clock-o"></i> <span class="date-meta">2026/03/01</span></span></div></div><div class="post-body post-content"><h1 id="Sentry集成与hidden-source-map源码溯源指南"><a href="#Sentry集成与hidden-source-map源码溯源指南" class="headerlink" title="Sentry集成与hidden-source-map源码溯源指南"></a>Sentry集成与hidden-source-map源码溯源指南</h1><blockquote><p>📚 本方案将指导你如何在 Webpack 5 项目中集成 Sentry，实现生产环境的自动错误捕获和源码还原。</p></blockquote><hr><h2 id="一、背景知识"><a href="#一、背景知识" class="headerlink" title="一、背景知识"></a>一、背景知识</h2><h3 id="1-1、什么是-SourceMap？"><a href="#1-1、什么是-SourceMap？" class="headerlink" title="1.1、什么是 SourceMap？"></a><strong><font color="red">1.1、什么是 SourceMap？</font></strong></h3><p>SourceMap（源代码映射）是一个用来生成源代码与构建后代码一一映射的文件的方案。</p><p>它会生成一个 <code>xxx.map</code> 文件，里面包含源代码和构建后代码每一行、每一列的映射关系。当构建后代码出错了，会通过 <code>xxx.map</code> 文件，从构建后代码出错位置找到映射后源代码出错位置，从而让浏览器提示源代码文件出错位置，帮助我们更快的找到错误根源。</p><hr><h3 id="1-2、开发环境的-SourceMap-配置"><a href="#1-2、开发环境的-SourceMap-配置" class="headerlink" title="1.2、开发环境的 SourceMap 配置"></a><strong><font color="red">1.2、开发环境的 SourceMap 配置</font></strong></h3><p>开发环境推荐使用 <code>cheap-module-source-map</code>：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.dev.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><table><thead><tr><th>特点</th><th>说明</th></tr></thead><tbody><tr><td>✅ 优点</td><td>打包编译速度快，只包含行映射，可直接查看源码</td></tr><tr><td>❌ 缺点</td><td>没有列映射（不影响开发调试）</td></tr></tbody></table><hr><h3 id="1-3、生产环境的-SourceMap-配置"><a href="#1-3、生产环境的-SourceMap-配置" class="headerlink" title="1.3、生产环境的 SourceMap 配置"></a><strong><font color="red">1.3、生产环境的 SourceMap 配置</font></strong></h3><p>在生产环境中，是否配置 SourceMap 取决于<strong>公司对性能、安全和调试便利性</strong>的权衡。目前主流的做法有以下几种：</p><h4 id="方案一：配置-source-map（最常见）"><a href="#方案一：配置-source-map（最常见）" class="headerlink" title="方案一：配置 source-map（最常见）"></a>方案一：配置 <code>source-map</code>（最常见）</h4><p>大多数中大型项目的 <code>webpack.prod.js</code> 都会配置此选项。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.prod.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>特点：</strong></p><ul><li>打包后会生成主 JS 文件（如 <code>main.js</code>）和一个对应的 <code>.map</code> 文件</li><li>打包文件末尾会添加 <code>//# sourceMappingURL=xxx.js.map</code> 注释</li></ul><table><thead><tr><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>✅ 错误溯源方便，监控系统可利用 <code>.map</code> 文件还原源码行数</td><td>❌ 打包编译速度慢</td></tr><tr><td>✅ 主包体积不受影响，<code>.map</code> 文件独立，用户访问时不会下载</td><td>❌ 源码暴露风险，懂行的用户可通过控制台查看源码</td></tr></tbody></table><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228165327466.png" alt="image-20260228165327466"></p><blockquote><p><code>//# sourceMappingURL</code> 的核心作用：<strong>告诉浏览器去哪里下载对应的 SourceMap 文件，从而实现生产代码到开发源码的精准映射。</strong></p></blockquote><h4 id="方案二：配置-hidden-source-map（推荐-Sentry）"><a href="#方案二：配置-hidden-source-map（推荐-Sentry）" class="headerlink" title="方案二：配置 hidden-source-map（推荐 + Sentry）"></a>方案二：配置 <code>hidden-source-map</code>（推荐 + Sentry）</h4><p>如果你既想在后台监控错误，又不希望用户在浏览器控制台看到源码，这是最佳方案。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.prod.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;hidden-source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>特点：</strong></p><ul><li>✅ 会生成 <code>.map</code> 文件</li><li>❌ 打包后的 JS 文件结尾<strong>不会产生</strong> <code>//# sourceMappingURL=...</code> 的引用注释</li><li>🔒 浏览器控制台不会自动关联源码，报错只显示压缩后的行数</li><li>📤 可将 <code>.map</code> 文件上传到 Sentry 等私有监控平台，实现内部调试</li></ul><table><thead><tr><th>优势</th><th>说明</th></tr></thead><tbody><tr><td>🔒 <strong>安全性</strong></td><td>生成的 <code>.map</code> 文件不会在代码中引用，用户无法在浏览器控制台直接查看源码</td></tr><tr><td>🔐 <strong>隐私性</strong></td><td>防止源码通过浏览器开发者工具被轻易获取，保护业务逻辑</td></tr><tr><td>🎯 <strong>精准定位</strong></td><td>Sentry 服务器持有 SourceMap，可以精准还原错误位置</td></tr><tr><td>⚖️ <strong>平衡性</strong></td><td>既保证了线上代码的安全性，又能在 Sentry 后台看到详细的错误堆栈</td></tr></tbody></table><h4 id="方案三：不配置-SourceMap（极致安全）"><a href="#方案三：不配置-SourceMap（极致安全）" class="headerlink" title="方案三：不配置 SourceMap（极致安全）"></a>方案三：不配置 SourceMap（极致安全）</h4><p>如果项目非常敏感（比如金融、保密项目），或者是一个极简的小项目，可以选择完全不配置。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.prod.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="literal">false</span>,  <span class="comment">// 或不写此配置</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>特点：</strong></p><ul><li>❌ 不生成任何映射文件</li><li>❌ 压缩后的代码完全无法调试</li><li>⚠️ 线上出 bug 只能通过”盲猜”或在本地模拟数据来复现</li></ul><hr><h3 id="1-4、生产环境配置总结"><a href="#1-4、生产环境配置总结" class="headerlink" title="1.4、生产环境配置总结"></a><strong><font color="red">1.4、生产环境配置总结</font></strong></h3><table><thead><tr><th>项目类型</th><th>推荐配置</th><th>说明</th></tr></thead><tbody><tr><td>中小型项目&#x2F;后台管理系统</td><td><code>source-map</code></td><td>调试效率第一</td></tr><tr><td>大型互联网产品&#x2F;C端应用</td><td><code>hidden-source-map</code> + SentrySentry&#x2F;私有监控</td><td>兼顾安全与调试</td></tr><tr><td>金融&#x2F;保密项目</td><td>不配置</td><td>极致安全</td></tr><tr><td>个人练习项目</td><td><code>source-map</code></td><td>方便学习调试</td></tr></tbody></table><hr><h3 id="1-5、hidden-source-map-Sentry-工作原理"><a href="#1-5、hidden-source-map-Sentry-工作原理" class="headerlink" title="1.5、hidden-source-map + Sentry 工作原理"></a><strong><font color="red">1.5、hidden-source-map + Sentry 工作原理</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────────┐</span><br><span class="line">│                      构建阶段                                </span><br><span class="line">├─────────────────────────────────────────────────────────────┤</span><br><span class="line">│  源码 (main.js)  ──编译压缩──&gt;  bundle.js + bundle.js.map </span><br><span class="line">│                                                            </span><br><span class="line">│  hidden-source-map 模式：                                   </span><br><span class="line">│  ✅ 生成 bundle.js.map 文件                                 </span><br><span class="line">│  ❌ 不在 bundle.js 末尾添加 sourceMappingURL 注释           </span><br><span class="line">└─────────────────────────────────────────────────────────────┘</span><br><span class="line">                            │</span><br><span class="line">                            ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────┐</span><br><span class="line">│                      部署阶段                                </span><br><span class="line">├─────────────────────────────────────────────────────────────┤</span><br><span class="line">│  bundle.js      ──上传到服务器──&gt;  用户访问（无源码暴露）    </span><br><span class="line">│  bundle.js.map  ──上传到 Sentry──&gt; 错误追踪时还原源码       </span><br><span class="line">└─────────────────────────────────────────────────────────────┘</span><br><span class="line">                            │</span><br><span class="line">                            ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────┐</span><br><span class="line">│                      错误发生时                              </span><br><span class="line">├─────────────────────────────────────────────────────────────┤</span><br><span class="line">│  用户浏览器：只能看到 bundle.js:1:23456                      </span><br><span class="line">│  Sentry 后台：通过 .map 文件还原为 main.js:42:15            </span><br><span class="line">└─────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure><hr><h2 id="二、准备工作"><a href="#二、准备工作" class="headerlink" title="二、准备工作"></a>二、准备工作</h2><h3 id="2-1、注册-Sentry-账号"><a href="#2-1、注册-Sentry-账号" class="headerlink" title="2.1、注册 Sentry 账号"></a><strong><font color="red">2.1、注册 Sentry 账号</font></strong></h3><p>访问 <a target="_blank" rel="noopener" href="https://sentry.io/">Sentry.io</a> 注册账号</p><h3 id="2-2、创建项目（Project）"><a href="#2-2、创建项目（Project）" class="headerlink" title="2.2、创建项目（Project）"></a><strong><font color="red">2.2、创建项目（Project）</font></strong></h3><p>选择 Browser JavaScript（根据自己项目来）</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228151819711.png" alt="image-20260228151819711"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228152001432.png" alt="image-20260228152001432"></p><h3 id="2-3、设置-Sentry-SDK"><a href="#2-3、设置-Sentry-SDK" class="headerlink" title="2.3、设置 Sentry SDK"></a><strong><font color="red">2.3、设置 Sentry SDK</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228152054610.png" alt="image-20260228152054610"></p><h3 id="2-4、获取-DSN"><a href="#2-4、获取-DSN" class="headerlink" title="2.4、获取 DSN"></a><strong><font color="red">2.4、获取 DSN</font></strong></h3><p>格式类似 <code>https://xxxxxx@sentry.io/12345</code>。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228152309729.png" alt="image-20260228152309729"></p><p><strong>或者选择项目后，再鼠标放置设置图标上：</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228155828037.png" alt="image-20260228155828037"></p><hr><h2 id="三、安装依赖"><a href="#三、安装依赖" class="headerlink" title="三、安装依赖"></a>三、安装依赖</h2><p>在项目根目录下执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @sentry/browser</span><br><span class="line">npm install @sentry/webpack-plugin --save-dev</span><br></pre></td></tr></table></figure><hr><h2 id="四、代码集成"><a href="#四、代码集成" class="headerlink" title="四、代码集成"></a>四、代码集成</h2><h3 id="4-1、SDK-初始化"><a href="#4-1、SDK-初始化" class="headerlink" title="4.1、SDK 初始化"></a><strong><font color="red">4.1、SDK 初始化</font></strong></h3><p>在入口文件（如 <code>src/main.js</code>）的顶部引入并初始化：</p><p><strong><code>main.js</code></strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Sentry</span> <span class="keyword">from</span> <span class="string">&quot;@sentry/browser&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Sentry</span>.<span class="title function_">init</span>(&#123;</span><br><span class="line">  <span class="attr">dsn</span>: <span class="string">&quot;https://5fef42a12263056007b7df042b39a53b@o4510962147393536.ingest.de.sentry.io/4510962153619536&quot;</span>,</span><br><span class="line">  <span class="attr">integrations</span>: [</span><br><span class="line">    <span class="title class_">Sentry</span>.<span class="title function_">browserTracingIntegration</span>(),</span><br><span class="line">    <span class="title class_">Sentry</span>.<span class="title function_">replayIntegration</span>(),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 性能监控采样率</span></span><br><span class="line">  <span class="attr">tracesSampleRate</span>: <span class="number">1.0</span>,</span><br><span class="line">  <span class="comment">// Session Replay 采样率</span></span><br><span class="line">  <span class="attr">replaysSessionSampleRate</span>: <span class="number">0.1</span>,</span><br><span class="line">  <span class="attr">replaysOnErrorSampleRate</span>: <span class="number">1.0</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h2 id="五、Webpack-配置自动上传-SourceMap"><a href="#五、Webpack-配置自动上传-SourceMap" class="headerlink" title="五、Webpack 配置自动上传 SourceMap"></a>五、Webpack 配置自动上传 SourceMap</h2><p>这是生产环境最重要的步骤，确保 Sentry 能根据混淆代码还原源码。</p><p><strong><code>webpack.prod.js</code></strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; sentryWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">&quot;@sentry/webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;hidden-source-map&quot;</span>, <span class="comment">// ✨ 安全推荐：生成 map 但不添加关联注释，防止浏览器控制台泄露源码</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ... 其他插件</span></span><br><span class="line">    <span class="title function_">sentryWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">authToken</span>: <span class="string">&quot;你的 Sentry Token&quot;</span>,</span><br><span class="line">      <span class="attr">org</span>: <span class="string">&quot;你的组织名&quot;</span>,</span><br><span class="line">      <span class="attr">project</span>: <span class="string">&quot;你的项目名&quot;</span>,</span><br><span class="line">      <span class="attr">sourcemaps</span>: &#123;</span><br><span class="line">        <span class="attr">assets</span>: [<span class="string">&quot;./dist/**&quot;</span>],</span><br><span class="line">        <span class="attr">ignore</span>: [<span class="string">&quot;node_modules&quot;</span>, <span class="string">&quot;config&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="5-1、authToken"><a href="#5-1、authToken" class="headerlink" title="5.1、authToken"></a><strong><font color="red">5.1、authToken</font></strong></h3><p><strong>1. 推荐使用：Personal Tokens（个人令牌）</strong></p><p>这是最通用的选择，也是 Sentry 引导页面通常推荐的方式。</p><ul><li><strong>优点</strong>：配置最简单。在 <code>sentryWebpackPlugin</code> 配置中，你只需要提供一个 <code>authToken</code> 即可。它代表的是”你”这个开发者在 Sentry 里的权限。</li><li><strong>权限要求</strong>：创建时至少勾选 <code>project:write</code>、<code>project:releases</code> 和 <code>org:read</code>。</li></ul><p><strong>2. 企业级选择：Organization Tokens（组织令牌）</strong></p><p>这通常用于公司层面的 CI&#x2F;CD 自动化流水线。</p><ul><li><strong>优点</strong>：与具体的个人账号解耦。即使某个员工离职了，只要组织令牌还在，自动化部署就不会挂掉。</li><li><strong>配置差异</strong>：使用组织令牌时，有时在较老的插件版本中需要明确指定组织范围，但在最新的 <code>sentryWebpackPlugin</code> (v2&#x2F;v5) 中，它的使用方式和 Personal Token 基本一致。</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228155519933.png" alt="image-20260228155519933"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228154656332.png" alt="image-20260228154656332"></p><h3 id="5-2、org-组织名"><a href="#5-2、org-组织名" class="headerlink" title="5.2、org 组织名"></a><strong><font color="red">5.2、org 组织名</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228155436973.png" alt="image-20260228155436973"></p><h3 id="5-3、project-项目名"><a href="#5-3、project-项目名" class="headerlink" title="5.3、project 项目名"></a><strong><font color="red">5.3、project 项目名</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228155646709.png" alt="image-20260228155646709"></p><hr><h2 id="六、验证"><a href="#六、验证" class="headerlink" title="六、验证"></a>六、验证</h2><p>在代码中手动抛出一个错误：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">pre, cur</span>) =&gt;</span> pre + cur, <span class="number">0</span>)();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</span><br></pre></td></tr></table></figure><p>执行 <code>npm run build</code> 打包并运行代码。片刻后，你将在 Sentry 后台看到这个错误，并且它能精准定位到 <code>main.js</code> 的具体行数。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228160213461.png" alt="image-20260228160213461"></p><p>配置 <code>devtool: &quot;hidden-source-map&quot;</code> 后，浏览器控制台定位不到是哪个文件哪一行报错的。</p><p>Sentry 中则可以详细看到那个文件、那一行报错：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260228160425665.png" alt="image-20260228160425665"></p></div><div class="post-footer"><div>转载声明： 商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">ZHB</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/posts/8e2e021e.html" class="pre-post btn btn-default" title="【置顶】超级有用的html/css/js/vue等技巧 持续更新中"><i class="fa fa-angle-left fa-fw"></i> <span class="hidden-lg">上一篇</span> <span class="hidden-xs">【置顶】超级有用的html/css/js/vue等技巧 持续更新中</span></a> <a href="/posts/b41c92e1.html" class="next-post btn btn-default" title="Babel 7 从入门到进阶的全场景指南"><span class="hidden-lg">下一篇</span> <span class="hidden-xs">Babel 7 从入门到进阶的全场景指南</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div class="utteranc"><script src="https://utteranc.es/client.js" repo="shenliyang/snippet-comment" issue-term="pathname" issue-number="" theme="github-light" label="" crossorigin="anonymous" async></script></div></div></main><aside id="article-toc" role="navigation" class="col-md-3"><div class="widget"><h3 class="title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Sentry%E9%9B%86%E6%88%90%E4%B8%8Ehidden-source-map%E6%BA%90%E7%A0%81%E6%BA%AF%E6%BA%90%E6%8C%87%E5%8D%97"><span class="toc-text">Sentry集成与hidden-source-map源码溯源指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AF%86"><span class="toc-text">一、背景知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-SourceMap%EF%BC%9F"><span class="toc-text">1.1、什么是 SourceMap？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84-SourceMap-%E9%85%8D%E7%BD%AE"><span class="toc-text">1.2、开发环境的 SourceMap 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E3%80%81%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%9A%84-SourceMap-%E9%85%8D%E7%BD%AE"><span class="toc-text">1.3、生产环境的 SourceMap 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%9A%E9%85%8D%E7%BD%AE-source-map%EF%BC%88%E6%9C%80%E5%B8%B8%E8%A7%81%EF%BC%89"><span class="toc-text">方案一：配置 source-map（最常见）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C%EF%BC%9A%E9%85%8D%E7%BD%AE-hidden-source-map%EF%BC%88%E6%8E%A8%E8%8D%90-Sentry%EF%BC%89"><span class="toc-text">方案二：配置 hidden-source-map（推荐 + Sentry）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%89%EF%BC%9A%E4%B8%8D%E9%85%8D%E7%BD%AE-SourceMap%EF%BC%88%E6%9E%81%E8%87%B4%E5%AE%89%E5%85%A8%EF%BC%89"><span class="toc-text">方案三：不配置 SourceMap（极致安全）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E3%80%81%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93"><span class="toc-text">1.4、生产环境配置总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5%E3%80%81hidden-source-map-Sentry-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">1.5、hidden-source-map + Sentry 工作原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">二、准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81%E6%B3%A8%E5%86%8C-Sentry-%E8%B4%A6%E5%8F%B7"><span class="toc-text">2.1、注册 Sentry 账号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%88Project%EF%BC%89"><span class="toc-text">2.2、创建项目（Project）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81%E8%AE%BE%E7%BD%AE-Sentry-SDK"><span class="toc-text">2.3、设置 Sentry SDK</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E3%80%81%E8%8E%B7%E5%8F%96-DSN"><span class="toc-text">2.4、获取 DSN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-text">三、安装依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BB%A3%E7%A0%81%E9%9B%86%E6%88%90"><span class="toc-text">四、代码集成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81SDK-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">4.1、SDK 初始化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Webpack-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E4%B8%8A%E4%BC%A0-SourceMap"><span class="toc-text">五、Webpack 配置自动上传 SourceMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E3%80%81authToken"><span class="toc-text">5.1、authToken</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E3%80%81org-%E7%BB%84%E7%BB%87%E5%90%8D"><span class="toc-text">5.2、org 组织名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3%E3%80%81project-%E9%A1%B9%E7%9B%AE%E5%90%8D"><span class="toc-text">5.3、project 项目名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E9%AA%8C%E8%AF%81"><span class="toc-text">六、验证</span></a></li></ol></li></ol></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi"></div></div><div class="col-sm-12"><span>Copyright &copy; 2017</span> | <span>Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a></span> | <span>Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a></span></div></div></div></div><script src="/js/app.js?rev=2f9097f8c1d5adfecd923b78b47be31b"></script></body></html>