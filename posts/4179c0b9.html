<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><meta name="theme-version" content="1.3.0"><meta name="root" content="/"><link rel="dns-prefetch" href="http://example.com"><meta name="keywords" content="react18,react19"><meta name="description" content="React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)
ğŸ“š æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©åˆå­¦è€…å¿«é€ŸæŒæ¡ React çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€æ–°ç‰¹æ€§


ç›®å½•
React ç®€ä»‹
ç¯å¢ƒæ­å»º
æ ¸å¿ƒæ¦‚å¿µ
Reac..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>React å®Œå…¨æŒ‡å— (React 18 &amp; 19) | Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ</title><link rel="alternate" href="/atom.xml" title="Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=1d1bccdabbf21f3604f985399285f5cf"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=17d35b1ddb5a58cc19379d19f22b9fdc"><link rel="stylesheet" href="/css/style.css?rev=1be479d06cbb29d0c56ae25586ad88bc"><div class="hide"><script type="text/javascript">!function(){var t="https:"===document.location.protocol?"https://":"http://",c=document.createElement("script");c.src="https://s95.cnzz.com/z_stat.php?web_id=1272564536",c.async=!0,document.body.appendChild(c);var e=document.createElement("script");e.src=t+"s19.cnzz.com/z_stat.php?id=1263868967&show=pic1",e.async=!0,document.body.appendChild(e)}()</script></div><meta name="generator" content="Hexo 7.3.0"></head><!--[if lte IE 8]><style>
    html{ font-size: 1em }
</style><![endif]--><!--[if lte IE 9]><div style="ie">ä½ ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œä¸ºäº†ä½ æ›´å¥½çš„é˜…è¯»ä½“éªŒï¼Œè¯·æ›´æ–°æµè§ˆå™¨çš„ç‰ˆæœ¬æˆ–è€…ä½¿ç”¨å…¶ä»–ç°ä»£æµè§ˆå™¨ï¼Œæ¯”å¦‚Chromeã€Firefoxã€Safariç­‰ã€‚</div><![endif]--><body><header class="main-header" style="background-image:url(https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/banner.webp)"><div class="main-header-box"><a class="header-avatar" href="/" title="ZHB"><img src="/img/avatar.webp" alt="logoå¤´åƒ" class="img-responsive center-block"></a><div class="branding"><img src="/img/branding.png" alt="Snippet åšå®¢ä¸»é¢˜" class="img-responsive center-block"></div></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span><i class="fa fa-bars"></i></span> <a class="navbar-brand" href="http://example.com">Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa"></i> é¦–é¡µ</a></li><li role="presentation" class="text-center"><a href="/categories/"><i class="fa"></i> åˆ†ç±»</a></li><li role="presentation" class="text-center"><a href="/tags/"><i class="fa"></i> æ ‡ç­¾</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa"></i> æ—¶é—´è½´</a></li><li role="presentation" class="text-center"><a href="/about/"><i class="fa"></i> å…³äº</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-9 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="React å®Œå…¨æŒ‡å— (React 18 &amp; 19)">React å®Œå…¨æŒ‡å— (React 18 &amp; 19)</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/">æ¡†æ¶ä¸ç”Ÿæ€</a></span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta"><a class="tag-none-link" href="/tags/react18/" rel="tag">react18</a> <a class="tag-none-link" href="/tags/react19/" rel="tag">react19</a></span></span><span class="fa-wrap"><i class="fa fa-clock-o"></i> <span class="date-meta">2025/12/02</span></span></div></div><div class="post-body post-content"><h1 id="React-åˆå­¦è€…å®Œå…¨æŒ‡å—-React-18-19"><a href="#React-åˆå­¦è€…å®Œå…¨æŒ‡å—-React-18-19" class="headerlink" title="React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)"></a>React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)</h1><blockquote><p>ğŸ“š æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©åˆå­¦è€…å¿«é€ŸæŒæ¡ React çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€æ–°ç‰¹æ€§</p></blockquote><hr><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#%E4%B8%80-react-%E7%AE%80%E4%BB%8B">React ç®€ä»‹</a></li><li><a href="#%E4%BA%8C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">ç¯å¢ƒæ­å»º</a></li><li><a href="#%E4%B8%89-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">æ ¸å¿ƒæ¦‚å¿µ</a></li><li><a href="#%E5%9B%9B-react-hooks-%E8%AF%A6%E8%A7%A3">React Hooks è¯¦è§£</a></li><li><a href="#%E4%BA%94-hoc-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6">HOC é«˜é˜¶ç»„ä»¶</a></li><li><a href="#5-react-18-%E6%96%B0%E7%89%B9%E6%80%A7">React 18 æ–°ç‰¹æ€§</a></li><li><a href="#6-react-19-%E6%96%B0%E7%89%B9%E6%80%A7">React 19 æ–°ç‰¹æ€§</a></li><li><a href="#7-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li><li><a href="#8-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li></ol><br><h2 id="ä¸€ã€React-ç®€ä»‹"><a href="#ä¸€ã€React-ç®€ä»‹" class="headerlink" title="ä¸€ã€React ç®€ä»‹"></a><strong>ä¸€ã€React ç®€ä»‹</strong></h2><h3 id="1-1-ä»€ä¹ˆæ˜¯-Reactï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯-Reactï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ Reactï¼Ÿ"></a><strong><font color="red">1.1 ä»€ä¹ˆæ˜¯ Reactï¼Ÿ</font></strong></h3><p>React æ˜¯ç”± Facebookï¼ˆç° Metaï¼‰å¼€å‘çš„ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ul><li><strong>ç»„ä»¶åŒ–</strong>ï¼šå°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶</li><li><strong>å£°æ˜å¼</strong>ï¼šæè¿° UI åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Œè€Œä¸æ˜¯å¦‚ä½•æ”¹å˜å®ƒ</li><li><strong>å•å‘æ•°æ®æµ</strong>ï¼šæ•°æ®ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ï¼Œä½¿åº”ç”¨æ›´å¯é¢„æµ‹</li></ul><h3 id="1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-Reactï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-Reactï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ"></a><strong><font color="red">1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ</font></strong></h3><table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸš€ é«˜æ€§èƒ½</td><td>è™šæ‹Ÿ DOM æœ€å°åŒ–çœŸå® DOM æ“ä½œ</td></tr><tr><td>ğŸ§© ç»„ä»¶å¤ç”¨</td><td>ä¸€æ¬¡ç¼–å†™ï¼Œå¤šå¤„ä½¿ç”¨</td></tr><tr><td>ğŸŒ ç”Ÿæ€ä¸°å¯Œ</td><td>å¤§é‡ç¬¬ä¸‰æ–¹åº“å’Œå·¥å…·æ”¯æŒ</td></tr><tr><td>ğŸ“± è·¨å¹³å°</td><td>React Native å¯å¼€å‘ç§»åŠ¨åº”ç”¨</td></tr><tr><td>ğŸ‘¥ ç¤¾åŒºæ´»è·ƒ</td><td>ä¸°å¯Œçš„å­¦ä¹ èµ„æºå’Œè§£å†³æ–¹æ¡ˆ</td></tr></tbody></table><hr><br><h2 id="äºŒã€-ç¯å¢ƒæ­å»º"><a href="#äºŒã€-ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ ç¯å¢ƒæ­å»º"></a><strong>äºŒã€ ç¯å¢ƒæ­å»º</strong></h2><h3 id="2-1-ä½¿ç”¨-Vite-åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰"><a href="#2-1-ä½¿ç”¨-Vite-åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰" class="headerlink" title="2.1 ä½¿ç”¨ Vite åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰"></a><strong><font color="red">2.1 ä½¿ç”¨ Vite åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ npm</span></span><br><span class="line">npm create vite@latest vite-react-app -- --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ pnpm</span></span><br><span class="line">pnpm create vite vite-react-app --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ yarn</span></span><br><span class="line">yarn create vite vite-react-app --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vite-react-app</span><br><span class="line">npm/pnpm/yarn install</span><br><span class="line">npm/pnpm/yarn run dev</span><br></pre></td></tr></table></figure><h3 id="2-2-ä½¿ç”¨-Create-React-App"><a href="#2-2-ä½¿ç”¨-Create-React-App" class="headerlink" title="2.2 ä½¿ç”¨ Create React App"></a><strong><font color="red">2.2 ä½¿ç”¨ Create React App</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app webpack-react-app</span><br><span class="line"><span class="built_in">cd</span> webpack-react-app</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><h3 id="2-3-é¡¹ç›®ç»“æ„"><a href="#2-3-é¡¹ç›®ç»“æ„" class="headerlink" title="2.3 é¡¹ç›®ç»“æ„"></a><strong><font color="red">2.3 é¡¹ç›®ç»“æ„</font></strong></h3><p><strong>vite</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vite-react-app/</span><br><span class="line">â”œâ”€â”€ ğŸ“ public/                 # å…¬å…±èµ„æºç›®å½•</span><br><span class="line">â”‚   â””â”€â”€ vite.svg               # Vite é¡¹ç›®é»˜è®¤ SVG å›¾æ ‡</span><br><span class="line">â”œâ”€â”€ ğŸ“ src/                    # æºä»£ç ç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“ assets/             # é™æ€èµ„æºç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ App.jsx                # æ ¹ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ App.css                # App ç»„ä»¶æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ main.jsx               # åº”ç”¨å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ index.css              # å…¨å±€æ ·å¼æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£</span><br><span class="line">â”œâ”€â”€ eslint.config.js           # ESLint é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ index.html                 # HTML å…¥å£æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ pnpm-lock.yaml             # pnpm ä¾èµ–é”å®šæ–‡ä»¶</span><br><span class="line">â””â”€â”€ vite.config.js             # Vite é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><p><strong>webpack</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">webpack-react-app/</span><br><span class="line">â”œâ”€â”€ ğŸ“ public/                 # å…¬å…±èµ„æºç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ favicon.ico            # ç½‘ç«™å›¾æ ‡</span><br><span class="line">â”‚   â”œâ”€â”€ index.html             # HTML å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ manifest.json          # Web App æ¸…å•æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ robots.txt             # æœç´¢å¼•æ“çˆ¬è™«è§„åˆ™</span><br><span class="line">â”œâ”€â”€ ğŸ“ src/                    # æºä»£ç ç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ App.css                # App ç»„ä»¶æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ App.js                 # æ ¹ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ App.test.js            # App ç»„ä»¶æµ‹è¯•æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ index.css              # å…¨å±€æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ index.js               # åº”ç”¨å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ reportWebVitals.js     # æ€§èƒ½æ£€æµ‹æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ setupTests.js          # æµ‹è¯•è®¾ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£</span><br><span class="line">â”œâ”€â”€ package-lock.json          # npm ä¾èµ–é”å®šæ–‡ä»¶</span><br><span class="line">â””â”€â”€ package.json               # é¡¹ç›®é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="2-4-è·¨åŸŸè¯·æ±‚ä»£ç†é…ç½®"><a href="#2-4-è·¨åŸŸè¯·æ±‚ä»£ç†é…ç½®" class="headerlink" title="2.4 è·¨åŸŸè¯·æ±‚ä»£ç†é…ç½®"></a><strong><font color="red">2.4 è·¨åŸŸè¯·æ±‚ä»£ç†é…ç½®</font></strong></h3><p>åœ¨å‰åç«¯åˆ†ç¦»è·¨åŸŸå¼€å‘æ—¶ï¼Œé€šå¸¸éœ€è¦åœ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨ä¸­é…ç½®ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ã€‚</p><h4 id="1ï¼‰Vite-é…ç½®è·¨åŸŸä»£ç†"><a href="#1ï¼‰Vite-é…ç½®è·¨åŸŸä»£ç†" class="headerlink" title="1ï¼‰Vite é…ç½®è·¨åŸŸä»£ç†"></a><strong><font color="#10c300">1ï¼‰Vite é…ç½®è·¨åŸŸä»£ç†</font></strong></h4><p>ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ <code>vite.config.js</code> æ–‡ä»¶ï¼Œåœ¨ <code>server</code> é€‰é¡¹ä¸­æ·»åŠ ç”¨æˆ·æŒ‡å®šçš„ <code>proxy</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">  <span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&quot;https://jsonplaceholder.typicode.com&quot;</span>, <span class="comment">// å®é™…åç«¯åœ°å€</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&quot;&quot;</span>), <span class="comment">// å¦‚æœåç«¯æ¥å£æœ¬èº«ä¸å¸¦ /api å‰ç¼€</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰Create-React-App-é…ç½®è·¨åŸŸä»£ç†"><a href="#2ï¼‰Create-React-App-é…ç½®è·¨åŸŸä»£ç†" class="headerlink" title="2ï¼‰Create React App é…ç½®è·¨åŸŸä»£ç†"></a><strong><font color="#10c300">2ï¼‰Create React App é…ç½®è·¨åŸŸä»£ç†</font></strong></h4><p>CRA å®˜æ–¹æ¨èé€šè¿‡åœ¨ src ç›®å½•ä¸‹åˆ›å»º <code>setupProxy.js</code> æ¥é…ç½®ä»£ç†åº•å±‚ä¸­é—´ä»¶ã€‚</p><ol><li>å®‰è£…ä»£ç†æ’ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install http-proxy-middleware --save</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>src/</code> ç›®å½•ä¸­æ–°å»º <code>setupProxy.js</code>ï¼ˆæ³¨æ„ï¼šç”±äºå®ƒæ˜¯ Node ç¯å¢ƒç›´æ¥è¯»å–é…ç½®ï¼Œåªèƒ½ä½¿ç”¨ CommonJS è§„èŒƒï¼‰ï¼Œå†™å…¥ä»¥ä¸‹é…ç½®ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">&quot;http-proxy-middleware&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">app</span>) &#123;</span><br><span class="line">  app.<span class="title function_">use</span>(</span><br><span class="line">    <span class="string">&quot;/api&quot;</span>,</span><br><span class="line">    <span class="title function_">createProxyMiddleware</span>(&#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="string">&quot;https://jsonplaceholder.typicode.com&quot;</span>, <span class="comment">// å®é™…åç«¯åœ°å€</span></span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">        <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// è·¯å¾„é‡å†™ï¼Œå»æ‰ /api å‰ç¼€</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><br><h2 id="ä¸‰ã€-æ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸‰ã€-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸‰ã€ æ ¸å¿ƒæ¦‚å¿µ"></a><strong>ä¸‰ã€ æ ¸å¿ƒæ¦‚å¿µ</strong></h2><h3 id="3-1-JSX-è¯­æ³•"><a href="#3-1-JSX-è¯­æ³•" class="headerlink" title="3.1 JSX è¯­æ³•"></a><strong><font color="red">3.1 JSX è¯­æ³•</font></strong></h3><p>JSX æ˜¯ JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œè®©ä½ å¯ä»¥åœ¨ JS ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„ä»£ç ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX åŸºç¡€è¯­æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">&quot;React&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;welcome&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* ä½¿ç”¨èŠ±æ‹¬å·åµŒå…¥è¡¨è¾¾å¼ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* æ¡ä»¶æ¸²æŸ“ */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;isLoggedIn ? <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ¬¢è¿å›æ¥<span class="tag">&lt;/<span class="name">p</span>&gt;</span> : <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¯·ç™»å½•<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* æ³¨æ„ï¼šclass è¦å†™æˆ className */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1ï¼‰JSX-è§„åˆ™é€Ÿè®°"><a href="#1ï¼‰JSX-è§„åˆ™é€Ÿè®°" class="headerlink" title="1ï¼‰JSX è§„åˆ™é€Ÿè®°"></a><strong><font color="#10c300">1ï¼‰JSX è§„åˆ™é€Ÿè®°</font></strong></h4><table><thead><tr><th>HTML</th><th>JSX</th></tr></thead><tbody><tr><td><code>class</code></td><td><code>className</code></td></tr><tr><td><code>for</code></td><td><code>htmlFor</code></td></tr><tr><td><code>onclick</code></td><td><code>onClick</code></td></tr><tr><td><code>tabindex</code></td><td><code>tabIndex</code></td></tr></tbody></table><br><h3 id="3-2-ç»„ä»¶"><a href="#3-2-ç»„ä»¶" class="headerlink" title="3.2 ç»„ä»¶"></a><strong><font color="red">3.2 ç»„ä»¶</font></strong></h3><h4 id="1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰"><a href="#1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰" class="headerlink" title="1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰"></a><strong><font color="#10c300">1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°ç»„ä»¶æ˜¯ React æ¨èçš„ç¼–å†™æ–¹å¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Greeting</span>(<span class="params">&#123; name &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ å¥½, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Greeting</span> = (<span class="params">&#123; name &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ å¥½, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰"><a href="#2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰" class="headerlink" title="2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰"></a><strong><font color="#10c300">2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greeting</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ å¥½, &#123;this.props.name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-3-Propsï¼ˆå±æ€§ï¼‰"><a href="#3-3-Propsï¼ˆå±æ€§ï¼‰" class="headerlink" title="3.3 Propsï¼ˆå±æ€§ï¼‰"></a><strong><font color="red">3.3 Propsï¼ˆå±æ€§ï¼‰</font></strong></h3><p>Props æ˜¯çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">UserCard</span> <span class="attr">name</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span> <span class="attr">age</span>=<span class="string">&#123;25&#125;</span> <span class="attr">isAdmin</span>=<span class="string">&#123;true&#125;</span> <span class="attr">hobbies</span>=<span class="string">&#123;[</span>&quot;<span class="attr">è¯»ä¹¦</span>&quot;, &quot;<span class="attr">æ¸¸æˆ</span>&quot;]&#125; /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserCard</span>(<span class="params">&#123; name, age, isAdmin, hobbies &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„: &#123;age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>èº«ä»½: &#123;isAdmin ? &quot;ç®¡ç†å‘˜&quot; : &quot;æ™®é€šç”¨æˆ·&quot;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;hobbies.map((hobby, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;hobby&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1ï¼‰Props-é»˜è®¤å€¼"><a href="#1ï¼‰Props-é»˜è®¤å€¼" class="headerlink" title="1ï¼‰Props é»˜è®¤å€¼"></a><strong><font color="#10c300">1ï¼‰Props é»˜è®¤å€¼</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; text = <span class="string">&quot;ç‚¹å‡»&quot;</span>, type = <span class="string">&quot;primary&quot;</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">btn-</span>$&#123;<span class="attr">type</span>&#125;`&#125;&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-4-Stateï¼ˆçŠ¶æ€ï¼‰"><a href="#3-4-Stateï¼ˆçŠ¶æ€ï¼‰" class="headerlink" title="3.4 Stateï¼ˆçŠ¶æ€ï¼‰"></a><strong><font color="red">3.4 Stateï¼ˆçŠ¶æ€ï¼‰</font></strong></h3><p>State æ˜¯ç»„ä»¶å†…éƒ¨çš„å¯å˜æ•°æ®ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// å£°æ˜çŠ¶æ€ï¼š[å½“å‰å€¼, æ›´æ–°å‡½æ•°] = useState(åˆå§‹å€¼)</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å½“å‰è®¡æ•°: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count - 1)&#125;&gt;-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(0)&#125;&gt;é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1ï¼‰State-æ›´æ–°æ³¨æ„äº‹é¡¹"><a href="#1ï¼‰State-æ›´æ–°æ³¨æ„äº‹é¡¹" class="headerlink" title="1ï¼‰State æ›´æ–°æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">1ï¼‰State æ›´æ–°æ³¨æ„äº‹é¡¹</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">wrongUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    user.<span class="property">age</span> = <span class="number">26</span>; <span class="comment">// ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âœ… æ­£ç¡®ï¼šåˆ›å»ºæ–°å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">correctUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setUser</span>(&#123; ...user, <span class="attr">age</span>: <span class="number">26</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âœ… ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼ˆåŸºäºå‰ä¸€ä¸ªçŠ¶æ€ï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function">(<span class="params">prevCount</span>) =&gt;</span> prevCount + <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-5-äº‹ä»¶å¤„ç†"><a href="#3-5-äº‹ä»¶å¤„ç†" class="headerlink" title="3.5 äº‹ä»¶å¤„ç†"></a><strong><font color="red">3.5 äº‹ä»¶å¤„ç†</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">EventExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æŒ‰é’®è¢«ç‚¹å‡»&quot;</span>, e);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¸¦å‚æ•°çš„äº‹ä»¶å¤„ç†</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleDelete</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤é¡¹ç›®:&quot;</span>, id);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨å•è¾“å…¥</span></span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleDelete(123)&#125;&gt;åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-6-æ¡ä»¶æ¸²æŸ“"><a href="#3-6-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.6 æ¡ä»¶æ¸²æŸ“"></a><strong><font color="red">3.6 æ¡ä»¶æ¸²æŸ“</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ConditionalExample</span>(<span class="params">&#123; isLoggedIn, messages &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* æ–¹å¼1: ä¸‰å…ƒè¿ç®—ç¬¦ */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;isLoggedIn ? <span class="tag">&lt;<span class="name">LogoutButton</span> /&gt;</span> : <span class="tag">&lt;<span class="name">LoginButton</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* æ–¹å¼2: &amp;&amp; çŸ­è·¯è¿ç®— */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;messages.length &gt; 0 &amp;&amp; <span class="tag">&lt;<span class="name">Badge</span> <span class="attr">count</span>=<span class="string">&#123;messages.length&#125;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* æ–¹å¼3: if-else æå‰è¿”å› */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        if (messages.length === 0) return <span class="tag">&lt;<span class="name">p</span>&gt;</span>æš‚æ— æ¶ˆæ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">        if (messages.length &lt; 5) return <span class="tag">&lt;<span class="name">p</span>&gt;</span>å°‘é‡æ¶ˆæ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">        return <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¤§é‡æ¶ˆæ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-7-åˆ—è¡¨æ¸²æŸ“"><a href="#3-7-åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="3.7 åˆ—è¡¨æ¸²æŸ“"></a><strong><font color="red">3.7 åˆ—è¡¨æ¸²æŸ“</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> todos = [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">&quot;å­¦ä¹  React&quot;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">&quot;å†™ä»£ç &quot;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">&quot;çœ‹æ–‡æ¡£&quot;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;todos.map((todo) =&gt; (</span></span><br><span class="line"><span class="language-xml">        // key å¿…é¡»æ˜¯å”¯ä¸€ä¸”ç¨³å®šçš„æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">className</span>=<span class="string">&#123;todo.done</span> ? &quot;<span class="attr">completed</span>&quot; <span class="attr">:</span> &quot;&quot;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;todo.text&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ <strong>key çš„é‡è¦æ€§</strong>ï¼škey å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œé¿å…ä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸º keyï¼ˆé™¤éåˆ—è¡¨æ˜¯é™æ€çš„ï¼‰</p></blockquote><br><h3 id="3-8-CSS-Modules-æ ·å¼ç®¡ç†"><a href="#3-8-CSS-Modules-æ ·å¼ç®¡ç†" class="headerlink" title="3.8 CSS Modules - æ ·å¼ç®¡ç†"></a><strong><font color="red">3.8 CSS Modules - æ ·å¼ç®¡ç†</font></strong></h3><p>CSS Modules æ˜¯ä¸€ç§ CSS æ–‡ä»¶çš„æ¨¡å—åŒ–å’Œä½œç”¨åŸŸåŒ–æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥è®© CSS ç±»åè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„åç§°ï¼Œé¿å…å…¨å±€æ ·å¼å†²çªã€‚</p><h4 id="1ï¼‰ä»€ä¹ˆæ˜¯-CSS-Modulesï¼Ÿ"><a href="#1ï¼‰ä»€ä¹ˆæ˜¯-CSS-Modulesï¼Ÿ" class="headerlink" title="1ï¼‰ä»€ä¹ˆæ˜¯ CSS Modulesï¼Ÿ"></a><strong><font color="#10c300">1ï¼‰ä»€ä¹ˆæ˜¯ CSS Modulesï¼Ÿ</font></strong></h4><p>CSS Modules çš„æ ¸å¿ƒæ€æƒ³ï¼š</p><ul><li><strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒCSS ç±»ååªåœ¨å½“å‰æ¨¡å—å†…ç”Ÿæ•ˆ</li><li><strong>è‡ªåŠ¨å‘½å</strong>ï¼šæ„å»ºå·¥å…·ä¼šå°†ç±»åè½¬æ¢ä¸ºå”¯ä¸€çš„å“ˆå¸Œå€¼ï¼ˆå¦‚ <code>.button</code> â†’ <code>.Button_button__2Rx3L</code>ï¼‰</li><li><strong>æ˜¾å¼ä¾èµ–</strong>ï¼šé€šè¿‡ <code>import</code> å¼•å…¥æ ·å¼ï¼Œæ˜ç¡®ç»„ä»¶ä¸æ ·å¼çš„å…³ç³»</li><li><strong>å¯ç»„åˆæ€§</strong>ï¼šæ”¯æŒ <code>composes</code> å…³é”®å­—å®ç°æ ·å¼ç»§æ‰¿</li></ul><h4 id="2ï¼‰åŸºæœ¬ä½¿ç”¨"><a href="#2ï¼‰åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2ï¼‰åŸºæœ¬ä½¿ç”¨"></a><strong><font color="#10c300">2ï¼‰åŸºæœ¬ä½¿ç”¨</font></strong></h4><p><strong>Step 1ï¸âƒ£ï¼šåˆ›å»º CSS Module æ–‡ä»¶</strong></p><p>æ–‡ä»¶å‘½åè§„èŒƒï¼š<code>*.module.css</code>ï¼ˆVite å’Œ CRA éƒ½é»˜è®¤æ”¯æŒï¼‰</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Button.module.css */</span></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#007bff</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#0056b3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.primary</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#28a745</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.danger</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#dc3545</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Step 2ï¸âƒ£ï¼šåœ¨ç»„ä»¶ä¸­å¯¼å…¥å¹¶ä½¿ç”¨</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; type = <span class="string">&quot;default&quot;</span>, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;styles.button&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Button</span>;</span><br></pre></td></tr></table></figure><p><strong>Step 3ï¸âƒ£ï¼šæŸ¥çœ‹ç¼–è¯‘åçš„ç±»å</strong></p><p>åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼Œç±»åä¼šè¢«è½¬æ¢ä¸ºç±»ä¼¼è¿™æ ·çš„å”¯ä¸€æ ‡è¯†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;Button_button__2Rx3L&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3ï¼‰åŠ¨æ€ç±»åç»„åˆ"><a href="#3ï¼‰åŠ¨æ€ç±»åç»„åˆ" class="headerlink" title="3ï¼‰åŠ¨æ€ç±»åç»„åˆ"></a><strong><font color="#10c300">3ï¼‰åŠ¨æ€ç±»åç»„åˆ</font></strong></h4><p><strong>1ï¸âƒ£ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Card.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Card</span>(<span class="params">&#123; isActive, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">styles.card</span>&#125; $&#123;<span class="attr">isActive</span> ? <span class="attr">styles.active</span> <span class="attr">:</span> &quot;&quot;&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£ä½¿ç”¨ classnames åº“ï¼ˆæ¨èï¼‰</strong></p><p>å…ˆå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install classnames</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Card.module.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&quot;classnames&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Card</span>(<span class="params">&#123; isActive, isDisabled, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&#123;classNames(styles.card,</span> &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        [<span class="attr">styles.active</span>]<span class="attr">:</span> <span class="attr">isActive</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        [<span class="attr">styles.disabled</span>]<span class="attr">:</span> <span class="attr">isDisabled</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Card</span>;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£ä½¿ç”¨ clsx åº“ï¼ˆè½»é‡æ›¿ä»£ï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install clsx</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.module.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> clsx <span class="keyword">from</span> <span class="string">&quot;clsx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; variant, size, disabled, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&#123;clsx(</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">styles.button</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">styles</span>[<span class="attr">variant</span>], // <span class="attr">åŠ¨æ€è®¿é—®æ ·å¼</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">styles</span>[<span class="attr">size</span>],</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">disabled</span> &amp;&amp; <span class="attr">styles.disabled</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      )&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰composes-æ ·å¼ç»„åˆ"><a href="#4ï¼‰composes-æ ·å¼ç»„åˆ" class="headerlink" title="4ï¼‰composes æ ·å¼ç»„åˆ"></a><strong><font color="#10c300">4ï¼‰composes æ ·å¼ç»„åˆ</font></strong></h4><p>CSS Modules æ”¯æŒ <code>composes</code> å…³é”®å­—æ¥å®ç°æ ·å¼ç»§æ‰¿å’Œç»„åˆï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Button.module.css */</span></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.primary</span> &#123;</span><br><span class="line">  composes: button;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#007bff</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.danger</span> &#123;</span><br><span class="line">  composes: button;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#dc3545</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶åªéœ€åº”ç”¨ä¸€ä¸ªç±»åï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; type &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;styles[type]&#125;</span>&gt;</span>æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line">&lt;<span class="title class_">Button</span> type=<span class="string">&quot;primary&quot;</span> /&gt;  <span class="comment">// è‡ªåŠ¨ç»§æ‰¿ button çš„æ ·å¼</span></span><br></pre></td></tr></table></figure><h4 id="5ï¼‰ä»å…¶ä»–æ–‡ä»¶ç»„åˆæ ·å¼"><a href="#5ï¼‰ä»å…¶ä»–æ–‡ä»¶ç»„åˆæ ·å¼" class="headerlink" title="5ï¼‰ä»å…¶ä»–æ–‡ä»¶ç»„åˆæ ·å¼"></a><strong><font color="#10c300">5ï¼‰ä»å…¶ä»–æ–‡ä»¶ç»„åˆæ ·å¼</font></strong></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* base.module.css */</span></span><br><span class="line"><span class="selector-class">.baseButton</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Button.module.css */</span></span><br><span class="line"><span class="selector-class">.submitButton</span> &#123;</span><br><span class="line">  composes: baseButton from <span class="string">&quot;./base.module.css&quot;</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: green;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6ï¼‰å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼æ··åˆ"><a href="#6ï¼‰å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼æ··åˆ" class="headerlink" title="6ï¼‰å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼æ··åˆ"></a><strong><font color="#10c300">6ï¼‰å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼æ··åˆ</font></strong></h4><p><strong>1ï¸âƒ£ä½¿ç”¨ <code>:global</code> å£°æ˜å…¨å±€æ ·å¼</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* App.module.css */</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å…¨å±€æ ·å¼ */</span></span><br><span class="line">:<span class="built_in">global</span>(.highlight) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¹Ÿå¯ä»¥åµŒå¥— */</span></span><br><span class="line"><span class="selector-class">.wrapper</span> :<span class="built_in">global</span>(.external-class) &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£æ··åˆä½¿ç”¨å…¨å±€ç±»åå’Œæ¨¡å—ç±»å</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./App.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">styles.container</span>&#125; <span class="attr">global-theme</span>`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span>å…¨å±€é«˜äº®<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7ï¼‰CSS-å˜é‡ä¸ä¸»é¢˜åˆ‡æ¢"><a href="#7ï¼‰CSS-å˜é‡ä¸ä¸»é¢˜åˆ‡æ¢" class="headerlink" title="7ï¼‰CSS å˜é‡ä¸ä¸»é¢˜åˆ‡æ¢"></a><strong><font color="#10c300">7ï¼‰CSS å˜é‡ä¸ä¸»é¢˜åˆ‡æ¢</font></strong></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* theme.module.css */</span></span><br><span class="line"><span class="selector-class">.light</span> &#123;</span><br><span class="line">  <span class="attr">--bg-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attr">--text-color</span>: <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dark</span> &#123;</span><br><span class="line">  <span class="attr">--bg-color</span>: <span class="number">#1a1a1a</span>;</span><br><span class="line">  <span class="attr">--text-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--bg-color);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--text-color);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./theme.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [theme, setTheme] = <span class="title function_">useState</span>(<span class="string">&quot;light&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">styles.container</span>&#125; $&#123;<span class="attr">styles</span>[<span class="attr">theme</span>]&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å½“å‰ä¸»é¢˜ï¼š&#123;theme&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTheme(theme === &quot;light&quot; ? &quot;dark&quot; : &quot;light&quot;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        åˆ‡æ¢ä¸»é¢˜</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h4 id="8ï¼‰é…åˆ-Sass-Less-ä½¿ç”¨"><a href="#8ï¼‰é…åˆ-Sass-Less-ä½¿ç”¨" class="headerlink" title="8ï¼‰é…åˆ Sass&#x2F;Less ä½¿ç”¨"></a><strong><font color="#10c300">8ï¼‰é…åˆ Sass&#x2F;Less ä½¿ç”¨</font></strong></h4><p>CSS Modules å®Œå…¨æ”¯æŒ CSS é¢„å¤„ç†å™¨ã€‚</p><p><strong>1ï¸âƒ£å®‰è£… Sass</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£åˆ›å»º SCSS Module æ–‡ä»¶</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Button.module.scss */</span></span><br><span class="line"><span class="variable">$primary-color</span>: <span class="number">#007bff</span>;</span><br><span class="line"><span class="variable">$hover-darken</span>: <span class="number">10%</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-class">.primary</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="variable">$primary-color</span>;</span><br><span class="line">    </span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="built_in">darken</span>(<span class="variable">$primary-color</span>, <span class="variable">$hover-darken</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-class">.large</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.module.scss&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; variant = <span class="string">&quot;primary&quot;</span>, size = <span class="string">&quot;medium&quot;</span>, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">styles.button</span>&#125; $&#123;<span class="attr">styles</span>[<span class="attr">variant</span>]&#125; $&#123;<span class="attr">styles</span>[<span class="attr">size</span>]&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9ï¼‰TypeScript-æ”¯æŒ"><a href="#9ï¼‰TypeScript-æ”¯æŒ" class="headerlink" title="9ï¼‰TypeScript æ”¯æŒ"></a><strong><font color="#10c300">9ï¼‰TypeScript æ”¯æŒ</font></strong></h4><p><strong>1ï¸âƒ£è‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰</strong></p><p>å®‰è£…ç±»å‹ç”Ÿæˆå·¥å…·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D typescript-plugin-css-modules</span><br></pre></td></tr></table></figure><p>é…ç½® <code>tsconfig.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typescript-plugin-css-modules&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£æ‰‹åŠ¨åˆ›å»ºç±»å‹å®šä¹‰</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Button.module.css.d.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> <span class="attr">styles</span>: &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">button</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">primary</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">danger</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">large</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">small</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> styles;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£åœ¨ TypeScript ç»„ä»¶ä¸­ä½¿ç”¨</strong></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> &#123;</span><br><span class="line">  <span class="attr">variant</span>?: <span class="string">&quot;primary&quot;</span> | <span class="string">&quot;danger&quot;</span> | <span class="string">&quot;success&quot;</span>;</span><br><span class="line">  <span class="attr">size</span>?: <span class="string">&quot;small&quot;</span> | <span class="string">&quot;medium&quot;</span> | <span class="string">&quot;large&quot;</span>;</span><br><span class="line">  <span class="attr">children</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span>: <span class="title class_">React</span>.<span class="property">FC</span>&lt;<span class="title class_">ButtonProps</span>&gt; = <span class="function">(<span class="params">&#123; </span></span></span><br><span class="line"><span class="params"><span class="function">  variant = <span class="string">&quot;primary&quot;</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">  size = <span class="string">&quot;medium&quot;</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">  children </span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">styles.button</span>&#125; $&#123;<span class="attr">styles</span>[<span class="attr">variant</span>]&#125; $&#123;<span class="attr">styles</span>[<span class="attr">size</span>]&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Button</span>;</span><br></pre></td></tr></table></figure><h4 id="10ï¼‰å®æˆ˜æ¡ˆä¾‹ï¼šå¡ç‰‡ç»„ä»¶"><a href="#10ï¼‰å®æˆ˜æ¡ˆä¾‹ï¼šå¡ç‰‡ç»„ä»¶" class="headerlink" title="10ï¼‰å®æˆ˜æ¡ˆä¾‹ï¼šå¡ç‰‡ç»„ä»¶"></a><strong><font color="#10c300">10ï¼‰å®æˆ˜æ¡ˆä¾‹ï¼šå¡ç‰‡ç»„ä»¶</font></strong></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Card.module.css */</span></span><br><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cardHeader</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#f0f0f0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cardTitle</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cardContent</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cardFooter</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.highlighted</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#007bff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f8f9ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Card.module.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&quot;classnames&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Card</span>(<span class="params">&#123; title, children, actions, highlighted = <span class="literal">false</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classNames(styles.card,</span> &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      [<span class="attr">styles.highlighted</span>]<span class="attr">:</span> <span class="attr">highlighted</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#125;)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;title &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.cardHeader&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h3</span> <span class="attr">className</span>=<span class="string">&#123;styles.cardTitle&#125;</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.cardContent&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;actions &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.cardFooter&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;actions&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Card</span>;</span><br></pre></td></tr></table></figure><h4 id="11ï¼‰é…ç½®è‡ªå®šä¹‰å“ˆå¸Œå‘½å"><a href="#11ï¼‰é…ç½®è‡ªå®šä¹‰å“ˆå¸Œå‘½å" class="headerlink" title="11ï¼‰é…ç½®è‡ªå®šä¹‰å“ˆå¸Œå‘½å"></a><strong><font color="#10c300">11ï¼‰é…ç½®è‡ªå®šä¹‰å“ˆå¸Œå‘½å</font></strong></h4><p><strong>Vite é…ç½®</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="comment">// è‡ªå®šä¹‰ç”Ÿæˆçš„ç±»åæ ¼å¼</span></span><br><span class="line">      <span class="attr">generateScopedName</span>: <span class="string">&quot;[name]__[local]___[hash:base64:5]&quot;</span>,</span><br><span class="line">      <span class="comment">// [name]: æ–‡ä»¶å</span></span><br><span class="line">      <span class="comment">// [local]: åŸå§‹ç±»å</span></span><br><span class="line">      <span class="comment">// [hash:base64:5]: 5ä½å“ˆå¸Œå€¼</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>Create React App é…ç½®</strong></p><p>CRA éœ€è¦ eject æˆ–ä½¿ç”¨ <code>craco</code> &#x2F; <code>react-app-rewired</code> æ¥ä¿®æ”¹é…ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// craco.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">style</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">localIdentName</span>: <span class="string">&quot;[name]__[local]--[hash:base64:5]&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="12ï¼‰æœ€ä½³å®è·µ"><a href="#12ï¼‰æœ€ä½³å®è·µ" class="headerlink" title="12ï¼‰æœ€ä½³å®è·µ"></a><strong><font color="#10c300">12ï¼‰æœ€ä½³å®è·µ</font></strong></h4><p><strong>1ï¸âƒ£æ–‡ä»¶å‘½åçº¦å®š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">â”œâ”€â”€ Button/</span><br><span class="line">â”‚   â”œâ”€â”€ Button.jsx</span><br><span class="line">â”‚   â”œâ”€â”€ Button.module.css</span><br><span class="line">â”‚   â””â”€â”€ index.js</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£é¿å…è¿‡åº¦åµŒå¥—</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* âŒ ä¸æ¨èï¼šé€‰æ‹©å™¨åµŒå¥—è¿‡æ·± */</span></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.content</span> <span class="selector-class">.item</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* âœ… æ¨èï¼šæ‰å¹³åŒ–ç±»å */</span></span><br><span class="line"><span class="selector-class">.container</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.itemTitle</span> &#123; &#125;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£ä½¿ç”¨è¯­ä¹‰åŒ–å‘½å</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* âŒ ä¸æ¸…æ™° */</span></span><br><span class="line"><span class="selector-class">.btn1</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.box2</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.red</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* âœ… è¯­ä¹‰åŒ– */</span></span><br><span class="line"><span class="selector-class">.submitButton</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.userCard</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.errorMessage</span> &#123; &#125;</span><br></pre></td></tr></table></figure><p><strong>4ï¸âƒ£ç»„åˆå…¨å±€æ ·å¼å’Œæ¨¡å—æ ·å¼</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./App.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// å…¨å±€é‡ç½®æ ·å¼ + æ¨¡å—æ ·å¼</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">global-reset</span> $&#123;<span class="attr">styles.container</span>&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span> <span class="attr">className</span>=<span class="string">&#123;styles.header&#125;</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5ï¸âƒ£å…±äº«å¸¸é‡ï¼ˆCSS å˜é‡ï¼‰</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* variables.module.css */</span></span><br><span class="line">:export &#123;</span><br><span class="line">  primaryColor: <span class="number">#007bff</span>;</span><br><span class="line">  successColor: <span class="number">#28a745</span>;</span><br><span class="line">  spacing: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> variables <span class="keyword">from</span> <span class="string">&quot;./variables.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">color:</span> <span class="attr">variables.primaryColor</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">padding:</span> <span class="attr">variables.spacing</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      å†…å®¹</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="13ï¼‰å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#13ï¼‰å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="13ï¼‰å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a><strong><font color="#10c300">13ï¼‰å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</font></strong></h4><p><strong>Q1: å¦‚ä½•åº”ç”¨å¤šä¸ªç±»åï¼Ÿ</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•1ï¼šæ¨¡æ¿å­—ç¬¦ä¸²</span></span><br><span class="line">&lt;div className=&#123;<span class="string">`<span class="subst">$&#123;styles.card&#125;</span> <span class="subst">$&#123;styles.active&#125;</span>`</span>&#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•2ï¼šæ•°ç»„ join</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;[styles.card,</span> <span class="attr">styles.active</span>]<span class="attr">.join</span>(&#x27; &#x27;)&#125; /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•3ï¼šclassnames åº“ï¼ˆæ¨èï¼‰</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classNames(styles.card,</span> <span class="attr">styles.active</span>)&#125; /&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>Q2: å¦‚ä½•è®¿é—®å¸¦è¿å­—ç¬¦çš„ç±»åï¼Ÿ</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Button.module.css */</span></span><br><span class="line"><span class="selector-class">.submit-button</span> &#123; &#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•1ï¼šä¸­æ‹¬å·è¯­æ³•</span></span><br><span class="line">&lt;button className=&#123;styles[<span class="string">&#x27;submit-button&#x27;</span>]&#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•2ï¼šé©¼å³°å‘½åï¼ˆæ¨èï¼‰</span></span><br><span class="line"><span class="comment">/* æ”¹ä¸º .submitButton */</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;styles.submitButton&#125;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>Q3: å¦‚ä½•åœ¨ CSS Modules ä¸­ä½¿ç”¨ä¼ªç±»å’Œä¼ªå…ƒç´ ï¼Ÿ</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Button.module.css */</span></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¼ªç±» */</span></span><br><span class="line"><span class="selector-class">.button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span><span class="selector-pseudo">:disabled</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: not-allowed;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¼ªå…ƒç´  */</span></span><br><span class="line"><span class="selector-class">.button</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Q4: å¦‚ä½•è¦†ç›–ç¬¬ä¸‰æ–¹ç»„ä»¶åº“æ ·å¼ï¼Ÿ</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* App.module.css */</span></span><br><span class="line"><span class="comment">/* ä½¿ç”¨ :global åŒ…è£¹ç¬¬ä¸‰æ–¹ç±»å */</span></span><br><span class="line"><span class="selector-class">.customModal</span> :<span class="built_in">global</span>(.ant-modal-content) &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wrapper</span> :global &#123;</span><br><span class="line">  <span class="selector-class">.mui-button</span> &#123;</span><br><span class="line">    <span class="attribute">text-transform</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./App.module.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Modal</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.customModal&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Modal</span>&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="14ï¼‰CSS-Modules-vs-å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”"><a href="#14ï¼‰CSS-Modules-vs-å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”" class="headerlink" title="14ï¼‰CSS Modules vs å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”"></a><strong><font color="#10c300">14ï¼‰CSS Modules vs å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”</font></strong></h4><table><thead><tr><th align="left">æ–¹æ¡ˆ</th><th align="left">ä¼˜åŠ¿</th><th align="left">åŠ£åŠ¿</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>CSS Modules</strong></td><td align="left">è‡ªåŠ¨ä½œç”¨åŸŸã€é›¶è¿è¡Œæ—¶ã€å­¦ä¹ æˆæœ¬ä½</td><td align="left">åŠ¨æ€æ ·å¼æ”¯æŒå¼±ã€éœ€è¦æ„å»ºå·¥å…·</td><td align="left">ä¸­å°å‹é¡¹ç›®ã€ç»„ä»¶åº“</td></tr><tr><td align="left"><strong>CSS-in-JS</strong> (styled-components)</td><td align="left">åŠ¨æ€æ ·å¼å¼ºå¤§ã€ä¸»é¢˜æ”¯æŒå¥½</td><td align="left">è¿è¡Œæ—¶å¼€é”€ã€è°ƒè¯•å›°éš¾</td><td align="left">éœ€è¦å¤§é‡åŠ¨æ€æ ·å¼çš„åº”ç”¨</td></tr><tr><td align="left"><strong>Tailwind CSS</strong></td><td align="left">å¿«é€Ÿå¼€å‘ã€è®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§</td><td align="left">HTML ç±»åå†—é•¿ã€éœ€è¦å­¦ä¹ ç±»å</td><td align="left">è¿½æ±‚å¼€å‘æ•ˆç‡çš„é¡¹ç›®</td></tr><tr><td align="left"><strong>æ™®é€š CSS</strong></td><td align="left">ç®€å•ç›´æ¥</td><td align="left">å…¨å±€æ±¡æŸ“ã€å‘½åå†²çª</td><td align="left">ç®€å•é¡µé¢ã€åŸå‹å¼€å‘</td></tr><tr><td align="left"><strong>Sass&#x2F;Less Modules</strong></td><td align="left">å˜é‡ã€åµŒå¥—ã€å‡½æ•°</td><td align="left">éœ€è¦ç¼–è¯‘ã€å­¦ä¹ æˆæœ¬</td><td align="left">å¤æ‚æ ·å¼é€»è¾‘</td></tr></tbody></table><h4 id="15ï¼‰é«˜çº§æŠ€å·§"><a href="#15ï¼‰é«˜çº§æŠ€å·§" class="headerlink" title="15ï¼‰é«˜çº§æŠ€å·§"></a><strong><font color="#10c300">15ï¼‰é«˜çº§æŠ€å·§</font></strong></h4><p><strong>1ï¸âƒ£æ¡ä»¶æ¸²æŸ“å¤æ‚æ ·å¼</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Status.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">StatusBadge</span>(<span class="params">&#123; status &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> statusClass = &#123;</span><br><span class="line">    <span class="attr">pending</span>: styles.<span class="property">pending</span>,</span><br><span class="line">    <span class="attr">success</span>: styles.<span class="property">success</span>,</span><br><span class="line">    <span class="attr">error</span>: styles.<span class="property">error</span>,</span><br><span class="line">    <span class="attr">warning</span>: styles.<span class="property">warning</span>,</span><br><span class="line">  &#125;[status];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">styles.badge</span>&#125; $&#123;<span class="attr">statusClass</span>&#125;`&#125;&gt;</span>&#123;status&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£åŠ¨ç”»ä¸è¿‡æ¸¡</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Animation.module.css */</span></span><br><span class="line"><span class="keyword">@keyframes</span> fadeIn &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">10px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fadeInElement</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadeIn <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.transition</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.4</span>, <span class="number">0</span>, <span class="number">0.2</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£å“åº”å¼è®¾è®¡</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Card.module.css */</span></span><br><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.card</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">30px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1024px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.card</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">33.333%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4ï¸âƒ£æ¡ä»¶æ ·å¼çš„æ€§èƒ½ä¼˜åŒ–</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./List.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ListItem</span>(<span class="params">&#123; item, isActive, isSelected &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// ç¼“å­˜ç±»åè®¡ç®—ç»“æœ</span></span><br><span class="line">  <span class="keyword">const</span> className = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span></span><br><span class="line">      <span class="title function_">classNames</span>(styles.<span class="property">item</span>, &#123;</span><br><span class="line">        [styles.<span class="property">active</span>]: isActive,</span><br><span class="line">        [styles.<span class="property">selected</span>]: isSelected,</span><br><span class="line">      &#125;),</span><br><span class="line">    [isActive, isSelected]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="16ï¼‰å¸¸è§é™·é˜±-âš ï¸"><a href="#16ï¼‰å¸¸è§é™·é˜±-âš ï¸" class="headerlink" title="16ï¼‰å¸¸è§é™·é˜± âš ï¸"></a><strong><font color="#10c300">16ï¼‰å¸¸è§é™·é˜± âš ï¸</font></strong></h4><p><strong>1ï¸âƒ£å¿˜è®°ä½¿ç”¨ .module.css åç¼€</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šæ²¡æœ‰ .module åç¼€ï¼Œä¼šè¢«å½“ä½œæ™®é€š CSS</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.module.css&quot;</span>;</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£ç›´æ¥ä¿®æ”¹ styles å¯¹è±¡</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šstyles æ˜¯åªè¯»çš„</span></span><br><span class="line">styles.<span class="property">button</span> = <span class="string">&quot;new-class&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šé€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line"><span class="keyword">const</span> className = <span class="string">`<span class="subst">$&#123;styles.button&#125;</span> <span class="subst">$&#123;styles.active&#125;</span>`</span>;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£åœ¨å…¨å±€æ ·å¼ä¸­ä½¿ç”¨æ¨¡å—ç±»å</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* âŒ é”™è¯¯ï¼šglobal.cssï¼ˆå…¨å±€æ ·å¼æ–‡ä»¶ï¼‰ */</span></span><br><span class="line"><span class="selector-class">.Button_button__2Rx3L</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red; <span class="comment">/* å“ˆå¸Œå€¼ä¼šå˜ï¼Œæ— æ³•å®šä½ */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* âœ… æ­£ç¡®ï¼šä½¿ç”¨è¯­ä¹‰åŒ–çš„å…¨å±€ç±»æˆ– data å±æ€§ */</span></span><br><span class="line"><span class="selector-attr">[data-component=<span class="string">&quot;button&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»„ä»¶ä¸­æ·»åŠ  data å±æ€§</span></span><br><span class="line">&lt;button className=&#123;styles.<span class="property">button</span>&#125; data-component=<span class="string">&quot;button&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p><strong>4ï¸âƒ£åœ¨ CSS Modules ä¸­å¼•ç”¨å›¾ç‰‡è·¯å¾„é—®é¢˜</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* âŒ å¯èƒ½å¤±æ•ˆ */</span></span><br><span class="line"><span class="selector-class">.background</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">./images/bg.png</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* âœ… ä½¿ç”¨åˆ«åæˆ–ç»å¯¹è·¯å¾„ */</span></span><br><span class="line"><span class="selector-class">.background</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">@/assets/images/bg.png</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Hero.module.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> bgImage <span class="keyword">from</span> <span class="string">&quot;./images/bg.png&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hero</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&#123;styles.hero&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">backgroundImage:</span> `<span class="attr">url</span>($&#123;<span class="attr">bgImage</span>&#125;)` &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      å†…å®¹</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="17ï¼‰è°ƒè¯•æŠ€å·§"><a href="#17ï¼‰è°ƒè¯•æŠ€å·§" class="headerlink" title="17ï¼‰è°ƒè¯•æŠ€å·§"></a><strong><font color="#10c300">17ï¼‰è°ƒè¯•æŠ€å·§</font></strong></h4><p><strong>1ï¸âƒ£æŸ¥çœ‹ç¼–è¯‘åçš„ç±»å</strong></p><p>åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æ£€æŸ¥å…ƒç´ ï¼Œå¯ä»¥çœ‹åˆ°å®é™…çš„ç±»åï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;Button_button__2Rx3L Button_primary__3kM9x&quot;</span>&gt;</span>ç‚¹å‡»<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨å¯è¯»çš„ç±»å</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">generateScopedName</span>: </span><br><span class="line">        process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span></span><br><span class="line">          ? <span class="string">&quot;[hash:base64:8]&quot;</span>  <span class="comment">// ç”Ÿäº§ï¼šçŸ­å“ˆå¸Œ</span></span><br><span class="line">          : <span class="string">&quot;[name]__[local]___[hash:base64:5]&quot;</span>, <span class="comment">// å¼€å‘ï¼šå¯è¯»</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£ä½¿ç”¨ console.log æŸ¥çœ‹ styles å¯¹è±¡</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./Button.module.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(styles);</span><br><span class="line"><span class="comment">// è¾“å‡º: &#123; button: &quot;Button_button__2Rx3L&quot;, primary: &quot;Button_primary__3kM9x&quot; &#125;</span></span><br></pre></td></tr></table></figure><h4 id="18ï¼‰æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#18ï¼‰æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="18ï¼‰æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a><strong><font color="#10c300">18ï¼‰æ€§èƒ½ä¼˜åŒ–å»ºè®®</font></strong></h4><ol><li><p><strong>æŒ‰éœ€å¯¼å…¥</strong>ï¼šå¦‚æœåªéœ€è¦å°‘æ•°å‡ ä¸ªç±»åï¼Œå¯ä»¥ä½¿ç”¨è§£æ„</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; button, primary &#125; <span class="keyword">from</span> <span class="string">&quot;./Button.module.css&quot;</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>é¿å…åœ¨å¾ªç¯ä¸­åŠ¨æ€è®¡ç®—ç±»å</strong>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½è®¡ç®—</span></span><br><span class="line">&#123;items.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;item.active</span> ? <span class="attr">styles.active</span> <span class="attr">:</span> <span class="attr">styles.inactive</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">))&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">// âœ… é¢„å…ˆè®¡ç®—æˆ–ä½¿ç”¨ useMemo</span></span><br><span class="line"><span class="language-xml">const getItemClass = useCallback((active) =&gt; </span></span><br><span class="line"><span class="language-xml">  active ? styles.active : styles.inactive, </span></span><br><span class="line"><span class="language-xml">[]);</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ç”Ÿäº§ç¯å¢ƒå‹ç¼©ç±»å</strong>ï¼šç¡®ä¿æ„å»ºå·¥å…·ç”ŸæˆçŸ­å“ˆå¸Œä»¥å‡å° HTML ä½“ç§¯</p></li></ol><hr><br><h2 id="å››ã€-React-Hooks-è¯¦è§£"><a href="#å››ã€-React-Hooks-è¯¦è§£" class="headerlink" title="å››ã€ React Hooks è¯¦è§£"></a><strong>å››ã€ React Hooks è¯¦è§£</strong></h2><p>Hooks æ˜¯ React 16.8 å¼•å…¥çš„ç‰¹æ€§ï¼Œè®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React ç‰¹æ€§ã€‚</p><h3 id="4-1-useState-çŠ¶æ€ç®¡ç†"><a href="#4-1-useState-çŠ¶æ€ç®¡ç†" class="headerlink" title="4.1 useState - çŠ¶æ€ç®¡ç†"></a><strong><font color="red">4.1 useState - çŠ¶æ€ç®¡ç†</font></strong></h3><p><code>useState</code> æ˜¯ä¸€ä¸ª React Hookï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å£°æ˜å’Œç®¡ç†<strong>çŠ¶æ€ï¼ˆstateï¼‰</strong>ï¼ˆ ä¸€å®šè¦åœ¨**<code>ç»„ä»¶é¡¶å±‚</code>**è°ƒç”¨ï¼‰</p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(initialValue);</span><br></pre></td></tr></table></figure><ul><li>initialArgï¼šå®šä¹‰çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•°æ®ï¼Œåƒæ•°å­—ï¼Œå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„å’Œå¯¹è±¡ã€‚</li><li>useState ()æ–¹æ³•çš„è¿”å›å€¼ä¸ºç”±ä¸¤ä¸ªå€¼ç»„æˆçš„æ•°ç»„<ol><li><code>state</code>ï¼šå½“å‰çŠ¶æ€å€¼ï¼šåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œå®ƒå°†ä¸ä½ ä¼ é€’çš„ <code>initialArg</code> ç›¸åŒ¹é…ã€‚</li><li><code>setState</code>ï¼šæ›´æ–°çŠ¶æ€çš„å‡½æ•°ï¼šå®ƒå¯ä»¥è®©ä½ å°† state æ›´æ–°ä¸ºä¸åŒçš„å€¼å¹¶è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</li></ol></li></ul><h4 id="2ï¼‰åŸºæœ¬ç”¨æ³•"><a href="#2ï¼‰åŸºæœ¬ç”¨æ³•" class="headerlink" title="2ï¼‰åŸºæœ¬ç”¨æ³•"></a><strong><font color="#10c300">2ï¼‰åŸºæœ¬ç”¨æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;ç‚¹å‡»äº† &#123;count&#125; æ¬¡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰æ ¸å¿ƒç‰¹æ€§è¯¦è§£"><a href="#3ï¼‰æ ¸å¿ƒç‰¹æ€§è¯¦è§£" class="headerlink" title="3ï¼‰æ ¸å¿ƒç‰¹æ€§è¯¦è§£"></a><strong><font color="#10c300">3ï¼‰æ ¸å¿ƒç‰¹æ€§è¯¦è§£</font></strong></h4><p><strong>1ï¸âƒ£ çŠ¶æ€æ˜¯éš”ç¦»çš„</strong></p><p>æ¯ä¸ªç»„ä»¶å®ä¾‹æ‹¥æœ‰ç‹¬ç«‹çš„çŠ¶æ€ï¼Œäº’ä¸å½±å“ã€‚</p><hr><p><strong>2ï¸âƒ£ çŠ¶æ€æ›´æ–°æ˜¯æ›¿æ¢è€Œéåˆå¹¶</strong></p><p>ä¸ class ç»„ä»¶çš„ <code>setState</code> ä¸åŒï¼Œ<code>useState</code> ä¸ä¼šè‡ªåŠ¨åˆå¹¶å¯¹è±¡ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šè¿™ä¼šä¸¢å¤± age å­—æ®µ</span></span><br><span class="line"><span class="title function_">setUser</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;æå››&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šéœ€è¦æ‰‹åŠ¨å±•å¼€</span></span><br><span class="line"><span class="title function_">setUser</span>(&#123; ...user, <span class="attr">name</span>: <span class="string">&quot;æå››&quot;</span> &#125;);</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£ å‡½æ•°å¼æ›´æ–°ï¼ˆè§£å†³é—­åŒ…é—®é¢˜ï¼‰</strong></p><p>å½“æ–°çŠ¶æ€ä¾èµ–æ—§çŠ¶æ€æ—¶ï¼Œä½¿ç”¨å‡½æ•°å½¢å¼é¿å…é—­åŒ…é™·é˜±ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">incrementTwice</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// âŒ é—®é¢˜ï¼šä¸¤æ¬¡éƒ½åŸºäº count=0ï¼Œç»“æœè¿˜æ˜¯ 1</span></span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// âœ… æ­£ç¡®ï¼šåŸºäºæœ€æ–°çŠ¶æ€æ›´æ–°</span></span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> prev + <span class="number">1</span>);</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> prev + <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;incrementTwice&#125;</span>&gt;</span>+2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>4ï¸âƒ£æƒ°æ€§åˆå§‹åŒ–</strong></p><p>å¦‚æœåˆå§‹çŠ¶æ€éœ€è¦å¤æ‚è®¡ç®—ï¼Œä½¿ç”¨å‡½æ•°é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ heavyComputation()</span></span><br><span class="line"><span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="title function_">heavyComputation</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… åªåœ¨åˆå§‹æ¸²æŸ“æ‰§è¡Œä¸€æ¬¡ï¼Œå› ä¸ºåˆå§‹åŒ–çš„æ—¶å€™å‡½æ•°éƒ½ä¼šåˆ›å»ºæ–°çš„å¼•ç”¨åœ°å€</span></span><br><span class="line"><span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> <span class="title function_">heavyComputation</span>());</span><br></pre></td></tr></table></figure><hr><p><strong>5ï¸âƒ£æ•°ç»„&#x2F;å¯¹è±¡æ›´æ–°æŠ€å·§</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [list, setList] = <span class="title function_">useState</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> [map, setMap] = <span class="title function_">useState</span>(<span class="keyword">new</span> <span class="title class_">Map</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addItem</span> = (<span class="params">item</span>) =&gt; <span class="title function_">setList</span>([...list, item]);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">removeItem</span> = (<span class="params">index</span>) =&gt; <span class="title function_">setList</span>(list.<span class="title function_">filter</span>(<span class="function">(<span class="params">_, i</span>) =&gt;</span> i !== index));</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">updateItem</span> = (<span class="params">index, value</span>) =&gt;</span><br><span class="line">  <span class="title function_">setList</span>(list.<span class="title function_">map</span>(<span class="function">(<span class="params">item, i</span>) =&gt;</span> (i === index ? value : item)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Map/Set æ“ä½œï¼ˆéœ€è¦æ–°å¼•ç”¨æ‰ä¼šè§¦å‘æ›´æ–°ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addToMap</span> = (<span class="params">k, v</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> newMap = <span class="keyword">new</span> <span class="title class_">Map</span>(map);</span><br><span class="line">  newMap.<span class="title function_">set</span>(k, v);</span><br><span class="line">  <span class="title function_">setMap</span>(newMap);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰TypeScript-æ”¯æŒ"><a href="#4ï¼‰TypeScript-æ”¯æŒ" class="headerlink" title="4ï¼‰TypeScript æ”¯æŒ"></a><strong><font color="#10c300">4ï¼‰TypeScript æ”¯æŒ</font></strong></h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºç¡€ç±»å‹æ¨æ–­</span></span><br><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>); <span class="comment">// number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è”åˆç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> [status, setStatus] = useState&lt;<span class="string">&quot;idle&quot;</span> | <span class="string">&quot;loading&quot;</span> | <span class="string">&quot;success&quot;</span>&gt;(<span class="string">&quot;idle&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡ç±»å‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [user, setUser] = useState&lt;<span class="title class_">User</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœåˆå§‹å€¼ä¸º undefinedï¼Œéœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> [value, setValue] = useState&lt;<span class="built_in">string</span>&gt;();</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆâš ï¸"><a href="#5ï¼‰å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆâš ï¸" class="headerlink" title="5ï¼‰å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆâš ï¸"></a><strong><font color="#10c300">5ï¼‰å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆâš ï¸</font></strong></h4><p><strong>é™·é˜± 1ï¸âƒ£ï¼šé—­åŒ…è¿‡æœŸ</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count); <span class="comment">// æ°¸è¿œæ˜¯æ—§å€¼</span></span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>); <span class="comment">// æ°¸è¿œåŸºäºåˆå§‹å€¼</span></span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;, []); <span class="comment">// ç©ºä¾èµ–å¯¼è‡´é—­åŒ…é™·é˜±</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å†³ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°æˆ–æ­£ç¡®è®¾ç½®ä¾èµ–</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c + <span class="number">1</span>); <span class="comment">// æ€»æ˜¯è·å–æœ€æ–°å€¼</span></span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><hr><p><strong>é™·é˜± 2ï¸âƒ£ï¼šå¼‚æ­¥æ›´æ–°ç‰¹æ€§</strong></p><p>çŠ¶æ€æ›´æ–°æ˜¯å¼‚æ­¥ä¸”æ‰¹å¤„ç†çš„ï¼Œä¸èƒ½ç«‹å³è·å–æ–°å€¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(count); <span class="comment">// è¿˜æ˜¯æ—§å€¼ï¼</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚éœ€åŸºäºæ–°å€¼æ“ä½œï¼Œä½¿ç”¨ useEffect æˆ–å‡½æ•°å¼æ›´æ–°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><p><strong>é™·é˜± 3ï¸âƒ£ï¼šå¯¹è±¡å¼•ç”¨ä¸å˜ä¸è§¦å‘æ›´æ–°</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [items, setItems] = <span class="title function_">useState</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">wrongUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  items.<span class="title function_">push</span>(<span class="number">4</span>); <span class="comment">// ä¿®æ”¹åŸæ•°ç»„</span></span><br><span class="line">  <span class="title function_">setItems</span>(items); <span class="comment">// å¼•ç”¨ç›¸åŒï¼ŒReact ä¸é‡æ–°æ¸²æŸ“</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">correctUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setItems</span>([...items, <span class="number">4</span>]); <span class="comment">// æ–°æ•°ç»„å¼•ç”¨</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="6ï¼‰æœ€ä½³å®è·µ"><a href="#6ï¼‰æœ€ä½³å®è·µ" class="headerlink" title="6ï¼‰æœ€ä½³å®è·µ"></a><strong><font color="#10c300">6ï¼‰æœ€ä½³å®è·µ</font></strong></h4><p><strong>1ï¸âƒ£ åˆç†æ‹†åˆ†çŠ¶æ€ï¼š</strong> ä¸è¦æŠŠæ‰€æœ‰çŠ¶æ€å¡åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œç‹¬ç«‹å˜åŒ–çš„çŠ¶æ€åº”è¯¥ç‹¬ç«‹å£°æ˜</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ è¿‡åº¦èšåˆ</span></span><br><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(&#123; <span class="attr">user</span>: <span class="literal">null</span>, <span class="attr">posts</span>: [], <span class="attr">loading</span>: <span class="literal">false</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… ç‹¬ç«‹å£°æ˜</span></span><br><span class="line"><span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> [posts, setPosts] = <span class="title function_">useState</span>([]);</span><br><span class="line"><span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£ ä½¿ç”¨è‡ªå®šä¹‰ Hook å°è£…çŠ¶æ€é€»è¾‘</strong>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params">initial = <span class="number">0</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(initial);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">inc</span> = (<span class="params"></span>) =&gt; <span class="title function_">setCount</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">dec</span> = (<span class="params"></span>) =&gt; <span class="title function_">setCount</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">reset</span> = (<span class="params"></span>) =&gt; <span class="title function_">setCount</span>(initial);</span><br><span class="line">  <span class="keyword">return</span> &#123; count, inc, dec, reset &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£ é¿å…æ·±å±‚åµŒå¥—çŠ¶æ€</strong>ï¼šå¤æ‚çŠ¶æ€è€ƒè™‘ä½¿ç”¨ <code>useReducer</code></p><p><code>useState</code> é€‚ç”¨äºç®€å•çŠ¶æ€ç®¡ç†ï¼Œå½“çŠ¶æ€é€»è¾‘å¤æ‚æˆ–å¤šä¸ªçŠ¶æ€ç›¸äº’å…³è”æ—¶ï¼Œè€ƒè™‘å‡çº§åˆ° <code>useReducer</code>ã€‚</p><br><h3 id="4-2-useEffect-å‰¯ä½œç”¨å¤„ç†"><a href="#4-2-useEffect-å‰¯ä½œç”¨å¤„ç†" class="headerlink" title="4.2 useEffect-å‰¯ä½œç”¨å¤„ç†"></a><strong><font color="red">4.2 useEffect-å‰¯ä½œç”¨å¤„ç†</font></strong></h3><p>å®ƒè®©å‡½æ•°ç»„ä»¶èƒ½å¤Ÿåœ¨<strong>æ¸²æŸ“åæ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼ˆside effectsï¼‰</strong>ï¼Œæ¯”å¦‚ï¼šç½‘ç»œè¯·æ±‚ã€DOM æ“ä½œã€äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ã€æ•°æ®è®¢é˜…ç­‰ã€‚</p><p>å‡½æ•°ç»„ä»¶é‡Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆåƒç±»ç»„ä»¶çš„ <code>componentDidMount</code>ã€<code>componentWillUnmount</code>ï¼‰ï¼›React æä¾› <code>useEffect</code> æ¥æ›¿ä»£å®ƒä»¬ã€‚</p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-1"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-1" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç†å‰¯ä½œç”¨é€»è¾‘ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [dependencies]);</span><br></pre></td></tr></table></figure><ul><li>**å‚æ•°1 (å‡½æ•°)ï¼š**å®šä¹‰çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•°æ®ï¼Œåƒæ•°å­—ï¼Œå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„å’Œå¯¹è±¡ã€‚</li><li><strong>å‚æ•°2 (ä¾èµ–é¡¹)ï¼š</strong><ol><li><code>æ— å‚æ•°</code>ï¼šæ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œã€‚</li><li><code>ç©ºæ•°ç»„</code>ï¼šä»…åœ¨æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</li><li><code>ä¾èµ–å‚æ•°</code>ï¼šä¾èµ–å‚æ•°å˜åŒ–æ—¶æ‰§è¡Œï¼ˆé¦–æ¬¡æ¸²æŸ“ä¹Ÿä¼šæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚</li></ol></li></ul><h4 id="2ï¼‰ä¸‰ç§æ‰§è¡Œæ—¶æœº"><a href="#2ï¼‰ä¸‰ç§æ‰§è¡Œæ—¶æœº" class="headerlink" title="2ï¼‰ä¸‰ç§æ‰§è¡Œæ—¶æœº"></a><strong><font color="#10c300">2ï¼‰ä¸‰ç§æ‰§è¡Œæ—¶æœº</font></strong></h4><p><strong>1ï¸âƒ£ ä¸å¸¦ä¾èµ– â†’ æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸å†™ä¾èµ–æ•°ç»„æ—¶ï¼Œæ„å‘³ç€ï¼š</p><ul><li>æ¯æ¬¡ç»„ä»¶<strong>æŒ‚è½½å’Œæ›´æ–°</strong>éƒ½ä¼šè¿è¡Œã€‚<br>âš ï¸ å¦‚æ— å¿…è¦ï¼Œä¸å»ºè®®çœç•¥ä¾èµ–æ•°ç»„ï¼Œä¼šå½±å“æ€§èƒ½ã€‚</li></ul><hr><p><strong>2ï¸âƒ£ ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç»„ä»¶æŒ‚è½½&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç»„ä»¶å¸è½½&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []); <span class="comment">// ç©ºä¾èµ–æ•°ç»„ â†’ åªæ‰§è¡Œä¸€æ¬¡</span></span><br></pre></td></tr></table></figure><p>å¯ç±»æ¯”äºï¼š</p><ul><li>æŒ‚è½½æ—¶æ‰§è¡Œï¼š<code>componentDidMount</code></li><li>å¸è½½æ—¶æ¸…ç†ï¼š<code>componentWillUnmount</code></li></ul><hr><p><strong>3ï¸âƒ£ ç‰¹å®šä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`count æ›´æ–°äº†ï¼š<span class="subst">$&#123;count&#125;</span>`</span>);</span><br><span class="line">&#125;, [count]); <span class="comment">// ğŸ‘ˆ å½“ count æ”¹å˜é‡æ–°è¿è¡Œå‰¯ä½œç”¨é€»è¾‘</span></span><br></pre></td></tr></table></figure><h4 id="3ï¼‰æ¸…ç†å‡½æ•°ï¼ˆCleanupï¼‰"><a href="#3ï¼‰æ¸…ç†å‡½æ•°ï¼ˆCleanupï¼‰" class="headerlink" title="3ï¼‰æ¸…ç†å‡½æ•°ï¼ˆCleanupï¼‰"></a><strong><font color="#10c300">3ï¼‰æ¸…ç†å‡½æ•°ï¼ˆCleanupï¼‰</font></strong></h4><p>å½“**<code>å–æ¶ˆè®¢é˜…</code><strong>ã€</strong><code>æ¸…é™¤å®šæ—¶å™¨</code>**ç­‰ï¼Œåº”è¯¥åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†ï¼Œä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;tick&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æˆ–ä¾èµ–å˜åŒ–å‰æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å®šæ—¶å™¨å·²æ¸…ç†&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p><strong>ğŸ”æ‰§è¡Œæ—¶æœº</strong>ï¼š</p><ul><li>ç»„ä»¶å¸è½½æ—¶</li><li>ä¾èµ–å˜åŒ–å¯¼è‡´é‡æ–°æ‰§è¡Œ effect ä¹‹å‰</li></ul><h4 id="4ï¼‰å®é™…åº”ç”¨åœºæ™¯"><a href="#4ï¼‰å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="4ï¼‰å®é™…åº”ç”¨åœºæ™¯"></a><strong><font color="#10c300">4ï¼‰å®é™…åº”ç”¨åœºæ™¯</font></strong></h4><p><strong>1ï¸âƒ£ æ•°æ®è·å–ï¼ˆéœ€å¤„ç†ç«æ€ï¼‰</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> cancelled = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> api.<span class="title function_">getUser</span>(userId);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜²æ­¢ç«æ€æ¡ä»¶ï¼šå¦‚æœç»„ä»¶å·²å¸è½½æˆ– userId å·²å˜ï¼Œå¿½ç•¥ç»“æœ</span></span><br><span class="line">    <span class="keyword">if</span> (!cancelled) &#123;</span><br><span class="line">      <span class="title function_">setUser</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">fetchData</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    cancelled = <span class="literal">true</span>; <span class="comment">// å–æ¶ˆæ ‡å¿—</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [userId]);</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£äº‹ä»¶ç›‘å¬</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleScroll</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setScrollY</span>(<span class="variable language_">window</span>.<span class="property">scrollY</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;scroll&quot;</span>, handleScroll);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¿…é¡»æ¸…ç†ï¼Œå¦åˆ™é‡å¤æŒ‚è½½ä¼šæ·»åŠ å¤šä¸ªç›‘å¬å™¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;scroll&quot;</span>, handleScroll);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£DOM æ“ä½œ</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç›´æ¥æ“ä½œ DOMï¼ˆåº”å°½é‡é¿å…ï¼Œä½†åœ¨ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆæ—¶æœ‰ç”¨ï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;modal&quot;</span>);</span><br><span class="line">  element?.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    element?.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰å¸¸è§é™·é˜±âš ï¸"><a href="#5ï¼‰å¸¸è§é™·é˜±âš ï¸" class="headerlink" title="5ï¼‰å¸¸è§é™·é˜±âš ï¸"></a><strong><font color="#10c300">5ï¼‰å¸¸è§é™·é˜±âš ï¸</font></strong></h4><p><strong>1ï¸âƒ£æ— é™å¾ªç¯</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šsetState å¯¼è‡´æ¸²æŸ“ï¼Œæ¸²æŸ“è§¦å‘ effectï¼Œeffect åˆ setState</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">&#125;, [count]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°æˆ–æ¡ä»¶åˆ¤æ–­</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">setCount</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c + <span class="number">1</span>), <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">&#125;, []); <span class="comment">// æˆ– [count] å¦‚æœéœ€è¦å“åº”å¤–éƒ¨ count å˜åŒ–</span></span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£ä¾èµ–ç¼ºå¤±ï¼ˆ ESLint ä¼šè­¦å‘Šï¼‰</strong></p><p><code>eslint-plugin-react-hooks</code> è‡ªåŠ¨æ£€æŸ¥ä¾èµ–ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é—æ¼ä¾èµ–ï¼šcallback å˜åŒ–æ—¶ effect ä¸ä¼šæ›´æ–°</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fetchData</span>(query, callback);</span><br><span class="line">&#125;, [query]); <span class="comment">// ç¼ºå°‘ callback</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… è§£å†³æ–¹æ¡ˆ 1ï¼šæ·»åŠ æ‰€æœ‰ä¾èµ–</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fetchData</span>(query, callback);</span><br><span class="line">&#125;, [query, callback]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… è§£å†³æ–¹æ¡ˆ 2ï¼šå¦‚æœ callback ä¸ç¨³å®šï¼Œä½¿ç”¨ ref</span></span><br><span class="line"><span class="keyword">const</span> callbackRef = <span class="title function_">useRef</span>(callback);</span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  callbackRef.<span class="property">current</span> = callback;</span><br><span class="line">&#125;, [callback]);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fetchData</span>(query, <span class="function">(<span class="params">data</span>) =&gt;</span> callbackRef.<span class="title function_">current</span>(data));</span><br><span class="line">&#125;, [query]);</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£é—­åŒ…é™·é˜±ï¼ˆstale closureï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count); <span class="comment">// æ°¸è¿œæ˜¯æ—§å€¼ï¼</span></span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;, []); <span class="comment">// ç©ºä¾èµ–å¯¼è‡´é—­åŒ…æ•è·åˆå§‹ count</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… è§£å†³æ–¹æ¡ˆ 1ï¼šæ·»åŠ ä¾èµ–</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;, [count]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… è§£å†³æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ ref è·å–æœ€æ–°å€¼</span></span><br><span class="line"><span class="keyword">const</span> countRef = <span class="title function_">useRef</span>(count);</span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  countRef.<span class="property">current</span> = count;</span><br><span class="line">&#125;, [count]);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(countRef.<span class="property">current</span>); <span class="comment">// æ€»æ˜¯æœ€æ–°å€¼</span></span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><hr><p><strong>4ï¸âƒ£async&#x2F;await ç›´æ¥ä½¿ç”¨</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šuseEffect ä¸èƒ½è¿”å› Promiseï¼ˆasync å‡½æ•°éšå¼è¿”å› Promiseï¼‰</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchData</span>();</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šå†…éƒ¨å®šä¹‰ async å‡½æ•°</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchData</span>();</span><br><span class="line">    <span class="title function_">setData</span>(data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">loadData</span>();</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h4 id="6ï¼‰useEffect-vs-useLayoutEffect"><a href="#6ï¼‰useEffect-vs-useLayoutEffect" class="headerlink" title="6ï¼‰useEffect vs useLayoutEffect"></a><strong><font color="#10c300">6ï¼‰useEffect vs useLayoutEffect</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useLayoutEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// useEffectï¼šæµè§ˆå™¨ç»˜åˆ¶å®Œæˆåæ‰§è¡Œï¼ˆä¸é˜»å¡æ¸²æŸ“ï¼‰</span></span><br><span class="line"><span class="comment">// useLayoutEffectï¼šæµè§ˆå™¨ç»˜åˆ¶ä¹‹å‰æ‰§è¡Œï¼ˆé˜»å¡æ¸²æŸ“ï¼Œé¿å…é—ªçƒï¼‰</span></span><br><span class="line"><span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç”¨äºéœ€è¦åŒæ­¥æ‰§è¡Œä¸”å½±å“è§†è§‰çš„ DOM æ“ä½œ</span></span><br><span class="line">  <span class="keyword">const</span> width = element.<span class="title function_">getBoundingClientRect</span>().<span class="property">width</span>;</span><br><span class="line">  <span class="title function_">setWidth</span>(width);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š</p><ul><li>ä¼˜å…ˆä½¿ç”¨ <code>useEffect</code></li><li>ä»…åœ¨å‡ºç°è§†è§‰é—ªçƒï¼ˆå¦‚ä»æœåŠ¡ç«¯æ¸²æŸ“æ¢å¤æ—¶éœ€è¦åŒæ­¥è®¡ç®—å¸ƒå±€ï¼‰æ—¶ä½¿ç”¨ <code>useLayoutEffect</code></li></ul><h4 id="7ï¼‰TypeScript-æ”¯æŒ"><a href="#7ï¼‰TypeScript-æ”¯æŒ" class="headerlink" title="7ï¼‰TypeScript æ”¯æŒ"></a><strong><font color="#10c300">7ï¼‰TypeScript æ”¯æŒ</font></strong></h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¸…ç†å‡½æ•°ç±»å‹ä¼šè‡ªåŠ¨æ¨æ–­</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> subscription = api.<span class="title function_">subscribe</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscription.<span class="title function_">unsubscribe</span>(); <span class="comment">// ç±»å‹å®‰å…¨</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾èµ–æ•°ç»„ä¸¥æ ¼ç±»å‹æ£€æŸ¥</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">&#125;, [name]); <span class="comment">// name å¿…é¡»æ˜¯ä¾èµ–é¡¹</span></span><br></pre></td></tr></table></figure><h4 id="8ï¼‰æœ€ä½³å®è·µ"><a href="#8ï¼‰æœ€ä½³å®è·µ" class="headerlink" title="8ï¼‰æœ€ä½³å®è·µ"></a><strong><font color="#10c300">8ï¼‰æœ€ä½³å®è·µ</font></strong></h4><p>1ï¸âƒ£<strong>å•ä¸€èŒè´£</strong>ï¼šä¸€ä¸ª <code>useEffect</code> åªåšä¸€ä»¶äº‹ï¼Œä¾¿äºç®¡ç†å’Œæ¸…ç†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ æ··åˆå¤šä¸ªä¸ç›¸å…³é€»è¾‘</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fetchUser</span>();</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(poll, <span class="number">5000</span>);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&quot;New Page&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… åˆ†ç¦»æˆå¤šä¸ª effect</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fetchUser</span>();</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(poll, <span class="number">5000</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&quot;New Page&quot;</span>;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><hr><p>2ï¸âƒ£<strong>è‡ªå®šä¹‰ Hook å°è£…å‰¯ä½œç”¨</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useWindowSize</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [size, setSize] = <span class="title function_">useState</span>(&#123; <span class="attr">width</span>: <span class="number">0</span>, <span class="attr">height</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">update</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">      <span class="title function_">setSize</span>(&#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="variable language_">window</span>.<span class="property">innerWidth</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="variable language_">window</span>.<span class="property">innerHeight</span>,</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, update);</span><br><span class="line">    <span class="title function_">update</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;resize&quot;</span>, update);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>3ï¸âƒ£<strong>å¯¹è±¡&#x2F;æ•°ç»„ä¾èµ–ä½¿ç”¨ useMemo</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°å¯¹è±¡ï¼Œå¯¼è‡´ effect æ¯æ¬¡éƒ½æ‰§è¡Œ</span><br><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">    fetchData(options);</span><br><span class="line">&#125;, [&#123; page: 1, size: 10 &#125;]);</span><br><span class="line"></span><br><span class="line">// âœ… ä½¿ç”¨ useMemo ç¨³å®šå¼•ç”¨</span><br><span class="line">const options = useMemo(() =&gt; (&#123; page: 1, size: 10 &#125;), []);</span><br><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">    fetchData(options);</span><br><span class="line">&#125;, [options]);</span><br></pre></td></tr></table></figure><br><h3 id="4-3-useContext-è·¨ç»„ä»¶å…±äº«çŠ¶æ€"><a href="#4-3-useContext-è·¨ç»„ä»¶å…±äº«çŠ¶æ€" class="headerlink" title="4.3 useContext - è·¨ç»„ä»¶å…±äº«çŠ¶æ€"></a><strong><font color="red">4.3 useContext - è·¨ç»„ä»¶å…±äº«çŠ¶æ€</font></strong></h3><p>å®ƒä¸»è¦ç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­<strong>å…±äº«æ•°æ®</strong>ï¼Œ<strong>é¿å…å±‚å±‚ä¼ é€’ propsï¼ˆâ€œprops drillingâ€ï¼‰çš„é—®é¢˜</strong>ã€‚</p><p>åœ¨ React åº”ç”¨ä¸­ï¼Œå¦‚æœå¾ˆå¤šå±‚ç»„ä»¶ä¹‹é—´éƒ½éœ€è¦å…±äº«æŸä¸ªæ•°æ®ï¼ˆæ¯”å¦‚ä¸»é¢˜ã€è¯­è¨€ã€ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œç›´æ¥é€šè¿‡ props ä¸€å±‚å±‚å¾€ä¸‹ä¼ ä¼šéå¸¸éº»çƒ¦ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">App</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Content</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">App</span>&gt;</span><br></pre></td></tr></table></figure><p>ğŸ‘† æ¯å±‚éƒ½è¦ä¼  <code>theme</code>ï¼Œè¿™å°±æ˜¯ <strong>props drilling</strong>ã€‚</p><p>React æä¾› <strong>Context</strong>ï¼Œå¯ä»¥è®©ä½ åœ¨ç»„ä»¶æ ‘é—´<strong>ç›´æ¥å…±äº«æ•°æ®ï¼Œä¸å¿…å±‚å±‚ä¼ é€’</strong>ã€‚</p><h4 id="1ï¼‰åŸºç¡€ç”¨æ³•-ä½¿ç”¨æ­¥éª¤"><a href="#1ï¼‰åŸºç¡€ç”¨æ³•-ä½¿ç”¨æ­¥éª¤" class="headerlink" title="1ï¼‰åŸºç¡€ç”¨æ³•(ä½¿ç”¨æ­¥éª¤)"></a><strong><font color="#10c300">1ï¼‰åŸºç¡€ç”¨æ³•(ä½¿ç”¨æ­¥éª¤)</font></strong></h4><p><strong>Step 1ï¸âƒ£ï¼šåˆ›å»º Context</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src\context\index.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; createContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="title class_">MyContext</span> &#125;;</span><br></pre></td></tr></table></figure><p><strong>Step 2ï¸âƒ£ï¼šä¸Šå±‚ç»„ä»¶æä¾›æ•°æ®</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">GrandChild</span> <span class="keyword">from</span> <span class="string">&quot;./components/GrandChild&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./context/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data] = <span class="title function_">useState</span>(<span class="string">&quot;å¤§é±¼æµ·æ£ &quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;data&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">GrandChild</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><strong>Step 3ï¸âƒ£ï¼šå­ç»„ä»¶</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span>;</span><br></pre></td></tr></table></figure><p><strong>Step 4ï¸âƒ£ï¼šå­™ç»„ä»¶ä½¿ç”¨ <code>useContext</code> è·å–å€¼</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../context/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GrandChild</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è¿™æ˜¯app.jsxä¸­ä¼ æ¥çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å­™ç»„ä»¶ï¼Œçº¢è‰²éƒ¨åˆ†æ˜¯é¡¶çº§ç»„ä»¶æ•°æ®ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> &#x27;<span class="attr">red</span>&#x27;&#125;&#125;&gt;</span>&#123;data&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> defau lt <span class="title class_">GrandChild</span></span><br></pre></td></tr></table></figure><h4 id="2ï¼‰è‡ªå®šä¹‰-Hook-å°è£…ï¼ˆæ¨èï¼‰"><a href="#2ï¼‰è‡ªå®šä¹‰-Hook-å°è£…ï¼ˆæ¨èï¼‰" class="headerlink" title="2ï¼‰è‡ªå®šä¹‰ Hook å°è£…ï¼ˆæ¨èï¼‰"></a><strong><font color="#10c300">2ï¼‰è‡ªå®šä¹‰ Hook å°è£…ï¼ˆæ¨èï¼‰</font></strong></h4><p>ç›´æ¥ <code>useContext</code> éœ€è¦åœ¨æ¯ä¸ªç»„ä»¶å¤„ç† <code>null</code>ï¼Œå°è£…æ›´å®‰å…¨ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// contexts/ThemeContext.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createContext, useState, useContext, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ Hookï¼Œå†…ç½®é”™è¯¯å¤„ç†</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useTheme</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> context = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line">  <span class="keyword">if</span> (!context) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;useTheme å¿…é¡»åœ¨ ThemeProvider å†…éƒ¨ä½¿ç”¨&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> context;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ThemeProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [theme, setTheme] = <span class="title function_">useState</span>(<span class="string">&quot;light&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ useMemo é˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">const</span> value = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      theme,</span><br><span class="line">      setTheme,</span><br><span class="line">      <span class="attr">toggle</span>: <span class="function">() =&gt;</span> <span class="title function_">setTheme</span>(<span class="function">(<span class="params">t</span>) =&gt;</span> (t === <span class="string">&quot;light&quot;</span> ? <span class="string">&quot;dark&quot;</span> : <span class="string">&quot;light&quot;</span>)),</span><br><span class="line">    &#125;),</span><br><span class="line">    [theme],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.vue ä½¿ç”¨ï¼š</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ThemeProvider</span>, useTheme &#125; <span class="keyword">from</span> <span class="string">&quot;./contexts/ThemeContext&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; theme, toggle &#125; = <span class="title function_">useTheme</span>(); <span class="comment">// ç›´æ¥ä½¿ç”¨ï¼Œç±»å‹å®‰å…¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;toggle&#125;</span>&gt;</span>&#123;theme&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰æ€§èƒ½ä¼˜åŒ–ï¼ˆå…³é”®ï¼‰"><a href="#3ï¼‰æ€§èƒ½ä¼˜åŒ–ï¼ˆå…³é”®ï¼‰" class="headerlink" title="3ï¼‰æ€§èƒ½ä¼˜åŒ–ï¼ˆå…³é”®ï¼‰"></a><strong><font color="#10c300">3ï¼‰æ€§èƒ½ä¼˜åŒ–ï¼ˆå…³é”®ï¼‰</font></strong></h4><p><strong>Context çš„é—®é¢˜</strong>ï¼šä¸€æ—¦ <code>value</code> å˜åŒ–ï¼Œ<strong>æ‰€æœ‰</strong>æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ¸²æŸ“ï¼Œå³ä½¿åªä½¿ç”¨äº†éƒ¨åˆ†æ•°æ®ã€‚</p><p><strong>æ–¹æ¡ˆ1ï¸âƒ£ï¼šæ‹†åˆ† Contextï¼ˆæ¨èï¼‰</strong></p><p>å°†é«˜é¢‘å˜åŒ–å’Œä½é¢‘å˜åŒ–åˆ†ç¦»ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é¿å…å•ä¸€ Context åŒ…å«æ‰€æœ‰çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AppContext</span> = <span class="title function_">createContext</span>(&#123;</span><br><span class="line">  <span class="attr">user</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">theme</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">notifications</span>: [],</span><br><span class="line">  <span class="comment">// ... æ‰€æœ‰çŠ¶æ€</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ‹†åˆ†ä¸ºå¤šä¸ª Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UserContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">NotificationContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„ä»¶åªè®¢é˜…éœ€è¦çš„ Context</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserAvatar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="title function_">useContext</span>(<span class="title class_">UserContext</span>); <span class="comment">// åªæœ‰ user å˜åŒ–æ—¶é‡æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;user.avatar&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>æ–¹æ¡ˆ2ï¸âƒ£ï¼šä½¿ç”¨ React.memo</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ExpensiveComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; theme &#125; = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;theme&#125;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è™½ç„¶ context å˜åŒ–ï¼Œä½† props æ²¡å˜æ—¶è·³è¿‡æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">ExpensiveComponent</span>);</span><br></pre></td></tr></table></figure><hr><p><strong>æ–¹æ¡ˆ3ï¸âƒ£ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹çŠ¶æ€ç®¡ç†</strong></p><p>å¦‚æœé¢‘ç¹æ›´æ–°ï¼ˆå¦‚æ»šåŠ¨ä½ç½®ã€åŠ¨ç”»çŠ¶æ€ï¼‰ï¼Œä½¿ç”¨ Zustandã€Jotai æˆ– Reduxï¼Œå®ƒä»¬æ”¯æŒç»†ç²’åº¦è®¢é˜…ã€‚</p><p><strong>useContext + useReducerï¼ˆç®€æ˜“ Reduxï¼‰</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// contexts/StoreContext.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer, useContext, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">StoreContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">count</span>: <span class="number">0</span>, <span class="attr">user</span>: <span class="literal">null</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;setUser&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">user</span>: action.<span class="property">payload</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ Hooks</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useStore</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useContext</span>(<span class="title class_">StoreContext</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123; state, dispatch &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">StoreProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialState);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°† state å’Œ dispatch éƒ½æ”¾å…¥ context</span></span><br><span class="line">  <span class="keyword">const</span> value = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> [state, dispatch], [state]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">StoreContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">StoreContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StoreProvider</span>, useStore &#125; <span class="keyword">from</span> <span class="string">&quot;./contexts/ThemeContext&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; state, dispatch &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;state.count&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">StoreProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Counter</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">StoreProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰TypeScript-æ”¯æŒ-1"><a href="#4ï¼‰TypeScript-æ”¯æŒ-1" class="headerlink" title="4ï¼‰TypeScript æ”¯æŒ"></a><strong><font color="#10c300">4ï¼‰TypeScript æ”¯æŒ</font></strong></h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AuthContextType</span> &#123;</span><br><span class="line">  <span class="attr">user</span>: <span class="title class_">User</span> | <span class="literal">null</span>;</span><br><span class="line">  <span class="attr">login</span>: <span class="function">(<span class="params"><span class="attr">user</span>: <span class="title class_">User</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">logout</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">isLoading</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AuthContext</span> = createContext&lt;<span class="title class_">AuthContextType</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å‹å®‰å…¨çš„è‡ªå®šä¹‰ Hook</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useAuth</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> context = <span class="title function_">useContext</span>(<span class="title class_">AuthContext</span>);</span><br><span class="line">  <span class="keyword">if</span> (!context) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;useAuth must be used within AuthProvider&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> context;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Provider ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">AuthProvider</span>(<span class="params">&#123; children &#125;: &#123; children: React.ReactNode &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = useState&lt;<span class="title class_">User</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [isLoading, setIsLoading] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> value = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      user,</span><br><span class="line">      isLoading,</span><br><span class="line">      <span class="attr">login</span>: <span class="function">(<span class="params"><span class="attr">u</span>: <span class="title class_">User</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">setUser</span>(u);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">logout</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">setUser</span>(<span class="literal">null</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    [user, isLoading],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">AuthContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">AuthContext.Provider</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰å¸¸è§é™·é˜±âš ï¸-1"><a href="#5ï¼‰å¸¸è§é™·é˜±âš ï¸-1" class="headerlink" title="5ï¼‰å¸¸è§é™·é˜±âš ï¸"></a><strong><font color="#10c300">5ï¼‰å¸¸è§é™·é˜±âš ï¸</font></strong></h4><p><strong>1ï¸âƒ£Context é»˜è®¤å€¼é™·é˜±</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœä¸æä¾› Providerï¼Œä¼šä½¿ç”¨é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title function_">createContext</span>(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ctx = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>);</span><br><span class="line">  <span class="comment">// å¦‚æœå¿˜è®°åŒ…è£¹ Providerï¼Œctx æ˜¯ &#123; value: 0 &#125;</span></span><br><span class="line">  <span class="comment">// è¿™å¯èƒ½éšè—é”™è¯¯ï¼Œå»ºè®®é»˜è®¤å€¼è®¾ä¸º null å¹¶æ£€æŸ¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£ä¸å¿…è¦çš„é‡æ¸²æŸ“</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°å¯¹è±¡ï¼Œå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">theme:</span> &quot;<span class="attr">dark</span>&quot;, <span class="attr">count</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âœ… ä½¿ç”¨ useMemo ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">const</span> value = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">theme</span>: <span class="string">&quot;dark&quot;</span>, count &#125;), [count]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="keyword">const</span> ctx = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>); <span class="comment">// âŒ Hook å¿…é¡»åœ¨é¡¶å±‚è°ƒç”¨</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// âœ… å§‹ç»ˆåœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">const</span> ctx = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>);</span><br><span class="line">  <span class="keyword">if</span> (!ctx) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6ï¼‰ä½•æ—¶ä½¿ç”¨-vs-ä¸ç”¨"><a href="#6ï¼‰ä½•æ—¶ä½¿ç”¨-vs-ä¸ç”¨" class="headerlink" title="6ï¼‰ä½•æ—¶ä½¿ç”¨ vs ä¸ç”¨"></a><strong><font color="#10c300">6ï¼‰ä½•æ—¶ä½¿ç”¨ vs ä¸ç”¨</font></strong></h4><p><strong>1ï¸âƒ£é€‚åˆä½¿ç”¨ï¼š</strong></p><ul><li>ä¸»é¢˜ã€è¯­è¨€ç­‰å…¨å±€é…ç½®</li><li>è®¤è¯çŠ¶æ€ï¼ˆç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼‰</li><li>è·¯ç”±çŠ¶æ€</li><li>éœ€è¦åœ¨æ·±å±‚ç»„ä»¶è®¿é—®çš„å…±äº«çŠ¶æ€</li></ul><p><strong>2ï¸âƒ£é¿å…ä½¿ç”¨ï¼š</strong></p><ul><li>ä»…çˆ¶å­ç»„ä»¶é€šä¿¡ï¼ˆç›´æ¥ç”¨ propsï¼‰</li><li>é¢‘ç¹æ›´æ–°çš„çŠ¶æ€ï¼ˆå¦‚æ»šåŠ¨ã€è¾“å…¥ã€åŠ¨ç”»ï¼Œè€ƒè™‘ä½¿ç”¨è®¢é˜…æ¨¡å¼æˆ–å¤–éƒ¨çŠ¶æ€ç®¡ç†ï¼‰</li><li>ç®€å•è¡¨å•çŠ¶æ€ï¼ˆç”¨æœ¬åœ° useStateï¼‰</li></ul><p><strong>æ›¿ä»£æ–¹æ¡ˆğŸ‘‡</strong></p><ul><li>ç®€å•å…±äº«ï¼šprops drillingã€ç»„åˆç»„ä»¶ï¼ˆcompositionï¼‰</li><li>é«˜é¢‘æ›´æ–°ï¼šZustandã€Jotaiã€Recoilã€Redux</li><li>æœåŠ¡ç«¯çŠ¶æ€ï¼šReact Queryã€SWR</li></ul><h4 id="7ï¼‰é«˜çº§æ¨¡å¼ï¼šRender-Props-è½¬-Context"><a href="#7ï¼‰é«˜çº§æ¨¡å¼ï¼šRender-Props-è½¬-Context" class="headerlink" title="7ï¼‰é«˜çº§æ¨¡å¼ï¼šRender Props è½¬ Context"></a><strong><font color="#10c300">7ï¼‰é«˜çº§æ¨¡å¼ï¼šRender Props è½¬ Context</font></strong></h4><p>å°†æ—§ç‰ˆ Render Props ç»„ä»¶è½¬ä¸º Hookï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—§æ–¹å¼</span></span><br><span class="line">&lt;<span class="title class_">MouseTracker</span>&gt;</span><br><span class="line">  &#123;<span class="function">(<span class="params">&#123; x, y &#125;</span>) =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;x&#125;, &#123;y&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/<span class="title class_">MouseTracker</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°æ–¹å¼ï¼šç»“åˆ Context å’Œ Hook</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MouseContext</span> = <span class="title function_">createContext</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMouse</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useContext</span>(<span class="title class_">MouseContext</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; x, y &#125; = <span class="title function_">useMouse</span>(); <span class="comment">// æ›´ç®€æ´çš„ API</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;x&#125;, &#123;y&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="4-4-useMemo-ç¼“å­˜è®¡ç®—ç»“æœ"><a href="#4-4-useMemo-ç¼“å­˜è®¡ç®—ç»“æœ" class="headerlink" title="4.4 useMemo- ç¼“å­˜è®¡ç®—ç»“æœ"></a><strong><font color="red">4.4 useMemo- ç¼“å­˜è®¡ç®—ç»“æœ</font></strong></h3><p><code>useMemo</code> ç”¨äºç¼“å­˜æ˜‚è´µçš„è®¡ç®—ç»“æœï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—ï¼ŒåŒæ—¶ä¿æŒ<strong>å¯¹è±¡&#x2F;æ•°ç»„çš„å¼•ç”¨</strong>ç¨³å®šã€‚</p><p>æ¢å¥è¯è¯´ï¼š</p><ul><li>å¦‚æœä¾èµ–æ²¡å˜ â†’ ç›´æ¥ç”¨ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼›</li><li>å¦‚æœä¾èµ–å˜äº† â†’ é‡æ–°è®¡ç®—å¹¶è¿”å›æ–°ç»“æœã€‚</li></ul><p>å®ƒå¯ä»¥å¸®ä½ æ˜¾è‘—å‡å°‘ä¸å¿…è¦çš„è®¡ç®—æˆ–å¯¹è±¡é‡å»ºã€‚</p><p><code>useMemo</code>çš„ç†å¿µæ˜¯åŒæ­¥çš„ï¼Œ<strong>useMemoä¸èƒ½è¿›è¡Œä¸€äº›é¢å¤–çš„å‰¯æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ç­‰</strong>ã€‚</p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-2"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-2" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> å€¼;</span><br><span class="line">&#125;, [ä¾èµ–é¡¹]);</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°1 (å·¥å‚å‡½æ•°)ï¼šä¸€ä¸ªè¿”å›å€¼çš„å‡½æ•°ï¼ˆæ‰§è¡Œè®¡ç®—ï¼‰</li><li>å‚æ•°2 (ä¾èµ–æ•°ç»„)ï¼šä¾èµ–æ•°ç»„ï¼Œå½“å…¶ä¸­æŸé¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—</li></ul><p>è¿”å›å€¼ï¼š<strong>ç¼“å­˜çš„è®¡ç®—ç»“æœ</strong>ã€‚</p><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong>1ï¸âƒ£ å¤æ‚è®¡ç®—ç¼“å­˜</strong></p><p>æœªä½¿ç”¨<code>useMemo</code>çš„æ—¶å€™æ”¹å˜é¢œè‰²ï¼Œä¹Ÿä¼šæ‰§è¡ŒComputeTotalä»·æ ¼çš„è®¡ç®—ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ComputeTotal</span>(<span class="params">price, count</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‡½æ•°è¿è¡Œäº†&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> price * count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [price, setPrice] = <span class="title function_">useState</span>(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">const</span> [count] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> [color, setColor] = <span class="title function_">useState</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ‘‰ åªæœ‰ price å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°è®¡ç®—</span></span><br><span class="line">  <span class="keyword">const</span> totalPrice = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="title class_">ComputeTotal</span>(price, count), [price]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€»ä»·ï¼š&#123;totalPrice&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setColor(&quot;blue&quot;)&#125;&gt;ä¿®æ”¹é¢œè‰²<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setPrice(price + 100)&#125;&gt;ä¿®æ”¹ä»·æ ¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>âœ… å½“ä½ æ”¹å˜é¢œè‰²çš„æ—¶å€™ï¼Œä¸ä¼šé‡æ–°æ‰§è¡ŒComputeTotalã€‚åªæœ‰priceå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ã€‚</p><hr><p><strong>2ï¸âƒ£ ä¿æŒå¼•ç”¨ç¨³å®šï¼Œé¿å…é‡æ¸²æŸ“ï¼ˆå…³é”®ç”¨é€”ï¼‰</strong></p><p><strong>ç¤ºä¾‹ä¸€ï¼š</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ChartComponent</span>(<span class="params">&#123; data, options &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°å¯¹è±¡ï¼Œå¯¼è‡´ useEffect æ— é™å¾ªç¯æˆ– Chart ç»„ä»¶é‡æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">const</span> config = &#123; <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>, data, ...options &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âœ… ä¾èµ–ä¸å˜æ—¶ä¿æŒåŒä¸€å¼•ç”¨</span></span><br><span class="line">  <span class="keyword">const</span> config = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">      data,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">responsive</span>: <span class="literal">true</span>,</span><br><span class="line">        ...options,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    [data, options],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç°åœ¨åªåœ¨ config çœŸæ­£å˜åŒ–æ—¶æ‰§è¡Œ</span></span><br><span class="line">    chartRef.<span class="property">current</span>.<span class="title function_">update</span>(config);</span><br><span class="line">  &#125;, [config]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">ref</span>=<span class="string">&#123;canvasRef&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹äºŒï¼š</strong></p><p>ä¾‹å¦‚å­ç»„ä»¶ä½¿ç”¨ <code>React.memo</code>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; options &#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Child render&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;options.join(&quot;, &quot;)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// å¦‚æœä¸ç¼“å­˜ï¼Œæ•°ç»„æ¯æ¬¡æ¸²æŸ“éƒ½æ–°å»ºï¼Œå¯¼è‡´ Child é‡æ–°æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">const</span> options = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>], []); <span class="comment">// ğŸ‘ˆ ç¼“å­˜æ•°ç»„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">options</span>=<span class="string">&#123;options&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p><code>useMemo</code> ä¿è¯æ¯æ¬¡æ¸²æŸ“ä¸­ <code>options</code> çš„å¼•ç”¨ç¨³å®šï¼Œ<code>React.memo</code> ä¼šè®¤ä¸º props æ²¡å˜ï¼Œä»è€Œè·³è¿‡é‡æ–°æ¸²æŸ“ã€‚</p><hr><p><strong>3ï¸âƒ£ ç¼“å­˜ç»„ä»¶(æå°‘ç”¨)</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [price, setPrice] = <span class="title function_">useState</span>(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">const</span> [count] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> [color, setColor] = <span class="title function_">useState</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> memoizedChild = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">price</span>=<span class="string">&#123;price&#125;</span> /&gt;</span></span>,</span><br><span class="line">    [count, price],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setColor(&quot;blue&quot;)&#125;&gt;ä¿®æ”¹é¢œè‰²<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setPrice(price + 100)&#125;&gt;ä¿®æ”¹ä»·æ ¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* ä½¿ç”¨ç»„ä»¶ */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;memoizedChild&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰ä¸-useCallback-çš„å…³ç³»"><a href="#3ï¼‰ä¸-useCallback-çš„å…³ç³»" class="headerlink" title="3ï¼‰ä¸ useCallback çš„å…³ç³»"></a><strong><font color="#10c300">3ï¼‰ä¸ useCallback çš„å…³ç³»</font></strong></h4><p><code>useCallback</code> æœ¬è´¨ä¸Šæ˜¯ <code>useMemo</code> çš„è¯­æ³•ç³–ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸¤è€…æ˜¯ç­‰ä»·çš„</span></span><br><span class="line"><span class="title function_">useCallback</span>(fn, deps);</span><br><span class="line"><span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> fn, deps);</span><br></pre></td></tr></table></figure><p><strong>é€‰æ‹©åŸåˆ™</strong>ï¼š</p><ul><li>ç¼“å­˜<strong>å‡½æ•°</strong> â†’ <code>useCallback</code></li><li>ç¼“å­˜<strong>å€¼</strong>ï¼ˆå¯¹è±¡ã€æ•°ç»„ã€è®¡ç®—ç»“æœï¼‰â†’ <code>useMemo</code></li></ul><h4 id="4ï¼‰å®é™…ç¤ºä¾‹ï¼šæœç´¢è¿‡æ»¤"><a href="#4ï¼‰å®é™…ç¤ºä¾‹ï¼šæœç´¢è¿‡æ»¤" class="headerlink" title="4ï¼‰å®é™…ç¤ºä¾‹ï¼šæœç´¢è¿‡æ»¤"></a><strong><font color="#10c300">4ï¼‰å®é™…ç¤ºä¾‹ï¼šæœç´¢è¿‡æ»¤</font></strong></h4><p>**å®Œæ•´æ¡ˆä¾‹ï¼š**<a target="_blank" rel="noopener" href="https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s?singleDoc#wkQxl">https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s?singleDoc#wkQxl</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">SearchResults</span>(<span class="params">&#123; query, items &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [highlightIndex, setHighlightIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœç´¢ç»“æœç¼“å­˜</span></span><br><span class="line">  <span class="keyword">const</span> results = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!query) <span class="keyword">return</span> [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">const</span> filtered = items.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span></span><br><span class="line">      item.<span class="property">text</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(query.<span class="title function_">toLowerCase</span>()),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœç´¢è€—æ—¶: <span class="subst">$&#123;performance.now() - startTime&#125;</span>ms`</span>);</span><br><span class="line">    <span class="keyword">return</span> filtered;</span><br><span class="line">  &#125;, [query, items]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é«˜äº®é¡¹ç¼“å­˜ï¼ˆåŸºäº resultsï¼Œå½¢æˆè®¡ç®—é“¾ï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> highlightedItem = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> results[highlightIndex] || <span class="literal">null</span>;</span><br><span class="line">  &#125;, [results, highlightIndex]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;results.map((item, idx) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&#123;idx</span> === <span class="string">highlightIndex</span> ? &quot;<span class="attr">highlight</span>&quot; <span class="attr">:</span> &quot;&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;item.text&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Preview</span> <span class="attr">data</span>=<span class="string">&#123;highlightedItem&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰TypeScript-æ”¯æŒ-2"><a href="#4ï¼‰TypeScript-æ”¯æŒ-2" class="headerlink" title="4ï¼‰TypeScript æ”¯æŒ"></a><strong><font color="#10c300">4ï¼‰TypeScript æ”¯æŒ</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="attr">id</span>: number;</span><br><span class="line">    <span class="attr">name</span>: string;</span><br><span class="line">    <span class="attr">score</span>: number;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è‡ªåŠ¨æ¨æ–­è¿”å›ç±»å‹ä¸º number</span></span><br><span class="line">  <span class="keyword">const</span> averageScore = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (users.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> users.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, u</span>) =&gt;</span> sum + u.<span class="property">score</span>, <span class="number">0</span>) / users.<span class="property">length</span>;</span><br><span class="line">  &#125;, [users]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤æ‚å¯¹è±¡ç±»å‹</span></span><br><span class="line">  <span class="keyword">const</span> processedData = useMemo&lt;&#123; <span class="attr">labels</span>: string[]; <span class="attr">values</span>: number[] &#125;&gt;(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">labels</span>: data.<span class="title function_">map</span>(<span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">date</span>),</span><br><span class="line">      <span class="attr">values</span>: data.<span class="title function_">map</span>(<span class="function"><span class="params">d</span> =&gt;</span> d.<span class="property">value</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [data]);</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰å¸¸è§é™·é˜±âš ï¸-2"><a href="#5ï¼‰å¸¸è§é™·é˜±âš ï¸-2" class="headerlink" title="5ï¼‰å¸¸è§é™·é˜±âš ï¸"></a><strong><font color="#10c300">5ï¼‰å¸¸è§é™·é˜±âš ï¸</font></strong></h4><p><strong>1ï¸âƒ£è¿‡åº¦ä½¿ç”¨ï¼ˆè´Ÿä¼˜åŒ–ï¼‰</strong></p><p><code>useMemo</code> æœ¬èº«ä¹Ÿæœ‰å¼€é”€ï¼ˆä¾èµ–æ¯”è¾ƒã€ç¼“å­˜å­˜å‚¨ï¼‰ï¼Œç®€å•è®¡ç®—æ— éœ€ç¼“å­˜ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ æ²¡å¿…è¦ï¼šåŠ æ³•è®¡ç®—æ¯” useMemo å¼€é”€æ›´å°</span></span><br><span class="line"><span class="keyword">const</span> sum = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> a + b, [a, b]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… ç›´æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> sum = a + b;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ—¶æœº</strong>ï¼š</p><ul><li>è®¡ç®—å¤æ‚åº¦ &gt; O(n) ä¸” n è¾ƒå¤§</li><li>éœ€è¦ä¿æŒå¯¹è±¡å¼•ç”¨ç¨³å®šï¼ˆç”¨äº props æˆ–ä¾èµ–æ•°ç»„ï¼‰</li><li>æ˜ç¡®æµ‹é‡åˆ°æ€§èƒ½ç“¶é¢ˆï¼ˆReact DevTools Profilerï¼‰</li></ul><hr><p><strong>2ï¸âƒ£ä¾èµ–æ•°ç»„é—æ¼</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é—æ¼ userï¼Œå¯¼è‡´ä½¿ç”¨æ—§çš„ user æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;user.firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>; <span class="comment">// user æ¥è‡ªå¤–å±‚ä½œç”¨åŸŸ</span></span><br><span class="line">&#125;, [lastName]); <span class="comment">// ç¼ºå°‘ user</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… å®Œæ•´ä¾èµ–</span></span><br><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;user.firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>;</span><br><span class="line">&#125;, [user, lastName]);</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£åœ¨ useMemo é‡Œæ‰§è¡Œå‰¯ä½œç”¨</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šuseMemo åº”è¯¥çº¯å‡½æ•°ï¼Œä¸æ‰§è¡Œå‰¯ä½œç”¨</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;key&quot;</span>, value); <span class="comment">// å‰¯ä½œç”¨ï¼</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">process</span>(value);</span><br><span class="line">&#125;, [value]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… å‰¯ä½œç”¨æ”¾åœ¨ useEffect</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;key&quot;</span>, value);</span><br><span class="line">&#125;, [value]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="title function_">process</span>(value), [value]);</span><br></pre></td></tr></table></figure><hr><p><strong>4ï¸âƒ£ è¿”å›å‡½æ•°æ—¶çš„æ··æ·†</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ è¿™æ ·ç¼“å­˜çš„æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼Œä¸æ˜¯å‡½æ•°æœ¬èº«</span></span><br><span class="line"><span class="keyword">const</span> handler = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;clicked&quot;</span>); <span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… å¦‚æœçœŸè¦ç¼“å­˜å‡½æ•°ï¼Œç›´æ¥ç”¨ useCallback</span></span><br><span class="line"><span class="keyword">const</span> handler = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;clicked&quot;</span>);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h4 id="6ï¼‰é«˜çº§æ¨¡å¼"><a href="#6ï¼‰é«˜çº§æ¨¡å¼" class="headerlink" title="6ï¼‰é«˜çº§æ¨¡å¼"></a><strong><font color="#10c300">6ï¼‰é«˜çº§æ¨¡å¼</font></strong></h4><p><strong>1ï¸âƒ£è®¡ç®—é“¾</strong></p><p><code>useMemo</code> å¯ä»¥ä¾èµ–å…¶ä»– <code>useMemo</code> çš„ç»“æœï¼Œå½¢æˆè®¡ç®—é“¾ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rawData = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="title function_">fetchData</span>(), []);</span><br><span class="line"><span class="keyword">const</span> processedData = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="title function_">cleanData</span>(rawData), [rawData]);</span><br><span class="line"><span class="keyword">const</span> statistics = <span class="title function_">useMemo</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> <span class="title function_">calculateStats</span>(processedData),</span><br><span class="line">  [processedData],</span><br><span class="line">);</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£æ¡ä»¶æ€§ç¼“å­˜</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!enabled) <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// æå‰è¿”å›</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">heavyComputation</span>(data);</span><br><span class="line">&#125;, [enabled, data]);</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£ä¸ useEffect é…åˆé˜²æ­¢æ— é™å¾ªç¯</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userIds = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> users.<span class="title function_">map</span>(<span class="function">(<span class="params">u</span>) =&gt;</span> u.<span class="property">id</span>), [users]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨ userIds å¼•ç”¨ç¨³å®šï¼Œä¸ä¼šå¯¼è‡´ effect æ¯æ¬¡éƒ½æ‰§è¡Œ</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fetchDetails</span>(userIds);</span><br><span class="line">&#125;, [userIds]);</span><br></pre></td></tr></table></figure><br><p>ğŸŒŸ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p><p><code>useMemo</code> ç”¨æ¥è§£å†³â€å› ä¸ºå¯¹è±¡å¼•ç”¨å˜åŒ–å¯¼è‡´çš„æ— æ•ˆé‡æ¸²æŸ“â€æ¯”è§£å†³â€é‡å¤è®¡ç®—â€æ›´å¸¸è§</p><br><h3 id="4-5-useCallback-ç¼“å­˜å‡½æ•°å¼•ç”¨"><a href="#4-5-useCallback-ç¼“å­˜å‡½æ•°å¼•ç”¨" class="headerlink" title="4.5 useCallback- ç¼“å­˜å‡½æ•°å¼•ç”¨"></a><strong><font color="red">4.5 useCallback- ç¼“å­˜å‡½æ•°å¼•ç”¨</font></strong></h3><p>åœ¨ React ä¸­ï¼Œæ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šé‡æ–°æ‰§è¡Œç»„ä»¶å‡½æ•°ä½“ï¼Œ<strong>é‡Œé¢å®šä¹‰çš„å‡½æ•°ä¹Ÿä¼šè¢«â€œé‡æ–°åˆ›å»ºâ€</strong>ã€‚<br>å¦‚æœè¿™äº›å‡½æ•°ä½œä¸º props ä¼ ç»™å­ç»„ä»¶ï¼Œå³ä½¿å‡½æ•°é€»è¾‘æ²¡æœ‰å˜ï¼Œæ ¹æ® <strong>å¼•ç”¨åœ°å€æ¯”è¾ƒ</strong>ï¼Œå­ç»„ä»¶ä¼šè®¤ä¸º props å˜äº†è€Œé‡æ–°æ¸²æŸ“ã€‚</p><p><code>useCallback</code> è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p><p>âœ… **è®©å‡½æ•°å¼•ç”¨åœ¨ä¾èµ–ä¸å˜æ—¶ä¿æŒç¨³å®šï¼ˆä¸å˜ï¼‰**è¯­ä¹‰ä¸Šï¼Œ<code>useCallback</code> æ˜ç¡®è¡¨ç¤ºâ€ç¼“å­˜å‡½æ•°â€ï¼Œè€Œ <code>useMemo</code> ç”¨äºç¼“å­˜ä»»æ„è®¡ç®—å€¼ã€‚</p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-3"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-3" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°é€»è¾‘</span></span><br><span class="line">&#125;, [dependencies]);</span><br></pre></td></tr></table></figure><ul><li><strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>ï¼šè¦ç¼“å­˜çš„å›è°ƒå‡½æ•°</li><li><strong>ç¬¬äºŒä¸ªå‚æ•°</strong>ï¼šä¾èµ–æ•°ç»„ï¼Œå½“ä¾èµ–ä¸­æœ‰å€¼å˜åŒ–æ—¶ï¼Œè¿”å›çš„æ–°å‡½æ•°å¼•ç”¨ä¼šæ›´æ–°</li></ul><h4 id="2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯"><a href="#2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯" class="headerlink" title="2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯"></a><strong><font color="#10c300">2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯</font></strong></h4><p><strong>1ï¸âƒ£ä¼ é€’ç»™ä¼˜åŒ–åçš„å­ç»„ä»¶ï¼ˆæœ€å¸¸è§ï¼‰</strong></p><p>é…åˆ <code>React.memo</code> é˜²æ­¢å­ç»„ä»¶å› çˆ¶ç»„ä»¶æ¸²æŸ“è€Œé‡æ¸²æŸ“ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useCallback &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; onClick &#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å­ç»„ä»¶æ¸²æŸ“äº†&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>å­ç»„ä»¶æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>); <span class="comment">// ğŸ‘ˆ åªæœ‰ props å˜äº†æ‰æ¸²æŸ“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åªæœ‰ count å˜åŒ–æ—¶æ‰ä¼šæ›´æ–°å‡½æ•°å¼•ç”¨(å­ç»„ä»¶æ¸²æŸ“)</span></span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked:&quot;</span>, count);</span><br><span class="line">  &#125;, [count]); <span class="comment">// ğŸ‘ˆ ç¼“å­˜å‡½æ•°å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;count +1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setText(e.target.value)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><strong>ğŸ” åˆ†æï¼š</strong></p><ul><li>å¦‚æœä¸ç”¨ <code>useCallback</code>ï¼Œæ¯æ¬¡ App æ¸²æŸ“éƒ½ä¼šâ€œæ–°å»ºâ€ä¸€ä¸ª <code>handleClick</code> å‡½æ•°å¼•ç”¨ï¼›</li><li><code>MemoChild</code> ä¼šè®¤ä¸º props (<code>onClick</code>) æ”¹äº† â†’ é‡æ–°æ¸²æŸ“ï¼›</li><li>ç”¨äº† <code>useCallback</code> åï¼Œåœ¨ä¾èµ–ä¸å˜åŒ–æ—¶ï¼Œå‡½æ•°å¼•ç”¨ä¿æŒç¨³å®š â†’ ç»„ä»¶ä¸é‡æ¸²æŸ“ã€‚</li></ul><hr><p><strong>2ï¸âƒ£ä½œä¸º useEffect çš„ä¾èµ–</strong></p><p>å½“ <code>useEffect</code> ä¾èµ–æŸä¸ªå‡½æ•°æ—¶ï¼Œå¿…é¡»ç”¨ <code>useCallback</code> ä¿æŒå¼•ç”¨ç¨³å®š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Search</span>(<span class="params">&#123; query &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [results, setResults] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°å‡½æ•°ï¼Œå¯¼è‡´ effect æ¯æ¬¡éƒ½è¦æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">fetchData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> api.<span class="title function_">search</span>(query);</span><br><span class="line">    <span class="title function_">setResults</span>(res);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âœ… fetchData å¼•ç”¨ç¨³å®šï¼Œåªæœ‰ query å˜åŒ–æ—¶æ‰é‡æ–°è§¦å‘ effect</span></span><br><span class="line">  <span class="keyword">const</span> fetchData = <span class="title function_">useCallback</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> api.<span class="title function_">search</span>(query);</span><br><span class="line">    <span class="title function_">setResults</span>(res);</span><br><span class="line">  &#125;, [query]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetchData</span>();</span><br><span class="line">  &#125;, [fetchData]); <span class="comment">// ç°åœ¨å¯ä»¥å®‰å…¨åœ°å°†å‡½æ•°æ”¾å…¥ä¾èµ–æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Results</span> <span class="attr">data</span>=<span class="string">&#123;results&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£è‡ªå®šä¹‰ Hook ä¸­è¿”å›çš„å›è°ƒ</strong></p><p>ç¡®ä¿ Hook ä½¿ç”¨è€…å¯ä»¥è·å¾—ç¨³å®šçš„å‡½æ•°å¼•ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useDebounce</span>(<span class="params">callback, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [debouncedCallback] = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> <span class="title function_">debounce</span>(callback, delay));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›ç¨³å®šçš„å‡½æ•°å¼•ç”¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useCallback</span>(</span><br><span class="line">    <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">debouncedCallback</span>(...args);</span><br><span class="line">    &#125;,</span><br><span class="line">    [debouncedCallback],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨-useCallback"><a href="#3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨-useCallback" class="headerlink" title="3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨ useCallback"></a><strong><font color="#10c300">3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨ useCallback</font></strong></h4><ol><li>å‡½æ•°ä½œä¸º props ä¼ é€’ç»™ <code>React.memo</code> åŒ…è£¹çš„å­ç»„ä»¶</li><li>å‡½æ•°ä½œä¸ºå…¶ä»– Hookï¼ˆ<code>useEffect</code>ã€<code>useMemo</code>ï¼‰çš„ä¾èµ–</li><li>å‡½æ•°æ˜¯è‡ªå®šä¹‰ Hook çš„è¿”å›å€¼ï¼Œä¾›å¤–éƒ¨ä½¿ç”¨</li></ol><h4 id="4ï¼‰TypeScript-æ”¯æŒ-3"><a href="#4ï¼‰TypeScript-æ”¯æŒ-3" class="headerlink" title="4ï¼‰TypeScript æ”¯æŒ"></a><strong><font color="#10c300">4ï¼‰TypeScript æ”¯æŒ</font></strong></h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºç¡€ç±»å‹æ¨æ–­</span></span><br><span class="line"><span class="keyword">const</span> handleChange = <span class="title function_">useCallback</span>(<span class="function">(<span class="params"><span class="attr">e</span>: <span class="title class_">React</span>.<span class="title class_">ChangeEvent</span>&lt;<span class="title class_">HTMLInputElement</span>&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³›å‹çº¦æŸ</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">FetchFn</span> = <span class="function">(<span class="params"><span class="attr">id</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="title class_">Promise</span>&lt;<span class="title class_">User</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fetchUser = useCallback&lt;<span class="title class_">FetchFn</span>&gt;(<span class="title function_">async</span> (id) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> api.<span class="title function_">getUser</span>(id);</span><br><span class="line">  <span class="keyword">return</span> res.<span class="property">data</span>;</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›å…ƒç»„ï¼ˆå¸¸è§äºè‡ªå®šä¹‰ Hookï¼‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useToggle</span>(<span class="params">initial = <span class="literal">false</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(initial);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> toggle = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setState</span>(<span class="function">(<span class="params">s</span>) =&gt;</span> !s);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> setTrue = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> <span class="title function_">setState</span>(<span class="literal">true</span>), []);</span><br><span class="line">  <span class="keyword">const</span> setFalse = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> <span class="title function_">setState</span>(<span class="literal">false</span>), []);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç±»å‹è‡ªåŠ¨æ¨æ–­ä¸º [boolean, () =&gt; void, () =&gt; void, () =&gt; void]</span></span><br><span class="line">  <span class="keyword">return</span> [state, toggle, setTrue, setFalse] <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰é«˜çº§æ¨¡å¼"><a href="#5ï¼‰é«˜çº§æ¨¡å¼" class="headerlink" title="5ï¼‰é«˜çº§æ¨¡å¼"></a><strong><font color="#10c300">5ï¼‰é«˜çº§æ¨¡å¼</font></strong></h4><p><strong>1ï¸âƒ£ç»“åˆ useRef è§£å†³è¿‡æœŸé—­åŒ…ï¼ˆç¨³å®šå¼•ç”¨ + æœ€æ–°å€¼ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useStableCallback</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = <span class="title function_">useRef</span>(fn);</span><br><span class="line">  ref.<span class="property">current</span> = fn; <span class="comment">// æ¯æ¬¡æ¸²æŸ“æ›´æ–° ref</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›ç¨³å®šå¼•ç”¨ï¼Œä½†å§‹ç»ˆè°ƒç”¨æœ€æ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useCallback</span>(<span class="function">(<span class="params">...args</span>) =&gt;</span> ref.<span class="title function_">current</span>(...args), []);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ï¼šå¯ä»¥æ”¾å…¥ useEffect ä¾èµ–è€Œä¸è§¦å‘é‡æ–°æ‰§è¡Œï¼Œä¸”èƒ½è®¿é—®æœ€æ–° props/state</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params">&#123; onUpdate &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> stableCallback = <span class="title function_">useStableCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æœ€æ–°çŠ¶æ€&quot;</span>); <span class="comment">// æ°¸è¿œèƒ½è®¿é—®æœ€æ–°å€¼ï¼Œæ— éœ€ä¾èµ–æ•°ç»„</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(stableCallback, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">  &#125;, [stableCallback]); <span class="comment">// æ°¸è¿œä¸ä¼šå˜ï¼Œeffect åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£ è®°å¿†åŒ–äº‹ä»¶å¤„ç†å™¨å·¥å‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">List</span>(<span class="params">&#123; items &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»º N ä¸ªæ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> items.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleItemClick(item.id)&#125;&gt;&#123;item.name&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  ));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âœ… ä½¿ç”¨ useCallback ç¼“å­˜æ¯ä¸ªå¤„ç†å™¨ï¼ˆé…åˆ memoï¼‰</span></span><br><span class="line">  <span class="keyword">return</span> items.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">MemoItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">item</span>=<span class="string">&#123;item&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;useCallback(</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        () =&gt;</span> handleItemClick(item.id),</span></span><br><span class="line"><span class="language-xml">        [item.id], // åªæœ‰å½“ item.id å˜åŒ–æ—¶æ‰æ›´æ–°</span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£ä¾èµ–æ³¨å…¥æ¨¡å¼</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useApi</span>(<span class="params">api</span>) &#123;</span><br><span class="line">  <span class="comment">// å³ä½¿ api å¯¹è±¡å˜åŒ–ï¼Œåªè¦ endpoint ä¸å˜ï¼ŒfetchData å¼•ç”¨ç¨³å®š</span></span><br><span class="line">  <span class="keyword">const</span> fetchData = <span class="title function_">useCallback</span>(</span><br><span class="line">    <span class="function">(<span class="params">endpoint</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> api.<span class="title function_">request</span>(endpoint);</span><br><span class="line">    &#125;,</span><br><span class="line">    [api],</span><br><span class="line">  ); <span class="comment">// api é€šå¸¸æ˜¯ç¨³å®šçš„å•ä¾‹</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fetchData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6ï¼‰å¸¸è§è¯¯åŒºâš ï¸"><a href="#6ï¼‰å¸¸è§è¯¯åŒºâš ï¸" class="headerlink" title="6ï¼‰å¸¸è§è¯¯åŒºâš ï¸"></a><strong><font color="#10c300">6ï¼‰å¸¸è§è¯¯åŒºâš ï¸</font></strong></h4><ol><li><p><strong>ä¸è¦æ»¥ç”¨</strong><br>å¦‚æœå­ç»„ä»¶æ²¡æœ‰ <code>React.memo</code> æˆ–ä¸æ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œæ²¡å¿…è¦åŠ  <code>useCallback</code>ï¼ˆå¢åŠ å¤æ‚åº¦ï¼‰</p></li><li><p><strong>ç¼“å­˜ä¸æ˜¯å‡å°‘æ¸²æŸ“æ¬¡æ•°çš„ä¸‡èƒ½é’¥åŒ™</strong><br><code>useCallback</code> åªé˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œä½†çŠ¶æ€æ›´æ–°è§¦å‘çš„æ¸²æŸ“ä»ä¼šå‘ç”Ÿ</p></li><li><p><strong>ä¾èµ–ä¸æ­£ç¡®ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯</strong><br>ç¼ºå°‘ä¾èµ–å¯èƒ½è®©å‡½æ•°å†…éƒ¨æ‹¿åˆ°æ—§çš„çŠ¶æ€</p></li><li><p>åœ¨å†™ä»£ç æ—¶ï¼Œ<strong>é»˜è®¤ä¸è¦åŠ  <code>useCallback</code></strong>ã€‚åªæœ‰å½“ä½ é‡åˆ°ä¸‹é¢è¿™ä¸¤ä¸ªä¿¡å·æ—¶ï¼Œå†è¡¥ä¸Šï¼š</p><ul><li>ğŸ‘‹ â€œæˆ‘è¦æŠŠè¿™ä¸ªå‡½æ•°ä¼ ç»™ä¸€ä¸ªå¾ˆé‡çš„ã€åŠ äº† memo çš„åˆ—è¡¨å­ç»„ä»¶â€ã€‚</li><li>â€œESLint è­¦å‘Šæˆ‘è¯´ï¼Œè¿™ä¸ªå‡½æ•°è¢«ç”¨è¿™äº† useEffect çš„ä¾èµ–é‡Œâ€ã€‚</li></ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œæ”¾å¿ƒå¤§èƒ†åœ°å†™æ™®é€šå‡½æ•°ï¼Œä»£ç æ›´å¹²å‡€ï¼Œæ€§èƒ½åè€Œæ›´å¥½ã€‚</p></li></ol><br><h3 id="4-6-useReducer-å¤æ‚çŠ¶æ€ç®¡ç†"><a href="#4-6-useReducer-å¤æ‚çŠ¶æ€ç®¡ç†" class="headerlink" title="4.6 useReducer-å¤æ‚çŠ¶æ€ç®¡ç†"></a><strong><font color="red">4.6 useReducer-å¤æ‚çŠ¶æ€ç®¡ç†</font></strong></h3><blockquote><p>âœ… <code>useReducer</code> æ˜¯ <code>useState</code> çš„é«˜çº§æ›¿ä»£æ–¹æ¡ˆã€‚<br>å½“çŠ¶æ€å˜åŒ–é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œæˆ–è€…æ–°çŠ¶æ€ä¾èµ–æ—§çŠ¶æ€æ—¶ï¼Œç”¨ <code>useReducer</code> ä¼šæ›´æ™°ã€‚</p></blockquote><p>å®ƒå’Œ Redux çš„æ ¸å¿ƒæ€æƒ³ä¸€æ ·ï¼š<br><strong>é€šè¿‡ â€œåŠ¨ä½œï¼ˆactionï¼‰â€ å’Œ â€œçŠ¶æ€æ›´æ–°å‡½æ•°ï¼ˆreducerï¼‰â€ æ¥æ§åˆ¶çŠ¶æ€å˜åŒ–ã€‚</strong></p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-4"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-4" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialArg, init?)</span><br></pre></td></tr></table></figure><ul><li><strong><code>state</code></strong>ï¼šå½“å‰çŠ¶æ€</li><li><strong><code>dispatch</code></strong>ï¼šè§¦å‘çŠ¶æ€æ›´æ–°çš„å‡½æ•°</li><li><strong><code>reducer</code></strong>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè´Ÿè´£â€œæ¥æ”¶æ—§çŠ¶æ€ + åŠ¨ä½œï¼ˆactionï¼‰â€ï¼Œè¿”å›æ–°çŠ¶æ€</li><li><strong><code>initialArg</code></strong>ï¼šåˆå§‹çŠ¶æ€</li><li><strong><code>initï¼ˆå¯é€‰ï¼‰</code></strong>ï¼š<em>æƒ°æ€§åˆå§‹åŒ–å‡½æ•°</em>ï¼Œç”¨äºåœ¨åˆå§‹æ¸²æŸ“æ—¶å¯¹ <code>initialArg</code> è¿›è¡ŒåŠ å·¥æˆ–è®¡ç®—ï¼Œè¿”å›çœŸæ­£çš„åˆå§‹çŠ¶æ€ï¼Œåªä¼šåœ¨åˆå§‹åŒ–æ‰§è¡Œä¸€æ¬¡</li></ul><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-1"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-1" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ è®¡æ•°å™¨</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ reducer</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state; <span class="comment">// è¿”å›åŸçŠ¶æ€ï¼ˆé˜²æ­¢æŠ¥é”™ï¼‰</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°ï¼š&#123;state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;decrement&quot; &#125;)&#125;&gt;-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p>âœ… <code>dispatch</code> ç±»ä¼¼äºè°ƒç”¨ <code>setState</code>ï¼Œä½†è¯­ä¹‰æ›´æ¸…æ™°ã€é€»è¾‘é›†ä¸­ã€‚</p><hr><p><strong><font color="#00A6ED">2ï¸âƒ£ å¤æ‚çŠ¶æ€ç¤ºä¾‹ï¼šè¡¨å•ç®¡ç†</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialForm = &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;CHANGE_FIELD&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, [action.<span class="property">field</span>]: action.<span class="property">value</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;RESET&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> initialForm;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [form, dispatch] = <span class="title function_">useReducer</span>(formReducer, initialForm);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;form.username&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">          dispatch(&#123;</span></span><br><span class="line"><span class="language-xml">            type: &quot;CHANGE_FIELD&quot;,</span></span><br><span class="line"><span class="language-xml">            field: &quot;username&quot;,</span></span><br><span class="line"><span class="language-xml">            value: e.target.value,</span></span><br><span class="line"><span class="language-xml">          &#125;)</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        placeholder=&quot;ç”¨æˆ·å&quot;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;form.age&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">          dispatch(&#123;</span></span><br><span class="line"><span class="language-xml">            type: &quot;CHANGE_FIELD&quot;,</span></span><br><span class="line"><span class="language-xml">            field: &quot;age&quot;,</span></span><br><span class="line"><span class="language-xml">            value: e.target.value,</span></span><br><span class="line"><span class="language-xml">          &#125;)</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        placeholder=&quot;å¹´é¾„&quot;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;RESET&quot; &#125;)&#125;&gt;é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;JSON.stringify(form)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Form</span>;</span><br></pre></td></tr></table></figure><p>âœ… ä¼˜åŠ¿ï¼š</p><ul><li>æ‰€æœ‰çŠ¶æ€æ›´æ–°é€»è¾‘é›†ä¸­åœ¨ <code>reducer</code>ï¼›</li><li>æ›´å®¹æ˜“ç»´æŠ¤ã€æµ‹è¯•ã€è°ƒè¯•ã€‚</li></ul><h4 id="3ï¼‰useReducer-çš„æ‰§è¡Œæµç¨‹å›¾"><a href="#3ï¼‰useReducer-çš„æ‰§è¡Œæµç¨‹å›¾" class="headerlink" title="3ï¼‰useReducer çš„æ‰§è¡Œæµç¨‹å›¾"></a><strong><font color="#10c300">3ï¼‰useReducer çš„æ‰§è¡Œæµç¨‹å›¾</font></strong></h4><p>1ï¸âƒ£ ç»„ä»¶æ¸²æŸ“æ—¶ï¼š</p><ul><li>React æŒ‰ <code>initialArg</code> åˆå§‹åŒ–çŠ¶æ€ã€‚</li></ul><p>2ï¸âƒ£ è°ƒç”¨ <code>dispatch(action)</code>ï¼š</p><ul><li>React ä¼šæ‰§è¡Œ <code>reducer(state, action)</code>ï¼›</li><li>å¾—åˆ°æ–°çš„ stateï¼›</li><li>é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">dispatch</span>(action)</span><br><span class="line">   â†“</span><br><span class="line"><span class="title function_">reducer</span>(state, action)</span><br><span class="line">   â†“</span><br><span class="line">newState â†’ è§¦å‘é‡æ–°æ¸²æŸ“</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰useState-vs-useReducer-é€‰æ‹©æŒ‡å—"><a href="#4ï¼‰useState-vs-useReducer-é€‰æ‹©æŒ‡å—" class="headerlink" title="4ï¼‰useState vs useReducer é€‰æ‹©æŒ‡å—"></a><strong><font color="#10c300">4ï¼‰useState vs useReducer é€‰æ‹©æŒ‡å—</font></strong></h4><table><thead><tr><th align="left">åœºæ™¯</th><th align="left">useState</th><th align="left">useReducer</th></tr></thead><tbody><tr><td align="left">çŠ¶æ€ç±»å‹</td><td align="left">ç®€å•å€¼ï¼ˆstring, number, booleanï¼‰</td><td align="left">å¤æ‚å¯¹è±¡ï¼ˆå«å¤šä¸ªå­—æ®µï¼‰</td></tr><tr><td align="left">æ›´æ–°é€»è¾‘</td><td align="left">ç›´æ¥è®¾ç½®æ–°å€¼</td><td align="left">åŸºäºåŠ¨ä½œï¼ˆactionï¼‰è®¡ç®—æ–°çŠ¶æ€</td></tr><tr><td align="left">çŠ¶æ€å…³è”</td><td align="left">ç‹¬ç«‹çŠ¶æ€</td><td align="left">å¤šçŠ¶æ€ç›¸äº’ä¾èµ–ï¼ˆå¦‚è¡¨å•æ ¡éªŒå½±å“æäº¤æŒ‰é’®ï¼‰</td></tr><tr><td align="left">çŠ¶æ€è½¬æ¢</td><td align="left">å°‘ï¼ˆ&lt; 3 ç§å˜åŒ–ï¼‰</td><td align="left">å¤šï¼ˆå¢åˆ æ”¹æŸ¥ã€åŠ è½½ã€é”™è¯¯å¤„ç†ï¼‰</td></tr><tr><td align="left">å¯æµ‹è¯•æ€§</td><td align="left">ä¸€èˆ¬</td><td align="left">é«˜ï¼ˆreducer æ˜¯çº¯å‡½æ•°ï¼‰</td></tr><tr><td align="left">å›¢é˜Ÿåä½œ</td><td align="left">å¿«é€Ÿå¼€å‘</td><td align="left">å¤§å‹é¡¹ç›®æ˜“ç»´æŠ¤</td></tr></tbody></table><p><strong>è½¬æ¢ä¿¡å·</strong>ï¼šå½“ <code>useState</code> å‡ºç°å¤šä¸ª <code>setXxx</code> è¿ç»­è°ƒç”¨ï¼Œæˆ–çŠ¶æ€é€»è¾‘è¶…è¿‡ 5 è¡Œæ—¶ï¼Œè€ƒè™‘æ”¹ç”¨ <code>useReducer</code>ã€‚</p><h4 id="5ï¼‰ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰"><a href="#5ï¼‰ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰" class="headerlink" title="5ï¼‰ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰"></a><strong><font color="#10c300">5ï¼‰ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰</font></strong></h4><p><code>useReducer</code> è¿˜æ”¯æŒä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå»¶è¿Ÿè®¡ç®—åˆå§‹çŠ¶æ€ï¼ˆé¿å…åˆå§‹åŒ–å¼€é”€ï¼‰ğŸ‘‡</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params">initialCount</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">count</span>: initialCount &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;reset&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">init</span>(action.<span class="property">payload</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, <span class="number">0</span>, init);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°: &#123;state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;reset&quot;, payload: 5 &#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        é‡ç½®ä¸º 5</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼é€‚ç”¨äºåˆå§‹çŠ¶æ€è®¡ç®—éå¸¸å¤æ‚çš„æƒ…å†µã€‚</p><h4 id="6ï¼‰useReducer-useContext"><a href="#6ï¼‰useReducer-useContext" class="headerlink" title="6ï¼‰useReducer + useContext"></a><strong><font color="#10c300">6ï¼‰useReducer + useContext</font></strong></h4><p><strong>1ï¸âƒ£å…¨å±€çŠ¶æ€ï¼ˆRedux æ€æƒ³ï¼‰</strong></p><p><code>useReducer</code> å¸¸é…åˆ <code>useContext</code> ä½¿ç”¨ï¼Œæ„å»ºè½»é‡â€œå…¨å±€çŠ¶æ€ç®¡ç†â€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer, useContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CounterContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;add&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CounterProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, dispatch] = <span class="title function_">useReducer</span>(reducer, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">CounterContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">count</span>, <span class="attr">dispatch</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CounterContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count, dispatch &#125; = <span class="title function_">useContext</span>(<span class="title class_">CounterContext</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;add&quot; &#125;)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… ç›¸å½“äºä¸€ä¸ªå°å‹ Reduxã€‚</p><hr><p><strong>2ï¸âƒ£ä¸»é¢˜åˆ‡æ¢</strong></p><p>ç”¨ <strong><code>useReducer</code> + <code>useContext</code></strong> å®ç°ä¸€ä¸ª<strong>å…¨å±€çŠ¶æ€ç®¡ç†ç³»ç»Ÿ</strong>ï¼Œå°±åƒä¸€ä¸ªè½»é‡ç‰ˆ Reduxã€‚</p><p>æˆ‘ä»¬ä»¥â€œä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰² &#x2F; æµ…è‰²ï¼‰â€ä¸ºä¾‹ ğŸ‘‡</p><p><strong><font color="cornflowerblue">ğŸ¯ åŠŸèƒ½ç›®æ ‡</font></strong></p><ul><li>é¡µé¢ä¸Šæœ‰å¤šä¸ªç»„ä»¶ï¼›</li><li>è¿™äº›ç»„ä»¶éƒ½èƒ½æ„ŸçŸ¥å½“å‰ä¸»é¢˜ï¼›</li><li>ç‚¹å‡»æŒ‰é’®å¯ä»¥åœ¨æµ…è‰²&#x2F;æ·±è‰²æ¨¡å¼ä¹‹é—´åˆ‡æ¢ï¼›</li><li>æ‰€æœ‰ç»„ä»¶è‡ªåŠ¨æ›´æ–°ï¼Œ<strong>ä¸ç”¨æ‰‹åŠ¨ä¼  props</strong>ã€‚</li></ul><p><strong><font color="cornflowerblue">ğŸ§±é¡¹ç›®ç»“æ„</font></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ ğŸ“ components/                   # ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ Header.jsx               # å­ç»„ä»¶ï¼Œè¯»å–ä¸»é¢˜å¹¶å±•ç¤º</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ Content.jsx              # å­ç»„ä»¶ï¼Œè¯»å–ä¸»é¢˜å¹¶å±•ç¤º</span><br><span class="line">â”œâ”€â”€ ğŸ“ context/                      # Context</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ index.js                 # åˆ›å»º Context + Reducer</span><br><span class="line">â””â”€â”€ ğŸ“„ App.jsx</span><br></pre></td></tr></table></figure><p>å®Œæ•´æ¡ˆä¾‹ï¼š<a target="_blank" rel="noopener" href="https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s/edit#S3pEZ">https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s/edit#S3pEZ</a></p><ul><li>é¡µé¢åŠ è½½æ—¶é»˜è®¤â€œæµ…è‰²â€ï¼›</li><li>ç‚¹å‡»â€œåˆ‡æ¢ä¸»é¢˜â€æŒ‰é’®ï¼›</li><li><code>dispatch</code> è§¦å‘ <code>TOGGLE_THEME</code>ï¼›</li><li><code>reducer</code> æ›´æ–° theme â†’ æ‰€æœ‰ä½¿ç”¨è¯¥çŠ¶æ€çš„ç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“ï¼›</li><li>æ‰€æœ‰ç»„ä»¶åŒæ­¥å˜æˆâ€œæ·±è‰²æ¨¡å¼â€ã€‚</li></ul><h4 id="7ï¼‰TypeScript-æœ€ä½³å®è·µ"><a href="#7ï¼‰TypeScript-æœ€ä½³å®è·µ" class="headerlink" title="7ï¼‰TypeScript æœ€ä½³å®è·µ"></a><strong><font color="#10c300">7ï¼‰TypeScript æœ€ä½³å®è·µ</font></strong></h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å®šä¹‰ State å’Œ Action ç±»å‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">State</span> &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">error</span>: <span class="built_in">string</span> | <span class="literal">null</span>;</span><br><span class="line">  <span class="attr">status</span>: <span class="string">&quot;idle&quot;</span> | <span class="string">&quot;loading&quot;</span> | <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Action</span> =</span><br><span class="line">  | &#123; <span class="attr">type</span>: <span class="string">&quot;increment&quot;</span> &#125;</span><br><span class="line">  | &#123; <span class="attr">type</span>: <span class="string">&quot;decrement&quot;</span> &#125;</span><br><span class="line">  | &#123; <span class="attr">type</span>: <span class="string">&quot;reset&quot;</span>; <span class="attr">payload</span>: <span class="built_in">number</span> &#125;</span><br><span class="line">  | &#123; <span class="attr">type</span>: <span class="string">&quot;setError&quot;</span>; <span class="attr">error</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Reducer ç±»å‹æ¨æ–­</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params"><span class="attr">state</span>: <span class="title class_">State</span>, <span class="attr">action</span>: <span class="title class_">Action</span></span>): <span class="title class_">State</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;reset&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">count</span>: action.<span class="property">payload</span>, <span class="attr">status</span>: <span class="string">&quot;idle&quot;</span> &#125;;</span><br><span class="line">    <span class="comment">// TypeScript ä¼šæ£€æŸ¥æ˜¯å¦å¤„ç†äº†æ‰€æœ‰ action type</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">error</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">status</span>: <span class="string">&quot;idle&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// dispatch ç±»å‹å®‰å…¨ï¼Œé”™è¯¯çš„ action ä¼šæŠ¥é”™</span></span><br><span class="line">  <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;increment&quot;</span> &#125;); <span class="comment">// âœ…</span></span><br><span class="line">  <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;reset&quot;</span>, <span class="attr">payload</span>: <span class="number">10</span> &#125;); <span class="comment">// âœ…</span></span><br><span class="line">  <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;unknown&quot;</span> &#125;); <span class="comment">// âŒ TypeScript é”™è¯¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><p>ğŸŒŸ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p><p><code>useReducer</code> &#x3D; â€œå¤æ‚ç‰ˆ useStateâ€<br>å½“çŠ¶æ€é€»è¾‘å¤æ‚æˆ–å¤šæ­¥éª¤æ›´æ–°æ—¶ï¼Œç”¨ reducer ç®¡ç†æ›´å¹²å‡€ã€æ›´å¯é ã€‚</p><br><h3 id="4-7-useRef-å¼•ç”¨-DOM-å’Œä¿å­˜å¯å˜å€¼"><a href="#4-7-useRef-å¼•ç”¨-DOM-å’Œä¿å­˜å¯å˜å€¼" class="headerlink" title="4.7 useRef - å¼•ç”¨ DOM å’Œä¿å­˜å¯å˜å€¼"></a><strong><font color="red">4.7 useRef - å¼•ç”¨ DOM å’Œä¿å­˜å¯å˜å€¼</font></strong></h3><p>âœ… <code>useRef</code> è¿”å›ä¸€ä¸ª <strong>å¯å˜çš„ ref å¯¹è±¡</strong> <code>&#123; current: ... &#125;</code><br>è¿™ä¸ªå¯¹è±¡çš„ <code>.current</code> å±æ€§å¯ä»¥å­˜å‚¨ä»»ä½•å€¼ï¼ˆDOM å…ƒç´ ã€å®šæ—¶å™¨ IDã€æ™®é€šå˜é‡ç­‰ï¼‰ï¼Œ<strong>æ”¹å˜ <code>.current</code> ä¸ä¼šè§¦å‘ç»„ä»¶é‡æ¸²æŸ“</strong>ã€‚</p><p>å®ƒçš„ä¸¤ä¸ªä¸»è¦ç”¨é€”ï¼š</p><ol><li><strong>è®¿é—® DOM å…ƒç´ </strong>ï¼ˆå‡½æ•°ç»„ä»¶ä¸­æ›¿ä»£ <code>document.querySelector</code>ï¼‰</li><li><strong>ä¿å­˜ä»»æ„å˜é‡å€¼</strong>ï¼ˆè¿™ä¸ªå€¼åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ï¼Œä¸ä¼šå› é‡æ–°æ¸²æŸ“è€Œä¸¢å¤±ï¼‰</li></ol><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-5"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-5" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> refContainer = <span class="title function_">useRef</span>(initialValue);</span><br></pre></td></tr></table></figure><ul><li><code>initialValue</code> æ˜¯åˆå§‹å€¼</li><li><code>refContainer.current</code> æ˜¯å­˜æ”¾å€¼çš„åœ°æ–¹</li><li>æ”¹å˜ <code>refContainer.current</code> <strong>ä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</strong></li></ul><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-2"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-2" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ æ“ä½œ DOM å…ƒç´ </font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">InputFocus</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>); <span class="comment">// åˆå§‹ current = null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">focusInput</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    inputRef.<span class="property">current</span>.<span class="title function_">focus</span>(); <span class="comment">// è·å– DOM èŠ‚ç‚¹å¹¶èšç„¦</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç‚¹å‡»æŒ‰é’®èšç„¦æˆ‘&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;focusInput&#125;</span>&gt;</span>èšç„¦è¾“å…¥æ¡†<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">InputFocus</span>;</span><br></pre></td></tr></table></figure><ul><li><code>ref=&#123;inputRef&#125;</code> å°† DOM èŠ‚ç‚¹ç»‘å®šåˆ° <code>inputRef.current</code></li><li>ç‚¹å‡»æŒ‰é’®æ—¶æ‰§è¡Œ <code>inputRef.current.focus()</code> æ¥è®©è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹</li></ul><hr><p><strong><font color="#00A6ED">2ï¸âƒ£ ç”¨æ¥å­˜å‚¨å¯å˜å€¼</font></strong></p><p><code>useRef</code> å¯ä»¥ç”¨æ¥å­˜å‚¨ä»»æ„å¯å˜å€¼ï¼Œè€Œä¸”å³ä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸ªå€¼ä»ç„¶ä¿ç•™ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">RenderCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> renderTimes = <span class="title function_">useRef</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    renderTimes.<span class="property">current</span> += <span class="number">1</span>; <span class="comment">// æ¯æ¬¡æ¸²æŸ“ +1</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç»„ä»¶æ¸²æŸ“&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æŒ‰é’®ç‚¹å‡»æ¬¡æ•°ï¼š&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç»„ä»¶æ¸²æŸ“æ¬¡æ•°ï¼š&#123;renderTimes.current&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* è¿™é‡Œç‚¹å‡»è°ƒç”¨äº†useStateï¼Œå¯¼è‡´é¡µé¢é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯useRefä¸€ç›´å¤„äºå åŠ çŠ¶æ€ï¼Œæ²¡æœ‰åˆå§‹åˆ°0 è¯´æ˜å…·æœ‰æŒä¹…æ€§ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;ç‚¹å‡»<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">RenderCount</span>;</span><br></pre></td></tr></table></figure><ul><li><code>renderTimes.current</code> æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å¼•ç”¨ï¼Œç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šç´¯åŠ ï¼Œä½†ä¸ä¼šå¼•èµ·é¢å¤–çš„æ¸²æŸ“</li><li>å¯¹ <code>useRef</code> å˜é‡çš„ä¿®æ”¹ä¸ä¼šè§¦å‘ UI æ›´æ–°</li></ul><h4 id="3ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"><a href="#3ï¼‰æ³¨æ„äº‹é¡¹âš ï¸" class="headerlink" title="3ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"></a><strong><font color="#10c300">3ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</font></strong></h4><ol><li><p><strong>ä¸è¦ç”¨å®ƒæ¥ä»£æ›¿ state</strong>ï¼Œé™¤éä½ ä¸éœ€è¦è§¦å‘æ¸²æŸ“ã€‚</p></li><li><p><code>.current</code> ä¿®æ”¹ä¸ä¼šæ›´æ–° UIï¼Œåªæœ‰ <code>state</code> æ›´æ–°ä¼šè§¦å‘æ¸²æŸ“ã€‚</p></li><li><p>è®¿é—® DOM èŠ‚ç‚¹è¦ç¡®ä¿è¯¥èŠ‚ç‚¹å·²ç»æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼ˆé€šå¸¸åœ¨ <code>useEffect</code> ä¸­ä½¿ç”¨ï¼‰ã€‚</p></li><li><p>å‡½æ•°ç»„ä»¶ä¸èƒ½ä½¿ç”¨refï¼Œå› ä¸ºå‡½æ•°ç»„ä»¶æ²¡æœ‰å®ä¾‹ï¼ˆå’Œ forwardRef æ­é…å¯ä½¿ç”¨refï¼‰</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./child&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> domRef = <span class="title function_">useRef</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* é”™è¯¯å†™æ³•ï¼Œå‡½æ•°ç»„ä»¶ä¸èƒ½ä½¿ç”¨refï¼Œå› ä¸ºå‡½æ•°ç»„ä»¶æ²¡æœ‰å®ä¾‹ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;domRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span>&gt;</span>çˆ¶ç»„ä»¶çš„æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure></li></ol><h4 id="4ï¼‰å’Œ-forwardRef-æ­é…"><a href="#4ï¼‰å’Œ-forwardRef-æ­é…" class="headerlink" title="4ï¼‰å’Œ forwardRef æ­é…"></a><strong><font color="#10c300">4ï¼‰å’Œ forwardRef æ­é…</font></strong></h4><p><a name="forwardRef"><strong><code>useRef</code></strong> é…åˆ <strong><code>forwardRef</code></strong> å¯ä»¥å°† ref ä¼ ç»™å­ç»„ä»¶ä¸­çš„ DOM å…ƒç´ ï¼š</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef, forwardRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CustomInput</span> = <span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> myInputRef = <span class="title function_">useRef</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CustomInput</span> <span class="attr">ref</span>=<span class="string">&#123;myInputRef&#125;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è‡ªå®šä¹‰ç»„ä»¶ä¸­çš„è¾“å…¥æ¡†&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> myInputRef.current.focus()&#125;&gt;èšç„¦<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>âœ… è¿™æ ·å¯ä»¥è®©çˆ¶ç»„ä»¶ç›´æ¥æ“ä½œå­ç»„ä»¶å†…éƒ¨çš„ DOM å…ƒç´ ã€‚</p><p><strong><font color="red">ğŸš«åœ¨react19ä¸­å·²åºŸå¼ƒforwardRef</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… React 19 å†™æ³•ï¼šç›´æ¥ä» props ä¸­è·å– ref</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CustomInput</span>(<span class="params">&#123; placeholder, ref, ...props &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> <span class="attr">placeholder</span>=<span class="string">&#123;placeholder&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> myInputRef = <span class="title function_">useRef</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CustomInput</span> <span class="attr">ref</span>=<span class="string">&#123;myInputRef&#125;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è‡ªå®šä¹‰ç»„ä»¶ä¸­çš„è¾“å…¥æ¡†&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> myInputRef.current.focus()&#125;&gt;èšç„¦<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰TypeScript-æ”¯æŒ"><a href="#5ï¼‰TypeScript-æ”¯æŒ" class="headerlink" title="5ï¼‰TypeScript æ”¯æŒ"></a><strong><font color="#10c300">5ï¼‰TypeScript æ”¯æŒ</font></strong></h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DOM å…ƒç´ å¼•ç”¨ï¼ˆè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> inputRef = useRef&lt;<span class="title class_">HTMLInputElement</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">inputRef.<span class="property">current</span>?.<span class="title function_">focus</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é DOM å¼•ç”¨éœ€è¦æ˜¾å¼ç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> timerRef = useRef&lt;<span class="built_in">number</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">timerRef.<span class="property">current</span> = <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¡®ä¿æœ‰åˆå§‹å€¼ï¼ˆé nullï¼‰</span></span><br><span class="line"><span class="keyword">const</span> countRef = useRef&lt;<span class="built_in">number</span>&gt;(<span class="number">0</span>);</span><br><span class="line">countRef.<span class="property">current</span> += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MutableRefObject vs RefObjectD</span></span><br><span class="line"><span class="comment">// useRef&lt;T&gt;(null) -&gt; RefObject&lt;T&gt;ï¼ˆcurrent åªè¯»ï¼Œç”¨äº DOMï¼‰</span></span><br><span class="line"><span class="comment">// useRef&lt;T&gt;(undefined) æˆ– useRef&lt;T&gt;(initial) -&gt; MutableRefObject&lt;T&gt;ï¼ˆcurrent å¯å†™ï¼‰</span></span><br></pre></td></tr></table></figure><br><h3 id="4-8-useId-ç”Ÿæˆå”¯ä¸€-ID"><a href="#4-8-useId-ç”Ÿæˆå”¯ä¸€-ID" class="headerlink" title="4.8 useId - ç”Ÿæˆå”¯ä¸€ ID"></a><strong><font color="red">4.8 useId - ç”Ÿæˆå”¯ä¸€ ID</font></strong></h3><p><code>useId</code> æ˜¯ä¸€ä¸ª React å†…ç½® Hookï¼Œç”¨æ¥ç”Ÿæˆä¸€ä¸ªç¨³å®šä¸”å”¯ä¸€çš„ ID å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”¨äºï¼š</p><ul><li><strong>æ— éšœç¢ï¼ˆa11yï¼‰åœºæ™¯</strong>ï¼šè®© <code>label</code> å’Œè¡¨å•æ§ä»¶é…å¯¹ä½¿ç”¨ï¼›</li><li><strong>æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</strong>ï¼šé˜²æ­¢å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ¸²æŸ“çš„ ID ä¸ä¸€è‡´ï¼›</li><li><strong>ç”Ÿæˆç¨³å®šå”¯ä¸€ key&#x2F;id</strong>ï¼ˆæ¯æ¬¡æ¸²æŸ“ä¿æŒä¸å˜ï¼‰ã€‚</li></ul><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-6"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-6" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> id = <span class="title function_">useId</span>();</span><br></pre></td></tr></table></figure><ul><li>è¿”å›ä¸€ä¸ªåœ¨å½“å‰ç»„ä»¶ä½œç”¨åŸŸå†… <strong>å”¯ä¸€ä¸”ç¨³å®š</strong> çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š<code>&quot;r1:0&quot;</code>ã€‚</li><li>æ¯æ¬¡æ¸²æŸ“éƒ½ä¿è¯ç›¸åŒç»„ä»¶ä¸­çš„ id ä¸€è‡´ã€‚</li><li>ä¸ä¼šåœ¨ä¸åŒç»„ä»¶ä¹‹é—´é‡å¤ã€‚</li></ul><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-3"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-3" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ å…³è” <code>&lt;label&gt;</code> ä¸ <code>&lt;input&gt;</code></font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">jsximport <span class="title class_">React</span>, &#123; useId &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NameField</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> id = <span class="title function_">useId</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#123;id&#125;</span>&gt;</span>å§“åï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&#123;id&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å§“å&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">NameField</span>;</span><br></pre></td></tr></table></figure><p>âœ… åœ¨è¿™é‡Œï¼š</p><ul><li><code>useId</code> ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ idï¼›</li><li><code>label</code> çš„ <code>htmlFor</code> ä¸ <code>input</code> çš„ <code>id</code> ä¸€è‡´ï¼›</li><li>å½“å¤šä¸ª <code>NameField</code> ç»„ä»¶åŒæ—¶å­˜åœ¨æ—¶ï¼Œæ¯ä¸ªç»„ä»¶ç”Ÿæˆçš„ id ä¸ä¼šå†²çªã€‚</li></ul><hr><p><strong><font color="#00A6ED">2ï¸âƒ£ ç»„åˆå‰ç¼€ä½¿ç”¨ï¼ˆæ¨èï¼‰</font></strong></p><p>ä¸ºäº†æ›´æ˜ç¡®åŒºåˆ†ä¸åŒæ§ä»¶ï¼Œå¯ä»¥åŠ ä¸Šè‡ªå®šä¹‰å‰ç¼€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jsxconst id = <span class="title function_">useId</span>();</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&#123;</span>`<span class="attr">email-</span>$&#123;<span class="attr">id</span>&#125;`&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#123;</span>`<span class="attr">email-</span>$&#123;<span class="attr">id</span>&#125;`&#125;&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ç»“æœç±»æ¯”ï¼š<code>id=&quot;email-r1:0&quot;</code>, <code>email-r1:1</code> ç­‰ã€‚</p><h4 id="3ï¼‰ä¸-SSR-é…åˆ"><a href="#3ï¼‰ä¸-SSR-é…åˆ" class="headerlink" title="3ï¼‰ä¸ SSR é…åˆ"></a><strong><font color="#10c300">3ï¼‰ä¸ SSR é…åˆ</font></strong></h4><p>React 18 å¼•å…¥äº† <code>useId</code>ï¼Œæ˜¯ä¸ºäº†è§£å†³ <strong>æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆServer Side Renderingï¼‰</strong> æ—¶ç”Ÿæˆçš„ ID ä¸ä¸€è‡´é—®é¢˜ï¼š</p><ul><li>SSR é˜¶æ®µä¼šç”Ÿæˆç¨³å®šçš„ IDã€‚</li><li>Hydrationï¼ˆå®¢æˆ·ç«¯æ¿€æ´»ï¼‰æ—¶ï¼ŒReact ä¼šä¿è¯å®¢æˆ·ç«¯ç”Ÿæˆçš„ id ä¸æœåŠ¡ç«¯çš„ä¸€è‡´ã€‚</li></ul><p>âœ… æ‰€ä»¥ <code>useId</code> æ˜¯ <strong>SSR å®‰å…¨çš„å”¯ä¸€ ID</strong>ã€‚</p><h4 id="4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"><a href="#4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸" class="headerlink" title="4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"></a><strong><font color="#10c300">4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</font></strong></h4><ol><li><code>useId</code> <strong>ä¸é€‚åˆå½“ä½œåˆ—è¡¨ key çš„å”¯ä¸€æ ‡è¯†</strong>ï¼Œå› ä¸ºå®ƒåªåœ¨ç»„ä»¶ä½œç”¨åŸŸç‹¬ç«‹å”¯ä¸€ï¼Œä¸æ˜¯æ•°æ®å±‚å”¯ä¸€ã€‚</li><li>æ¯æ¬¡è°ƒç”¨ <code>useId</code> éƒ½ä¼šç”Ÿæˆä¸€ä¸ªä¸åŒçš„å­ IDï¼ŒReact å†…éƒ¨æœ‰æœºåˆ¶ç¡®ä¿ç»„åˆæ—¶ä¸å†²çªã€‚</li><li>åªå¯åœ¨ <strong>ç»„ä»¶åˆå§‹åŒ–é˜¶æ®µè°ƒç”¨ä¸€æ¬¡</strong>ï¼Œå³è®© <code>id</code> åœ¨æ•´ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ç¨³å®šã€‚</li></ol><br><h3 id="4-9-useDeferredValue-å»¶è¿Ÿæ›´æ–°å€¼"><a href="#4-9-useDeferredValue-å»¶è¿Ÿæ›´æ–°å€¼" class="headerlink" title="4.9 useDeferredValue - å»¶è¿Ÿæ›´æ–°å€¼"></a><strong><font color="red">4.9 useDeferredValue - å»¶è¿Ÿæ›´æ–°å€¼</font></strong></h3><p>å½“ä½ æ›´æ–°æŸä¸ªçŠ¶æ€æ—¶ï¼ŒReact ä¸ä¸€å®šç«‹åˆ»åŒæ­¥æ¸²æŸ“ä½¿ç”¨è¿™ä¸ªå€¼çš„éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¼š<strong>ä¼˜å…ˆæ¸²æŸ“æ›´ç´§æ€¥çš„æ›´æ–°ï¼ˆäº¤äº’ã€è¾“å…¥ï¼‰</strong>ï¼Œç¨åå†æ›´æ–°é‚£äº›è€—æ—¶çš„æ¸²æŸ“éƒ¨åˆ†ã€‚</p><p>âœ… ç®€å•ç†è§£ï¼šè®©é¡µé¢ä¸­ä¸å¤ªé‡è¦çš„éƒ¨åˆ†â€œæ™šä¸€ç‚¹æ›´æ–°â€ï¼Œä»¥ä¿è¯ç”¨æˆ·æ“ä½œæ›´æµç•…ã€‚</p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-7"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-7" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deferredValue = <span class="title function_">useDeferredValue</span>(value);</span><br></pre></td></tr></table></figure><ul><li><code>value</code>ï¼šåŸå§‹çš„å€¼ï¼ˆå¯èƒ½å˜åŒ–é¢‘ç¹ï¼‰</li><li><code>deferredValue</code>ï¼šReact è¿”å›çš„å»¶è¿Ÿæ›´æ–°çš„å€¼</li></ul><p>å½“ <code>value</code> æ”¹å˜æ—¶ï¼ŒReact <strong>ä¸ä¼šç«‹å³</strong>è®© <code>deferredValue</code> åŒæ­¥ï¼Œè€Œæ˜¯â€œç¨åâ€æ›´æ–°å®ƒï¼ˆåŸºäºè°ƒåº¦ä¼˜å…ˆçº§ï¼‰ï¼Œå¦‚æœæ›´æ–°éå¸¸å¿«ï¼Œæ¯”å¦‚é¢‘ç¹è¾“å…¥ï¼Œ<code>deferredValue</code> ä¼šæ»åä¸€ç‚¹è·Ÿä¸Šã€‚</p><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-4"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-4" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ æœç´¢è¿‡æ»¤ï¼ˆå¤§åˆ—è¡¨ï¼‰</font></strong></p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¾“å…¥æ¡†ç”¨äºæœç´¢å¤§é‡æ•°æ®ï¼Œè¾“å…¥è¿‡ç¨‹ä¸­ä½ ä¸å¸Œæœ›æ¯ä¸ªå­—æ¯éƒ½ç«‹å³å¯¼è‡´æ˜‚è´µçš„æ¸²æŸ“ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useDeferredValue, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SlowList</span>(<span class="params">&#123; input &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿå¤§æ•°æ®è¿‡æ»¤ï¼ˆè€—æ—¶ï¼‰ è¦é…åˆuseMemoä½¿ç”¨ï¼Œè¦ä¸ç„¶å­ç»„ä»¶æ¯æ¬¡æ¸²æŸ“ï¼Œä¹Ÿä¼šå¯¼è‡´è¾“å…¥å¡é¡¿</span></span><br><span class="line">  <span class="keyword">const</span> list = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> items = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">      items.<span class="title function_">push</span>(</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;input&#125; - é¡¹ &#123;i&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> items;</span><br><span class="line">  &#125;, [input]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;list&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SearchPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> deferredQuery = <span class="title function_">useDeferredValue</span>(query); <span class="comment">// ğŸ‘ˆ å»¶è¿Ÿä½¿ç”¨ query</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;query&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setQuery(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">        placeholder=&quot;è¾“å…¥æœç´¢å…³é”®è¯...&quot;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;/* ä½¿ç”¨å»¶è¿Ÿçš„çŠ¶æ€å€¼æ¸²æŸ“å¤§åˆ—è¡¨ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SlowList</span> <span class="attr">input</span>=<span class="string">&#123;deferredQuery&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">SearchPage</span>;</span><br></pre></td></tr></table></figure><p><strong>ğŸ” æ•ˆæœï¼š</strong></p><ul><li>è¾“å…¥æ¡†å“åº”éå¸¸é¡ºç•…ï¼›</li><li>åˆ—è¡¨æ¸²æŸ“ç¨å¾®æ»åä¸€ç‚¹æ›´æ–°ï¼ˆä¸ä¼šé˜»å¡è¾“å…¥ï¼‰ï¼›</li><li>React è‡ªåŠ¨å®‰æ’è¾ƒä½ä¼˜å…ˆçº§çš„æ¸²æŸ“ä»»åŠ¡ã€‚</li></ul><h4 id="3ï¼‰useDeferredValueçš„æœ¬è´¨"><a href="#3ï¼‰useDeferredValueçš„æœ¬è´¨" class="headerlink" title="3ï¼‰useDeferredValueçš„æœ¬è´¨"></a><strong><font color="#10c300">3ï¼‰useDeferredValueçš„æœ¬è´¨</font></strong></h4><p>å®ƒåˆ©ç”¨äº† <strong>React çš„å¹¶å‘ç‰¹æ€§ï¼ˆConcurrent Renderingï¼‰</strong><br>è®©æŸäº›æ›´æ–°ä»¥è¾ƒä½ä¼˜å…ˆçº§è¿›è¡Œï¼š</p><ul><li>ç”¨æˆ·è¾“å…¥ â†’ é«˜ä¼˜å…ˆçº§ï¼›</li><li>åˆ—è¡¨æ›´æ–° â†’ ä½ä¼˜å…ˆçº§ï¼›</li><li>React å†…éƒ¨å¯åœ¨åˆé€‚æ—¶æœºå¤„ç†ä½ä¼˜å…ˆçº§æ›´æ–°ã€‚</li></ul><p>æ‰€ä»¥å®ƒéå¸¸é€‚åˆï¼š</p><ul><li>è¾“å…¥æœç´¢æ—¶å±•ç¤ºç»“æœï¼›</li><li>å¤§é‡æ•°æ®è¿‡æ»¤ï¼›</li><li>å¤æ‚æ¸²æŸ“åœºæ™¯ä¸­ä¿æŒ UI äº’åŠ¨æµç•…ã€‚</li></ul><h4 id="4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸-1"><a href="#4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸-1" class="headerlink" title="4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"></a><strong><font color="#10c300">4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</font></strong></h4><table><thead><tr><th>æ³¨æ„ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸ä¼šè·³è¿‡æ›´æ–°</td><td>åªæ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Œæœ€ç»ˆä»ä¼šåŒæ­¥åˆ°æœ€æ–°å€¼</td></tr><tr><td>ä¸å»ºè®®ç”¨äºå…³é”® UI çŠ¶æ€</td><td>å› ä¸ºå®ƒå¯èƒ½æš‚æ—¶è½åäºçœŸå®å€¼</td></tr><tr><td>éœ€è¦ React 18+</td><td>å±äºå¹¶å‘ç³»ç»Ÿçš„åŠŸèƒ½</td></tr><tr><td>å¯æ­é… <code>useTransition</code> ä¸€èµ·ä½¿ç”¨</td><td>å…±åŒæ§åˆ¶æ›´æ–°ä¼˜å…ˆçº§æ›´åŠ çµæ´»</td></tr></tbody></table><br><h3 id="4-10-useTransition-éé˜»å¡çŠ¶æ€æ›´æ–°"><a href="#4-10-useTransition-éé˜»å¡çŠ¶æ€æ›´æ–°" class="headerlink" title="4.10 useTransition - éé˜»å¡çŠ¶æ€æ›´æ–°"></a><strong><font color="red">4.10 useTransition - éé˜»å¡çŠ¶æ€æ›´æ–°</font></strong></h3><p>ç”¨æ¥å°†æŸäº›çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºâ€œè¿‡æ¸¡æ›´æ–°ï¼ˆtransition updateï¼‰â€ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå®ƒå‘Šè¯‰ Reactï¼š</p><blockquote><p>â€œè¿™ç±»æ›´æ–°ä¸ç”¨ç«‹åˆ»æ‰§è¡Œï¼Œå¯ä»¥ç¨åå®Œæˆï¼Œè®©ç”¨æˆ·äº¤äº’ä¸è¦è¢«å¡é¡¿ã€‚â€</p></blockquote><p>åœ¨ Reactâ€¯18 çš„ <strong>å¹¶å‘æ¸²æŸ“æ¨¡å¼</strong> ä¸‹ï¼Œæ›´æ–°æœ‰ä¼˜å…ˆçº§åŒºåˆ†ï¼š</p><ul><li><strong>ç´§æ€¥æ›´æ–°ï¼ˆUrgentï¼‰</strong>ï¼šç«‹åˆ»æ‰§è¡Œï¼Œæ¯”å¦‚è¾“å…¥æ¡†ã€ç‚¹å‡»ã€‚</li><li><strong>è¿‡æ¸¡æ›´æ–°ï¼ˆTransitionï¼‰</strong>ï¼šå¯ä»¥å»¶åï¼Œæ¯”å¦‚ç­›é€‰ã€åˆ†é¡µã€æ’åºã€å¤§åˆ—è¡¨æ¸²æŸ“ã€‚</li></ul><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•æœç´¢è¿‡æ»¤"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•æœç´¢è¿‡æ»¤" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•æœç´¢è¿‡æ»¤"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•æœç´¢è¿‡æ»¤</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [isPending, startTransition] = <span class="title function_">useTransition</span>();</span><br></pre></td></tr></table></figure><ul><li><p><code>isPending</code> ï¼šå¸ƒå°”å€¼ï¼šè¡¨ç¤ºè¿‡æ¸¡æ›´æ–°æ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­ï¼Œå¯ç”¨äºæ˜¾ç¤ºâ€œåŠ è½½ä¸­â€¦â€</p></li><li><p><code>startTransition()</code>ï¼šå‡½æ•°ï¼šç”¨äºåŒ…è£¹å±äºè¿‡æ¸¡æ›´æ–°çš„ä»£ç ï¼ˆä¾‹å¦‚ setStateï¼‰</p></li></ul><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-5"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-5" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useTransition &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> allItems = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">20000</span> &#125;, <span class="function">(<span class="params">_, i</span>) =&gt;</span> <span class="string">`Item <span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">List</span>(<span class="params">&#123; list &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;list.map((item) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [list, setList] = <span class="title function_">useState</span>(allItems);</span><br><span class="line">  <span class="keyword">const</span> [isPending, startTransition] = <span class="title function_">useTransition</span>(); <span class="comment">// ğŸ‘ˆ ä½¿ç”¨ useTransition</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> newQuery = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">    <span class="title function_">setQuery</span>(newQuery); <span class="comment">// ç´§æ€¥æ›´æ–°ï¼ˆç«‹å³å“åº”è¾“å…¥ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿‡æ»¤æ“ä½œæ ‡è®°ä¸ºâ€œè¿‡æ¸¡æ›´æ–°â€ï¼Œä¸ä¼šé˜»å¡è¾“å…¥</span></span><br><span class="line">    <span class="title function_">startTransition</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> filtered = allItems.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span></span><br><span class="line">        item.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(newQuery.<span class="title function_">toLowerCase</span>()),</span><br><span class="line">      );</span><br><span class="line">      <span class="title function_">setList</span>(filtered);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">padding:</span> <span class="attr">20</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>useTransition ä¼˜åŒ–çš„æœç´¢ç¤ºä¾‹<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;query&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥å…³é”®å­—è¿‡æ»¤åˆ—è¡¨â€¦&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;isPending &amp;&amp; <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &quot;<span class="attr">orange</span>&quot; &#125;&#125;&gt;</span>æ­£åœ¨è¿‡æ»¤æ•°æ®â€¦<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>åŒ¹é…åˆ° &#123;list.length&#125; æ¡ç»“æœ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">List</span> <span class="attr">list</span>=<span class="string">&#123;list&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>âœ… ä½“éªŒï¼š<br>è¾“å…¥æ¡†è¾“å…¥å³æ—¶å“åº”ï¼›<br>åˆ—è¡¨è¿‡æ»¤æ˜¯å»¶åæ‰§è¡Œçš„ï¼Œç•Œé¢ä¸ä¼šå¡é¡¿ã€‚</p><h4 id="3ï¼‰å·¥ä½œåŸç†"><a href="#3ï¼‰å·¥ä½œåŸç†" class="headerlink" title="3ï¼‰å·¥ä½œåŸç†"></a><strong><font color="#10c300">3ï¼‰å·¥ä½œåŸç†</font></strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æˆ·è¾“å…¥ â†’ ç«‹å³æ›´æ–°è¾“å…¥æ¡†ï¼ˆç´§æ€¥æ›´æ–°ï¼‰</span><br><span class="line">        â†“</span><br><span class="line">React ç©ºé—²æ—¶ â†’ æ‰§è¡Œè¿‡æ»¤é€»è¾‘ï¼ˆè¿‡æ¸¡æ›´æ–°ï¼‰</span><br><span class="line">        â†“</span><br><span class="line">è¿‡æ¸¡å®Œæˆ â†’ isPending = falseï¼Œåˆ—è¡¨æ›´æ–°</span><br></pre></td></tr></table></figure><p>å½“ <code>startTransition</code> å†…çš„æ›´æ–°åœ¨è¿›è¡Œæ—¶ï¼š</p><ul><li>React ä¼šä¼˜å…ˆå¤„ç†äº¤äº’äº‹ä»¶ï¼ˆæ¯”å¦‚è¾“å…¥æ¡†ï¼‰ï¼Œ</li><li>æš‚ç¼“å…¶ä»–è¾ƒæ…¢çš„æ¸²æŸ“ä»»åŠ¡ï¼Œ</li><li>ç¡®ä¿ç•Œé¢æµç•…ã€‚</li></ul><h4 id="4ï¼‰ä¸useDeferredValueçš„å¯¹æ¯”"><a href="#4ï¼‰ä¸useDeferredValueçš„å¯¹æ¯”" class="headerlink" title="4ï¼‰ä¸useDeferredValueçš„å¯¹æ¯”"></a><strong><font color="#10c300">4ï¼‰ä¸useDeferredValueçš„å¯¹æ¯”</font></strong></h4><ul><li><strong><code>useDeferredValue</code></strong> ä¸»è¦ç”¨äºå»¶è¿Ÿå•ä¸ªå€¼çš„æ›´æ–°ï¼Œé€‚ç”¨äºå€¼çš„å˜åŒ–ç›´æ¥å½±å“åˆ° UI æ¸²æŸ“ä½†åˆä¸æ˜¯ç«‹å³å¿…è¦çš„æ›´æ–°ã€‚</li><li><strong><code>useTransition</code></strong> ç”¨äºå‘Šè¯‰ React å“ªäº›æ›´æ–°æ˜¯ä½ä¼˜å…ˆçº§çš„ï¼Œå¹¶å¯ä½¿ç”¨ <code>isPending</code> çŠ¶æ€åé¦ˆæ›´æ–°æ˜¯å¦å¤„äºç­‰å¾…çŠ¶æ€ï¼Œé€‚ç”¨äºæ§åˆ¶å¤§å—åŒºåŸŸæˆ–å¤æ‚çŠ¶æ€çš„æ›´æ–°è¡Œä¸ºï¼Œå…è®¸ä½ åœ¨è§¦å‘æ›´æ–°æ—¶æä¾›æ›´è‡ªç„¶çš„ç”¨æˆ·ä½“éªŒã€‚</li></ul><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th><code>useTransition</code></th><th><code>useDeferredValue</code></th></tr></thead><tbody><tr><td>æ§åˆ¶å¯¹è±¡</td><td>ä¸€æ•´æ®µçŠ¶æ€æ›´æ–°ï¼ˆ<code>setState</code>ï¼‰</td><td>ä¸€ä¸ªçŠ¶æ€å€¼</td></tr><tr><td>å»¶è¿Ÿæ–¹å¼</td><td>æ‰‹åŠ¨åŒ…è£¹æ›´æ–°</td><td>è‡ªåŠ¨ä½¿å€¼å»¶è¿Ÿç”Ÿæ•ˆ</td></tr><tr><td>è¿”å›å€¼</td><td><code>[isPending, startTransition]</code></td><td><code>deferredValue</code></td></tr><tr><td>æ˜¯å¦æœ‰åŠ è½½çŠ¶æ€</td><td>âœ… æœ‰ <code>isPending</code></td><td>âŒ éœ€æ‰‹åŠ¨æ¯”è¾ƒ</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>ä½ è¦å»¶è¿Ÿæ‰§è¡ŒæŸä¸ªæ›´æ–°é€»è¾‘</td><td>ä½ è¦å»¶è¿ŸæŸä¸ªå€¼ä¼ é€’ä¸‹å»</td></tr></tbody></table><h4 id="5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"><a href="#5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸" class="headerlink" title="5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"></a><strong><font color="#10c300">5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</font></strong></h4><ul><li><code>useTransition</code> åªåœ¨ Reactâ€¯18+ æœ‰æ•ˆæœï¼›</li><li>å®ƒä¸ä¼šè·³è¿‡æ¸²æŸ“ï¼Œåªæ˜¯è°ƒåº¦é¡ºåºä¸åŒï¼›</li><li>ä¸é€‚ç”¨äºåŠ¨ç”»æˆ–æ—¶é—´å»¶è¿Ÿï¼Œåªæ”¹å˜æ›´æ–°ä¼˜å…ˆçº§ï¼›</li><li>ä¸è¦æ»¥ç”¨â€”â€”ä»…åœ¨æ€§èƒ½ç“¶é¢ˆæˆ–å¡é¡¿æ—¶ä½¿ç”¨ã€‚</li></ul><br><h3 id="4-11-useImperativeHandle-æš´éœ²è‡ªå®šä¹‰ref"><a href="#4-11-useImperativeHandle-æš´éœ²è‡ªå®šä¹‰ref" class="headerlink" title="4.11 useImperativeHandle - æš´éœ²è‡ªå®šä¹‰ref"></a><strong><font color="red">4.11 useImperativeHandle - æš´éœ²è‡ªå®šä¹‰ref</font></strong></h3><p><code>useImperativeHandle</code> ç”¨äºè‡ªå®šä¹‰é€šè¿‡ ref æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚å®ƒé€šå¸¸ä¸ <code>forwardRef</code> é…åˆä½¿ç”¨ï¼ˆReact 19 å ref å¯ä½œä¸º prop ç›´æ¥ä¼ é€’ï¼‰ã€‚<a href="#forwardRef">forwardRefç”¨æ³•</a></p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-8"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-8" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useImperativeHandle</span>(ref, createHandle, deps?)</span><br></pre></td></tr></table></figure><ul><li><strong>ref</strong>ï¼šä» <code>forwardRef</code> æˆ– props ä¼ å…¥çš„ ref</li><li><strong>createHandle</strong>ï¼šè¿”å›æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å¯¹è±¡</li><li><strong>deps</strong>ï¼šä¾èµ–æ•°ç»„ï¼Œç±»ä¼¼ <code>useEffect</code></li></ul><h4 id="2ï¼‰React-19-ä¹‹å‰çš„å†™æ³•ï¼ˆforwardRefï¼‰"><a href="#2ï¼‰React-19-ä¹‹å‰çš„å†™æ³•ï¼ˆforwardRefï¼‰" class="headerlink" title="2ï¼‰React 19 ä¹‹å‰çš„å†™æ³•ï¼ˆforwardRefï¼‰"></a><strong><font color="#10c300">2ï¼‰React 19 ä¹‹å‰çš„å†™æ³•ï¼ˆforwardRefï¼‰</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef, useImperativeHandle, forwardRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useImperativeHandle</span>(</span><br><span class="line">    ref,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">focus</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        inputRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">getValue</span>: <span class="function">() =&gt;</span> inputRef.<span class="property">current</span>.<span class="property">value</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    [],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥å†…å®¹&quot;</span> /&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> childRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨å­ç»„ä»¶æš´éœ²çš„æ–¹æ³•</span></span><br><span class="line">    childRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(childRef.<span class="property">current</span>.<span class="title function_">getValue</span>());</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;childRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>æ“ä½œå­ç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰React-19-çš„ç®€åŒ–å†™æ³•"><a href="#3ï¼‰React-19-çš„ç®€åŒ–å†™æ³•" class="headerlink" title="3ï¼‰React 19 çš„ç®€åŒ–å†™æ³•"></a><strong><font color="#10c300">3ï¼‰React 19 çš„ç®€åŒ–å†™æ³•</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef, useImperativeHandle &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; ref &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useImperativeHandle</span>(</span><br><span class="line">    ref,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">      <span class="attr">focus</span>: <span class="function">() =&gt;</span> inputRef.<span class="property">current</span>?.<span class="title function_">focus</span>(),</span><br><span class="line">      <span class="attr">clear</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (inputRef.<span class="property">current</span>) inputRef.<span class="property">current</span>.<span class="property">value</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    [],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> childRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨å­ç»„ä»¶æš´éœ²çš„æ–¹æ³•</span></span><br><span class="line">    childRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">    childRef.<span class="property">current</span>.<span class="title function_">clear</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;childRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>æ“ä½œå­ç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰ä½¿ç”¨åœºæ™¯"><a href="#4ï¼‰ä½¿ç”¨åœºæ™¯" class="headerlink" title="4ï¼‰ä½¿ç”¨åœºæ™¯"></a><strong><font color="#10c300">4ï¼‰ä½¿ç”¨åœºæ™¯</font></strong></h4><p><strong>1ï¸âƒ£ å°è£…ç¬¬ä¸‰æ–¹ç»„ä»¶</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">FancyInput</span> = <span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useImperativeHandle</span>(ref, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// åªæš´éœ²ç‰¹å®šçš„ APIï¼Œéšè—å†…éƒ¨å®ç°</span></span><br><span class="line">    <span class="attr">focus</span>: <span class="function">() =&gt;</span> inputRef.<span class="property">current</span>.<span class="title function_">focus</span>(),</span><br><span class="line">    <span class="attr">scrollIntoView</span>: <span class="function">() =&gt;</span></span><br><span class="line">      inputRef.<span class="property">current</span>.<span class="title function_">scrollIntoView</span>(&#123; <span class="attr">behavior</span>: <span class="string">&quot;smooth&quot;</span> &#125;),</span><br><span class="line">  &#125;));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£åŠ¨ç”»æ§åˆ¶</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AnimatedBox</span> = <span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> elementRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useImperativeHandle</span>(ref, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">shake</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      elementRef.<span class="property">current</span>?.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;shake-animation&quot;</span>);</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        elementRef.<span class="property">current</span>?.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;shake-animation&quot;</span>);</span><br><span class="line">      &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">highlight</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      elementRef.<span class="property">current</span>?.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;highlight&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;elementRef&#125;</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸-1"><a href="#5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸-1" class="headerlink" title="5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸"></a><strong><font color="#10c300">5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</font></strong></h4><ol><li><p><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong>ï¼šä¼˜å…ˆé€šè¿‡ props å’Œ state è¿›è¡Œæ•°æ®æµé€šä¿¡ï¼Œrefs æ˜¯â€é€ƒç”Ÿèˆ±â€</p></li><li><p><strong>è¿”å›å€¼é™åˆ¶</strong>ï¼š<code>createHandle</code> è¿”å›çš„å¯¹è±¡ä¸­ä¸èƒ½åŒ…å«åŸå§‹ç±»å‹çš„ ref å€¼ï¼ˆå¦‚ <code>&#123; current: ... &#125;</code>ï¼‰ï¼Œåªèƒ½æ˜¯æ™®é€šå‡½æ•°æˆ–å€¼</p></li><li><p><strong>TypeScript æ”¯æŒ</strong>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">ChildRef</span> &#123;</span><br><span class="line">    <span class="attr">focus</span>: <span class="function">() =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">    <span class="attr">clear</span>: <span class="function">() =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = forwardRef&lt;<span class="title class_">ChildRef</span>, <span class="title class_">Props</span>&gt;(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">useImperativeHandle</span>(ref, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">focus</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">        <span class="attr">clear</span>: <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¸ <code>useRef</code> é…åˆ</strong>ï¼šé€šå¸¸åœ¨å­ç»„ä»¶å†…éƒ¨ç»´æŠ¤å®é™… DOM refï¼Œå†é€šè¿‡ <code>useImperativeHandle</code> é€‰æ‹©æ€§æš´éœ²æ–¹æ³•</p></li><li><p><strong>æ¸…ç†é€»è¾‘</strong>ï¼šå¦‚æœæš´éœ²çš„æ–¹æ³•æ¶‰åŠå‰¯ä½œç”¨ï¼ˆå¦‚å®šæ—¶å™¨ï¼‰ï¼Œè®°å¾—åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†</p></li></ol><p>è¿™ä¸ªæ¨¡å¼é€‚ç”¨äºéœ€è¦<strong>å‘½ä»¤å¼æ“ä½œ</strong>ï¼ˆå¦‚èšç„¦ã€æ’­æ”¾ã€æ»šåŠ¨ã€è§¦å‘åŠ¨ç”»ï¼‰ä½†ä¸æƒ³æš´éœ²æ•´ä¸ª DOM èŠ‚ç‚¹çš„åœºæ™¯ã€‚</p><br><h3 id="4-12-useLayoutEffect-åŒæ­¥æ‰§è¡Œçš„å‰¯ä½œç”¨"><a href="#4-12-useLayoutEffect-åŒæ­¥æ‰§è¡Œçš„å‰¯ä½œç”¨" class="headerlink" title="4.12 useLayoutEffect - åŒæ­¥æ‰§è¡Œçš„å‰¯ä½œç”¨"></a><strong><font color="red">4.12 useLayoutEffect - åŒæ­¥æ‰§è¡Œçš„å‰¯ä½œç”¨</font></strong></h3><blockquote><p><code>useLayoutEffect</code> å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚å°½å¯èƒ½ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/useEffect"><code>useEffect</code></a></p></blockquote><p><code>useLayoutEffect</code> ä¸ <code>useEffect</code> ç­¾åå®Œå…¨ç›¸åŒï¼Œä½†æ‰§è¡Œæ—¶æœºä¸åŒï¼š<strong>åœ¨æµè§ˆå™¨ç»˜åˆ¶ï¼ˆpaintï¼‰ä¹‹å‰åŒæ­¥æ‰§è¡Œ</strong>ï¼Œç”¨äºé¿å…è§†è§‰é—ªçƒã€‚</p><hr><h4 id="1ï¼‰æ‰§è¡Œæ—¶æœºå¯¹æ¯”"><a href="#1ï¼‰æ‰§è¡Œæ—¶æœºå¯¹æ¯”" class="headerlink" title="1ï¼‰æ‰§è¡Œæ—¶æœºå¯¹æ¯”"></a><strong><font color="#10c300">1ï¼‰æ‰§è¡Œæ—¶æœºå¯¹æ¯”</font></strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç»„ä»¶æ¸²æŸ“å®Œæˆ</span><br><span class="line">    â†“</span><br><span class="line">useLayoutEffectï¼ˆåŒæ­¥æ‰§è¡Œï¼Œé˜»å¡ç»˜åˆ¶ï¼‰â† åœ¨è¿™é‡Œä¿®æ”¹ DOMï¼Œç”¨æˆ·çœ‹ä¸åˆ°ä¸­é—´æ€</span><br><span class="line">    â†“</span><br><span class="line">æµè§ˆå™¨ç»˜åˆ¶ï¼ˆPaintï¼‰åˆ°å±å¹•</span><br><span class="line">    â†“</span><br><span class="line">useEffectï¼ˆå¼‚æ­¥æ‰§è¡Œï¼Œä¸é˜»å¡ç»˜åˆ¶ï¼‰</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯-1"><a href="#2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯-1" class="headerlink" title="2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯"></a><strong><font color="#10c300">2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯</font></strong></h4><p><strong>1ï¸âƒ£æµ‹é‡ DOM å¹¶åŒæ­¥ä¿®æ”¹ï¼ˆé˜²æ­¢é—ªçƒï¼‰</strong></p><p>**å®Œæ•´æ¡ˆä¾‹ï¼š**<a target="_blank" rel="noopener" href="https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s/edit#fdd2408c">https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s/edit#fdd2408c</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useLayoutEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Tooltip</span>(<span class="params">&#123; children, content &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [position, setPosition] = <span class="title function_">useState</span>(&#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">0</span> &#125;);</span><br><span class="line">  <span class="keyword">const</span> triggerRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> tooltipRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> triggerRect = triggerRef.<span class="property">current</span>.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">    <span class="keyword">const</span> tooltipRect = tooltipRef.<span class="property">current</span>.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®— tooltip ä½ç½®ï¼ˆä¾‹å¦‚æ˜¾ç¤ºåœ¨ trigger ä¸Šæ–¹ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> top = triggerRect.<span class="property">top</span> - tooltipRect.<span class="property">height</span> - <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">const</span> left = triggerRect.<span class="property">left</span> + (triggerRect.<span class="property">width</span> - tooltipRect.<span class="property">width</span>) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒæ­¥è®¾ç½®ä½ç½®ï¼Œç”¨æˆ·ä¸ä¼šçœ‹åˆ° tooltip å…ˆå‡ºç°åœ¨é”™è¯¯ä½ç½®</span></span><br><span class="line">    <span class="title function_">setPosition</span>(&#123; top, left &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">ref</span>=<span class="string">&#123;triggerRef&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;tooltipRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">position:</span> &quot;<span class="attr">fixed</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">top:</span> <span class="attr">position.top</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">left:</span> <span class="attr">position.left</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;content&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœç”¨ <code>useEffect</code> ä¼šæ€æ ·ï¼Ÿ</strong></p><ul><li>æµè§ˆå™¨å…ˆç»˜åˆ¶ tooltip åœ¨é»˜è®¤ä½ç½®ï¼ˆä¾‹å¦‚ 0,0ï¼‰</li><li>ç”¨æˆ·çœ‹åˆ°ä¸€é—ªè€Œè¿‡çš„é”™ä½</li><li>ç„¶å <code>useEffect</code> æ‰§è¡Œï¼Œè·³è½¬åˆ°æ­£ç¡®ä½ç½®</li></ul><hr><p><strong>2ï¸âƒ£ä»æœåŠ¡ç«¯æ¸²æŸ“æ¢å¤ï¼ˆSSR Hydrationï¼‰</strong></p><p>å½“æœåŠ¡ç«¯æ¸²æŸ“çš„ HTML ä¸å®¢æˆ·ç«¯é¦–æ¬¡æ¸²æŸ“ä¸ä¸€è‡´æ—¶ï¼Œç”¨ <code>useLayoutEffect</code> åœ¨ç»˜åˆ¶å‰ä¿®æ­£ï¼Œé¿å… hydration ä¸åŒ¹é…è­¦å‘Šï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ClientOnlyComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [width, setWidth] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœåŠ¡ç«¯æ²¡æœ‰ windowï¼Œé»˜è®¤æ¸²æŸ“ä¸º 0</span></span><br><span class="line">  <span class="comment">// å®¢æˆ·ç«¯åœ¨ç»˜åˆ¶å‰åŒæ­¥è®¡ç®—å®é™…å®½åº¦ï¼Œé˜²æ­¢é—ªçƒ</span></span><br><span class="line">  <span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setWidth</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>çª—å£å®½åº¦: &#123;width&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰ä¸-useEffect-çš„é€‰æ‹©æŒ‡å—"><a href="#3ï¼‰ä¸-useEffect-çš„é€‰æ‹©æŒ‡å—" class="headerlink" title="3ï¼‰ä¸ useEffect çš„é€‰æ‹©æŒ‡å—"></a><strong><font color="#10c300">3ï¼‰ä¸ useEffect çš„é€‰æ‹©æŒ‡å—</font></strong></h4><table><thead><tr><th align="left">åœºæ™¯</th><th align="left">æ¨è</th><th align="left">åŸå› </th></tr></thead><tbody><tr><td align="left">æ•°æ®è·å–</td><td align="left"><code>useEffect</code></td><td align="left">ä¸é˜»å¡ç»˜åˆ¶ï¼Œç”¨æˆ·æ›´å¿«çœ‹åˆ°å†…å®¹</td></tr><tr><td align="left">äº‹ä»¶ç›‘å¬</td><td align="left"><code>useEffect</code></td><td align="left">ä¸é˜»å¡ç»˜åˆ¶</td></tr><tr><td align="left">åŸºäº DOM æµ‹é‡è°ƒæ•´å¸ƒå±€</td><td align="left"><code>useLayoutEffect</code></td><td align="left">é˜²æ­¢é—ªçƒ</td></tr><tr><td align="left">åŠ¨ç”»åˆå§‹çŠ¶æ€</td><td align="left"><code>useLayoutEffect</code></td><td align="left">é˜²æ­¢é—ªçƒ</td></tr><tr><td align="left">DOM ä¿®æ”¹ï¼ˆå¦‚èšç„¦ï¼‰</td><td align="left"><code>useEffect</code></td><td align="left">é€šå¸¸ä¸éœ€è¦åŒæ­¥ï¼Œé™¤éæœ‰è§†è§‰é—®é¢˜</td></tr></tbody></table><p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼šå…ˆä½¿ç”¨ <code>useEffect</code>ï¼Œå¦‚æœå‡ºç°<strong>è§†è§‰é—ªçƒ</strong>ï¼ˆflickerï¼‰å†æ”¹ä¸º <code>useLayoutEffect</code></p><h4 id="4ï¼‰æ€§èƒ½è­¦å‘Š-âš ï¸"><a href="#4ï¼‰æ€§èƒ½è­¦å‘Š-âš ï¸" class="headerlink" title="4ï¼‰æ€§èƒ½è­¦å‘Š âš ï¸"></a><strong><font color="#10c300">4ï¼‰æ€§èƒ½è­¦å‘Š âš ï¸</font></strong></h4><p><code>useLayoutEffect</code> <strong>ä¼šé˜»å¡æµè§ˆå™¨ç»˜åˆ¶</strong>ï¼Œæ‰§è¡Œæ—¶é—´è¿‡é•¿ä¼šå¯¼è‡´ï¼š</p><ol><li><p><strong>æ‰å¸§&#x2F;å¡é¡¿</strong>ï¼šç”¨æˆ·æ„Ÿè§‰åˆ°ç•Œé¢å¡ä½</p></li><li><p><strong>å»¶è¿Ÿäº¤äº’</strong>ï¼šæ— æ³•å“åº”ç”¨æˆ·è¾“å…¥</p></li><li><p><strong>å½±å“ç”¨æˆ·ä½“éªŒ</strong>ï¼šæ¯”è½»å¾®çš„è§†è§‰é—ªçƒæ›´ç³Ÿç³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šåœ¨ useLayoutEffect ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</span></span><br><span class="line"><span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤§æ•°æ®å¤„ç†ä¼šé˜»å¡ç»˜åˆ¶</span></span><br><span class="line">  <span class="keyword">const</span> processed = <span class="title function_">heavyDataProcessing</span>(data);</span><br><span class="line">  <span class="title function_">setData</span>(processed);</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šè€—æ—¶æ“ä½œåº”åœ¨ useEffect ä¸­</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> processed = <span class="title function_">heavyDataProcessing</span>(data);</span><br><span class="line">  <span class="title function_">setData</span>(processed);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure></li></ol><br><h3 id="4-13-è‡ªå®šä¹‰-Hooks"><a href="#4-13-è‡ªå®šä¹‰-Hooks" class="headerlink" title="4.13 è‡ªå®šä¹‰ Hooks"></a><strong><font color="red">4.13 è‡ªå®šä¹‰ Hooks</font></strong></h3><p>è‡ªå®šä¹‰ Hook æ˜¯<strong>æå–ç»„ä»¶é€»è¾‘åˆ°å¯å¤ç”¨å‡½æ•°</strong>çš„æœºåˆ¶ï¼Œè§£å†³ React ä¸­çŠ¶æ€é€»è¾‘å¤ç”¨é—®é¢˜ï¼ˆæ›¿ä»£é«˜é˜¶ç»„ä»¶ HOC å’Œ Render Propsï¼‰ã€‚</p><h4 id="1ï¼‰æ ¸å¿ƒè§„åˆ™"><a href="#1ï¼‰æ ¸å¿ƒè§„åˆ™" class="headerlink" title="1ï¼‰æ ¸å¿ƒè§„åˆ™"></a><strong><font color="#10c300">1ï¼‰æ ¸å¿ƒè§„åˆ™</font></strong></h4><p><strong>1ï¸âƒ£ å‘½åå¿…é¡»ä»¥ <code>use</code> å¼€å¤´</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šReact è¯†åˆ«ä¸º Hookï¼Œä¼šæ£€æŸ¥è§„åˆ™</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useWindowSize</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šæ™®é€šå‡½æ•°ï¼ŒReact ä¸ä¼šåº”ç”¨ Hook è§„åˆ™</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getWindowSize</span>(<span class="params"></span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£éµå¾ª Hooks è§„åˆ™</strong></p><ul><li>åªåœ¨é¡¶å±‚è°ƒç”¨ï¼ˆä¸åœ¨å¾ªç¯ã€æ¡ä»¶ã€åµŒå¥—å‡½æ•°ä¸­ï¼‰</li><li>åªåœ¨ React å‡½æ•°æˆ–è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨</li></ul><h4 id="2ï¼‰åŸºç¡€æ¨¡æ¿"><a href="#2ï¼‰åŸºç¡€æ¨¡æ¿" class="headerlink" title="2ï¼‰åŸºç¡€æ¨¡æ¿"></a><strong><font color="#10c300">2ï¼‰åŸºç¡€æ¨¡æ¿</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useCustomHook</span>(<span class="params">arg</span>) &#123;</span><br><span class="line">  <span class="comment">// å¯ä»¥ä½¿ç”¨å…¶ä»– Hooks</span></span><br><span class="line">  <span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(initialValue);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å‰¯ä½œç”¨é€»è¾‘</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ¸…ç†é€»è¾‘</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [arg]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›çŠ¶æ€ã€æ–¹æ³•æˆ–è®¡ç®—å€¼</span></span><br><span class="line">  <span class="keyword">return</span> [state, setState]; <span class="comment">// æˆ–è¿”å›å¯¹è±¡ &#123; state, action &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰å®æˆ˜ç¤ºä¾‹"><a href="#3ï¼‰å®æˆ˜ç¤ºä¾‹" class="headerlink" title="3ï¼‰å®æˆ˜ç¤ºä¾‹"></a><strong><font color="#10c300">3ï¼‰å®æˆ˜ç¤ºä¾‹</font></strong></h4><p><strong>1ï¸âƒ£useLocalStorageï¼ˆæŒä¹…åŒ–çŠ¶æ€ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> useLocalStorage <span class="keyword">from</span> <span class="string">&quot;./Hooks/useLocalStorage&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [name, setName] = <span class="title function_">useLocalStorage</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;Guest&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;name&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setName(e.target.value)&#125; /&gt;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// src\Hooks\useLocalStorage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useLocalStorage</span>(<span class="params">key, initialValue</span>) &#123;</span><br><span class="line">    <span class="comment">// æƒ°æ€§åˆå§‹åŒ–ï¼šä» localStorage è¯»å–</span></span><br><span class="line">    <span class="keyword">const</span> [storedValue, setStoredValue] = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> item = <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">            <span class="keyword">return</span> item ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(item) : initialValue;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">            <span class="keyword">return</span> initialValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–° localStorage å½“çŠ¶æ€å˜åŒ–</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">setValue</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> valueToStore = value <span class="keyword">instanceof</span> <span class="title class_">Function</span> ? <span class="title function_">value</span>(storedValue) : value;</span><br><span class="line">            <span class="title function_">setStoredValue</span>(valueToStore);</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(valueToStore));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [storedValue, setValue];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useLocalStorage</span><br></pre></td></tr></table></figure><hr><p><strong>2ï¸âƒ£useDebounceï¼ˆé˜²æŠ–ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> useDebounce <span class="keyword">from</span> <span class="string">&quot;./Hooks/useDebounce&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SearchInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> debouncedText = <span class="title function_">useDebounce</span>(text, <span class="number">500</span>); <span class="comment">// 500ms é˜²æŠ–</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (debouncedText) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(debouncedText); <span class="comment">// åªåœ¨åœæ­¢è¾“å…¥ 500ms åæœç´¢</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, [debouncedText]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setText(e.target.value)&#125; /&gt;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">SearchInput</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// src\Hooks\useDebounce.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useDebounce</span>(<span class="params">value, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [debouncedValue, setDebouncedValue] = <span class="title function_">useState</span>(value);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> handler = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">setDebouncedValue</span>(value);</span><br><span class="line">        &#125;, delay);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(handler); <span class="comment">// æ¸…é™¤ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;, [value, delay]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> debouncedValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useDebounce</span><br></pre></td></tr></table></figure><hr><p><strong>3ï¸âƒ£useFetchï¼ˆæ•°æ®è·å–ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useFetch</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">isLoading</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">error</span>: <span class="literal">null</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cancelled = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setState</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> (&#123; ...prev, <span class="attr">isLoading</span>: <span class="literal">true</span> &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="title function_">fetch</span>(url)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!cancelled) &#123;</span><br><span class="line">          <span class="title function_">setState</span>(&#123; data, <span class="attr">isLoading</span>: <span class="literal">false</span>, <span class="attr">error</span>: <span class="literal">null</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!cancelled) &#123;</span><br><span class="line">          <span class="title function_">setState</span>(&#123; <span class="attr">data</span>: <span class="literal">null</span>, <span class="attr">isLoading</span>: <span class="literal">false</span>, error &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      cancelled = <span class="literal">true</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [url]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserProfile</span>(<span class="params">&#123; userId &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: user, isLoading, error &#125; = <span class="title function_">useFetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;userId&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isLoading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Spinner</span> /&gt;</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Error</span> <span class="attr">message</span>=<span class="string">&#123;error.message&#125;</span> /&gt;</span></span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;user.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>4ï¸âƒ£useMediaQueryï¼ˆå“åº”å¼ï¼‰</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMediaQuery</span>(<span class="params">query</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [matches, setMatches] = <span class="title function_">useState</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">matchMedia</span>(query).<span class="property">matches</span>,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> media = <span class="variable language_">window</span>.<span class="title function_">matchMedia</span>(query);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">listener</span> = (<span class="params"></span>) =&gt; <span class="title function_">setMatches</span>(media.<span class="property">matches</span>);</span><br><span class="line">    media.<span class="title function_">addEventListener</span>(<span class="string">&quot;change&quot;</span>, listener);</span><br><span class="line">    <span class="title function_">setMatches</span>(media.<span class="property">matches</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> media.<span class="title function_">removeEventListener</span>(<span class="string">&quot;change&quot;</span>, listener);</span><br><span class="line">  &#125;, [query]); <span class="comment">// ä¸å¿…ä¾èµ– matches</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> matches;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ResponsiveComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> isMobile = <span class="title function_">useMediaQuery</span>(<span class="string">&quot;(max-width: 768px)&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> isTablet = <span class="title function_">useMediaQuery</span>(<span class="string">&quot;(min-width: 769px) and (max-width: 1024px)&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;isMobile ? &quot;æ‰‹æœºè§†å›¾&quot; : isTablet ? &quot;å¹³æ¿è§†å›¾&quot; : &quot;æ¡Œé¢è§†å›¾&quot;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ResponsiveComponent</span>;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰é«˜çº§æ¨¡å¼"><a href="#4ï¼‰é«˜çº§æ¨¡å¼" class="headerlink" title="4ï¼‰é«˜çº§æ¨¡å¼"></a><strong><font color="#10c300">4ï¼‰é«˜çº§æ¨¡å¼</font></strong></h4><p><strong>1ï¸âƒ£ç»„åˆå¤šä¸ª Hooksï¼ˆè‡ªå®šä¹‰ Hook ä½¿ç”¨å…¶ä»–è‡ªå®šä¹‰ Hookï¼‰</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useWindowSize</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [size, setSize] = <span class="title function_">useState</span>(&#123; <span class="attr">width</span>: <span class="number">0</span>, <span class="attr">height</span>: <span class="number">0</span> &#125;);</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">update</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">      <span class="title function_">setSize</span>(&#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="variable language_">window</span>.<span class="property">innerWidth</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="variable language_">window</span>.<span class="property">innerHeight</span>,</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, update);</span><br><span class="line">    <span class="title function_">update</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;resize&quot;</span>, update);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„åˆä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useBreakpoint</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; width &#125; = <span class="title function_">useWindowSize</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">isMobile</span>: width &lt; <span class="number">768</span>,</span><br><span class="line">      <span class="attr">isTablet</span>: width &gt;= <span class="number">768</span> &amp;&amp; width &lt; <span class="number">1024</span>,</span><br><span class="line">      <span class="attr">isDesktop</span>: width &gt;= <span class="number">1024</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [width]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> breakpoints = <span class="title function_">useBreakpoint</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Current Breakpoints<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;JSON.stringify(breakpoints, null, 4)&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£è¿”å›ç¨³å®šå¼•ç”¨ï¼ˆé˜²æ­¢æ— é™é‡æ¸²æŸ“ï¼‰</strong></p><p>**å®Œæ•´æ¡ˆä¾‹ï¼š**<a target="_blank" rel="noopener" href="https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s/edit#Xexzy">https://www.yuque.com/zhbiao/qr34us/qk5da4gmpqzhat4s/edit#Xexzy</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useAuth</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ useCallback ä¿æŒæ–¹æ³•å¼•ç”¨ç¨³å®š</span></span><br><span class="line">  <span class="keyword">const</span> login = <span class="title function_">useCallback</span>(<span class="title function_">async</span> (credentials) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> api.<span class="title function_">login</span>(credentials);</span><br><span class="line">    <span class="title function_">setUser</span>(user);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> logout = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    api.<span class="title function_">logout</span>();</span><br><span class="line">    <span class="title function_">setUser</span>(<span class="literal">null</span>);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ useMemo ä¿æŒå¯¹è±¡å¼•ç”¨ç¨³å®š</span></span><br><span class="line">  <span class="keyword">const</span> value = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      user,</span><br><span class="line">      <span class="attr">isAuthenticated</span>: !!user,</span><br><span class="line">      login,</span><br><span class="line">      logout,</span><br><span class="line">    &#125;),</span><br><span class="line">    [user, login, logout],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨å¯ä»¥å®‰å…¨åœ°ç”¨äº useEffect ä¾èµ–</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (auth.<span class="property">isAuthenticated</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¸ä¼šå¯¼è‡´æ— é™å¾ªç¯ï¼Œå› ä¸º auth å¼•ç”¨ç¨³å®š</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [auth]);</span><br></pre></td></tr></table></figure><br><h4 id="5ï¼‰å¸¸è§é™·é˜±"><a href="#5ï¼‰å¸¸è§é™·é˜±" class="headerlink" title="5ï¼‰å¸¸è§é™·é˜±"></a><strong><font color="#10c300">5ï¼‰å¸¸è§é™·é˜±</font></strong></h4><p><strong>1ï¸âƒ£ä¾èµ–æ•°ç»„é—æ¼</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šhandler å˜åŒ–æ—¶ä¸ä¼šæ›´æ–°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useEventListener</span>(<span class="params">eventName, handler</span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(eventName, handler);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(eventName, handler);</span><br><span class="line">  &#125;, []); <span class="comment">// ç¼ºå°‘ handler</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šä½†è¦æ±‚ä½¿ç”¨è€…ä½¿ç”¨ useCallback åŒ…è£¹ handler</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(eventName, handler);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(eventName, handler);</span><br><span class="line">&#125;, [eventName, handler]);</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£è¿”å›ä¸ç¨³å®šå¼•ç”¨å¯¼è‡´é‡æ¸²æŸ“</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šæ¯æ¬¡è¿”å›æ–°æ•°ç»„</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="title function_">fetchData</span>();</span><br><span class="line">  <span class="keyword">return</span> [data, data.<span class="property">length</span>]; <span class="comment">// æ–°æ•°ç»„å¼•ç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šä¿æŒå¼•ç”¨ç¨³å®š</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="title function_">fetchData</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> [data, data.<span class="property">length</span>], [data]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ Hook</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useConditionalHook</span>(<span class="params">condition</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(<span class="number">0</span>); <span class="comment">// Hook åœ¨æ¡ä»¶ä¸­ï¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useConditionalHook</span>(<span class="params">condition</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="comment">// æ ¹æ® condition å†³å®šæ˜¯å¦ä½¿ç”¨ state</span></span><br><span class="line">  <span class="keyword">return</span> condition ? state : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="äº”ã€-HOC-é«˜é˜¶ç»„ä»¶"><a href="#äº”ã€-HOC-é«˜é˜¶ç»„ä»¶" class="headerlink" title="äº”ã€ HOC é«˜é˜¶ç»„ä»¶"></a><strong>äº”ã€ HOC é«˜é˜¶ç»„ä»¶</strong></h2><p>é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç»„ä»¶å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š</p><h3 id="5-1-React-memo"><a href="#5-1-React-memo" class="headerlink" title="5.1 React.memo"></a><strong><font color="red">5.1 React.memo</font></strong></h3><p><code>memo</code> æ˜¯ä¸€ä¸ª <strong>é«˜é˜¶ç»„ä»¶</strong>ï¼Œç”¨äº<strong>ä¼˜åŒ–å‡½æ•°ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</strong>ã€‚åªæœ‰å½“å®ƒçš„ <strong>props å‘ç”Ÿå˜åŒ–</strong> æ—¶ï¼ŒReact æ‰ä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ã€‚å¦åˆ™ï¼Œå®ƒä¼šç›´æ¥å¤ç”¨ä¸Šä¸€æ¬¡çš„æ¸²æŸ“ç»“æœï¼Œæé«˜æ€§èƒ½ã€‚</p><hr><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-9"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-9" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥åœ¨çˆ¶ç»„ä»¶å°†å¼•å…¥çš„å­ç»„ä»¶MyComponentä½¿ç”¨memoç¼“å­˜</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoizedComponent</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>);</span><br></pre></td></tr></table></figure><p>æˆ–è€…å®šä¹‰æ—¶ç›´æ¥ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥åœ¨å­ç»„ä»¶å¯¼å‡ºçš„æ—¶å€™å°±å¯¹å½“å‰ç»„ä»¶MyComponentä½¿ç”¨memoç¼“å­˜</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>);</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰åŸºæœ¬ç¤ºä¾‹"><a href="#2ï¼‰åŸºæœ¬ç¤ºä¾‹" class="headerlink" title="2ï¼‰åŸºæœ¬ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰åŸºæœ¬ç¤ºä¾‹</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="string">&quot;çˆ¶ç»„ä»¶æ•°æ®&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> [b] = <span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;çˆ¶ç»„ä»¶æ¸²æŸ“äº†&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setData(`æ–°æ•°æ®$&#123;new Date().getTime()&#125;`)&#125;&gt;æˆ‘æ˜¯Appï¼š&#123;data&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span> <span class="attr">b</span>=<span class="string">&#123;b&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line">============================================åˆ†å‰²çº¿==============================================</span><br><span class="line"></span><br><span class="line"><span class="comment">// Child.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å­ç»„ä»¶æ¸²æŸ“äº†&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶: &#123;props.b&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ React.memo åŒ…è£…ç»„ä»¶ï¼Œåªæœ‰å½“ props å‘ç”Ÿå˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br></pre></td></tr></table></figure><p><strong>ğŸ” è¾“å‡ºç»“æœï¼š</strong></p><ul><li>åˆå§‹åŒ–çš„æ—¶å€™çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶éƒ½æ¸²æŸ“</li><li>è§¦å‘çˆ¶ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶ï¼ŒdataçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ŒbçŠ¶æ€æœªå˜ï¼Œå­ç»„ä»¶æœªè§¦å‘æ¸²æŸ“</li></ul><p>å¦‚æœç”¨çš„æ˜¯æ™®é€šç»„ä»¶ï¼Œå“ªæ€• props ä¸€æ ·ï¼Œä¹Ÿä¼šé‡æ–°æ¸²æŸ“ã€‚</p><h4 id="3ï¼‰å·¥ä½œåŸç†-1"><a href="#3ï¼‰å·¥ä½œåŸç†-1" class="headerlink" title="3ï¼‰å·¥ä½œåŸç†"></a><strong><font color="#10c300">3ï¼‰å·¥ä½œåŸç†</font></strong></h4><p><code>React.memo</code> åœ¨æ¸²æŸ“åï¼Œä¼š <strong>ä¿å­˜ä¸Šä¸€æ¬¡çš„ props</strong>ã€‚<br>ä¸‹ä¸€æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå®ƒä¼šåšä¸€ä¸ª <strong>æµ…æ¯”è¾ƒï¼ˆshallow compareï¼‰</strong>ï¼š</p><ul><li>å¦‚æœæ—§çš„ props ä¸æ–°çš„ props å†…å®¹ä¸€è‡´ â†’ è·³è¿‡æ¸²æŸ“ï¼›</li><li>å¦‚æœä¸åŒ â†’ é‡æ–°æ¸²æŸ“ã€‚</li></ul><blockquote><p>é»˜è®¤æ¯”è¾ƒæ˜¯æµ…å±‚ï¼ˆåªæ¯”è¾ƒåŸºç¡€ç±»å‹æˆ–å¼•ç”¨æ˜¯å¦ç›¸åŒï¼‰ï¼Œ<br>å¯¹è±¡&#x2F;æ•°ç»„ç±»å‹çš„ props å¦‚æœæ–°å»ºäº†å¯¹è±¡ï¼Œå°±ä¼šè®¤ä¸ºä¸åŒã€‚</p></blockquote><h4 id="4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°"><a href="#4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°" class="headerlink" title="4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°"></a><strong><font color="#10c300">4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</font></strong></h4><p>æœ‰æ—¶å€™ä½ å¸Œæœ›æ§åˆ¶â€œä»€ä¹ˆç®—å˜â€ï¼Œå¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Memoized</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>, <span class="function">(<span class="params">prevProps, nextProps</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿”å› true è¡¨ç¤ºä¸éœ€è¦é‡æ–°æ¸²æŸ“ï¼ˆprops ç›¸ç­‰ï¼‰</span></span><br><span class="line">  <span class="comment">// è¿”å› false è¡¨ç¤ºéœ€è¦é‡æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">return</span> prevProps.<span class="property">id</span> === nextProps.<span class="property">id</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯"><a href="#5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯" class="headerlink" title="5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯"></a><strong><font color="#10c300">5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯</font></strong></h4><table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆ—è¡¨é¡¹ç»„ä»¶</td><td>åˆ—è¡¨ä¸­æœ‰å¤§é‡å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶é¢‘ç¹æ›´æ–°</td></tr><tr><td>è¡¨å•ç»„ä»¶</td><td>è¾“å…¥å˜åŒ–å¯¼è‡´æ•´ä¸ªé¡µé¢é‡æ¸²æŸ“</td></tr><tr><td>å¤æ‚ç»„ä»¶</td><td>å†…éƒ¨æ¸²æŸ“ä»£ä»·é«˜ä½† props å¾ˆç¨³å®š</td></tr><tr><td>ä¸ useCallback æ­é…</td><td>ä¿æŒä¼ å…¥å‡½æ•°å¼•ç”¨ä¸€è‡´ï¼Œé¿å…è¯¯è§¦æ›´æ–°</td></tr></tbody></table><h4 id="6ï¼‰ä¸-useCallback-å’Œ-useMemo-çš„é…åˆ"><a href="#6ï¼‰ä¸-useCallback-å’Œ-useMemo-çš„é…åˆ" class="headerlink" title="6ï¼‰ä¸ useCallback å’Œ useMemo çš„é…åˆ"></a><strong><font color="#10c300">6ï¼‰ä¸ useCallback å’Œ useMemo çš„é…åˆ</font></strong></h4><p><code>React.memo</code> åªå…³å¿ƒ props æ˜¯å¦å˜åŒ–ã€‚ä½†æ˜¯å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¯æ¬¡æ¸²æŸ“å‡½æ•°éƒ½æ˜¯æ–°å¼•ç”¨ï¼Œå°±ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚å‡½æ•°ä½œä¸º <code>props</code> çš„â€œå¼•ç”¨ä¸ç¨³å®šâ€é—®é¢˜</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Child render&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;clicked&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p>ä½ æœŸæœ›çš„æ˜¯ï¼šåªè¦ <code>count</code> æ²¡å˜ï¼Œ<code>Child</code> ä¸åº”è¯¥é‡æ–°æ¸²æŸ“ã€‚ä½†å®é™…ä¸Šï¼Œ<strong>æ¯æ¬¡çˆ¶ç»„ä»¶é‡æ¸²æŸ“ï¼Œ<code>Child</code> éƒ½ä¼šé‡æ–°æ¸²æŸ“</strong>ã€‚</p><p><strong><font color="#00A6ED">ğŸŒˆåŸå› ï¼šå‡½æ•°çš„å¼•ç”¨æ¯æ¬¡éƒ½å˜</font></strong></p><p>åœ¨ React ä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œè€Œå¯¹è±¡&#x2F;å‡½æ•°çš„ã€Œå¼•ç”¨åœ°å€ã€æ¯æ¬¡éƒ½ä¼šå˜ã€‚å½“çˆ¶ç»„ä»¶é‡æ–°è¿è¡Œæ—¶ éƒ½ä¼šåˆ›å»ºä¸€ä¸ª <strong>æ–°å‡½æ•°å¯¹è±¡</strong>ï¼Œå’Œä¹‹å‰çš„ä¸æ˜¯åŒä¸€ä¸ªå¼•ç”¨ã€‚</p><p>React.memo çš„é»˜è®¤æ¯”è¾ƒæ–¹å¼æ˜¯æµ…æ¯”è¾ƒï¼ˆshallow compareï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oldProps.<span class="property">onClick</span> === newProps.<span class="property">onClick</span>;</span><br></pre></td></tr></table></figure><p>è€Œå› ä¸ºæ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶ï¼Œè¿™ä¸ªå‡½æ•°éƒ½æ˜¯æ–°å»ºçš„ï¼Œæ‰€ä»¥ç»“æœæ˜¯ <code>false</code>ï¼Œå¯¼è‡´ <code>Child</code> æ— è®º props å†…å®¹æ˜¯å¦é€»è¾‘ç›¸åŒï¼Œéƒ½ä¼šè¢«è®¤ä¸ºå˜åŠ¨äº†ã€‚</p><p>ğŸ¤**è§£å†³æ–¹æ¡ˆï¼š**é€šè¿‡ <code>useCallback</code> æ¥è®©å‡½æ•°åœ¨ä¾èµ–ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä¿æŒåŒä¸€ä¸ªå¼•ç”¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useCallback, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line">unction <span class="title class_">Parent</span>() &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clicked&#x27;</span>);</span><br><span class="line">  &#125;, []) <span class="comment">// ğŸ‘ˆ å¼•ç”¨ç¨³å®š</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><h4 id="7ï¼‰æ³¨æ„äº‹é¡¹"><a href="#7ï¼‰æ³¨æ„äº‹é¡¹" class="headerlink" title="7ï¼‰æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">7ï¼‰æ³¨æ„äº‹é¡¹</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¯”è¾ƒæ–¹å¼</td><td>æµ…æ¯”è¾ƒï¼ˆå¯¹è±¡æˆ–å‡½æ•°éœ€æ³¨æ„å¼•ç”¨å˜åŒ–ï¼‰</td></tr><tr><td>ä¸é€‚åˆæ»¥ç”¨</td><td>è‹¥ç»„ä»¶å¾ˆè½»é‡ï¼Œæ¯”è¾ƒæˆæœ¬å¯èƒ½é«˜äºæ¸²æŸ“æ”¶ç›Š</td></tr><tr><td>useContext æ›´æ–°ä»ä¼šè§¦å‘</td><td>Context æ›´æ–°æ—¶ä¼šé‡æ–°æ¸²æŸ“å­èŠ‚ç‚¹</td></tr><tr><td>ä¸ç¼“å­˜ state</td><td>ä»…ç¼“å­˜æ¸²æŸ“ç»“æœï¼Œä¸å†…éƒ¨çŠ¶æ€æ— å…³</td></tr></tbody></table><h4 id="8ï¼‰æ€»ç»“"><a href="#8ï¼‰æ€»ç»“" class="headerlink" title="8ï¼‰æ€»ç»“"></a><strong><font color="#10c300">8ï¼‰æ€»ç»“</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>ä½œç”¨</td><td>ç¼“å­˜ç»„ä»¶æ¸²æŸ“ç»“æœï¼Œé¿å…ä¸å¿…è¦æ¸²æŸ“</td></tr><tr><td>ç±»å‹</td><td>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</td></tr><tr><td>æ¯”è¾ƒæœºåˆ¶</td><td>æµ…å±‚æ¯”è¾ƒ propsï¼ˆå¯è‡ªå®šä¹‰ï¼‰</td></tr><tr><td>æ¨èæ­é…</td><td><code>useCallback</code>, <code>useMemo</code> ä¿æŒ props å¼•ç”¨ç¨³å®š</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å­ç»„ä»¶ç¨³å®šã€çˆ¶ç»„ä»¶é¢‘ç¹æ¸²æŸ“ã€æ€§èƒ½ä¼˜åŒ–</td></tr></tbody></table><hr><p>ğŸŒŸ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p><blockquote><p><code>React.memo</code> å°±åƒæ˜¯å‡½æ•°ç»„ä»¶çš„â€œPureComponentâ€ã€‚<br>å½“ props æ²¡å˜æ—¶ï¼Œè·³è¿‡æ¸²æŸ“ï¼Œæé«˜æ€§èƒ½ã€‚</p></blockquote><hr><br><h2 id="ä¸ƒã€-React-19-æ–°ç‰¹æ€§"><a href="#ä¸ƒã€-React-19-æ–°ç‰¹æ€§" class="headerlink" title="ä¸ƒã€ React 19 æ–°ç‰¹æ€§"></a><strong>ä¸ƒã€ React 19 æ–°ç‰¹æ€§</strong></h2><p>React 19 å¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ <strong>æ€§èƒ½ä¼˜åŒ–</strong> å’Œ <strong>æœåŠ¡ç«¯ç»„ä»¶ï¼ˆRSCï¼‰</strong> çš„æ·±åº¦é›†æˆã€‚æœ€å¼•äººæ³¨ç›®çš„æ˜¯ React Compilerï¼ˆReact ç¼–è¯‘å™¨ï¼‰çš„å¼•å…¥ï¼Œå®ƒæ—¨åœ¨è‡ªåŠ¨å¤„ç† memoizationï¼Œå‡å°‘æ‰‹åŠ¨ä¼˜åŒ–çš„è´Ÿæ‹…ã€‚</p><h3 id="7-1-React-Compiler-React-ç¼–è¯‘å™¨"><a href="#7-1-React-Compiler-React-ç¼–è¯‘å™¨" class="headerlink" title="7.1 React Compiler (React ç¼–è¯‘å™¨)"></a><strong><font color="red">7.1 React Compiler (React ç¼–è¯‘å™¨)</font></strong></h3><p>è¿™æ˜¯ React 19 æœ€å…·é©å‘½æ€§çš„å˜åŒ–ã€‚</p><ul><li><strong>è¿‡å»</strong>ï¼šä¸ºäº†é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ <code>useMemo</code>ã€<code>useCallback</code> å’Œ <code>React.memo</code>ã€‚</li><li><strong>ç°åœ¨</strong>ï¼šReact Compiler å¯ä»¥åœ¨æ„å»ºæ—¶è‡ªåŠ¨åˆ†æä»£ç ï¼Œå¹¶è‡ªåŠ¨åº”ç”¨ä¼˜åŒ–ã€‚è¿™æ„å‘³ç€ä½ å¯èƒ½ä¸å†éœ€è¦æ‰‹åŠ¨å†™ <code>useMemo</code> å’Œ <code>useCallback</code> äº†ï¼</li></ul><blockquote><p>âš ï¸ æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªæ„å»ºå·¥å…·å±‚é¢çš„ä¼˜åŒ–ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ APIã€‚</p></blockquote><h3 id="7-2-Actions-Server-Actions"><a href="#7-2-Actions-Server-Actions" class="headerlink" title="7.2 Actions (Server Actions)"></a><strong><font color="red">7.2 Actions (Server Actions)</font></strong></h3><p>React 19 æ›´åŠ æ‹¥æŠ±æœåŠ¡ç«¯èƒ½åŠ›ï¼Œå¼•å…¥äº† <strong>Actions</strong> æ¦‚å¿µï¼Œç®€åŒ–æ•°æ®æäº¤å’Œå˜æ›´ã€‚</p><h4 id="1ï¼‰useActionState-åŸ-useFormState"><a href="#1ï¼‰useActionState-åŸ-useFormState" class="headerlink" title="1ï¼‰useActionState (åŸ useFormState)"></a><strong><font color="#10c300">1ï¼‰useActionState (åŸ useFormState)</font></strong></h4><p>ç”¨äºç®¡ç†è¡¨å•æäº¤çš„çŠ¶æ€ï¼ˆå¦‚åŠ è½½ä¸­ã€æˆåŠŸã€å¤±è´¥ã€é”™è¯¯ä¿¡æ¯ï¼‰ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useActionState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateName</span>(<span class="params">error, formData</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> name = formData.<span class="title function_">get</span>(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="string">&quot;Name required&quot;</span>;</span><br><span class="line">  <span class="keyword">await</span> api.<span class="title function_">updateUser</span>(name);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ChangeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [error, submitAction, isPending] = <span class="title function_">useActionState</span>(updateName, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&#123;submitAction&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">disabled</span>=<span class="string">&#123;isPending&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;isPending ? &quot;Updating...&quot; : &quot;Update&quot;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;error &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;error&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰useFormStatus"><a href="#2ï¼‰useFormStatus" class="headerlink" title="2ï¼‰useFormStatus"></a><strong><font color="#10c300">2ï¼‰useFormStatus</font></strong></h4><p>è®©æˆ‘ä»¬åœ¨å­ç»„ä»¶ä¸­ç›´æ¥è·å–çˆ¶çº§ <code>&lt;form&gt;</code> çš„çŠ¶æ€ï¼Œè€Œä¸éœ€è¦é€šè¿‡ props ä¼ é€’ <code>loading</code> çŠ¶æ€ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useFormStatus &#125; <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SubmitButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; pending &#125; = <span class="title function_">useFormStatus</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span>=<span class="string">&#123;pending&#125;</span>&gt;</span>&#123;pending ? &quot;æäº¤ä¸­...&quot; : &quot;æäº¤&quot;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&#123;submitAction&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SubmitButton</span> /&gt;</span> &#123;/* è‡ªåŠ¨æ„ŸçŸ¥ form çŠ¶æ€ */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-3-æ–°çš„-use-API"><a href="#7-3-æ–°çš„-use-API" class="headerlink" title="7.3 æ–°çš„ use API"></a><strong><font color="red">7.3 æ–°çš„ <code>use</code> API</font></strong></h3><p><code>use</code> æ˜¯ä¸€ä¸ªæ–°çš„ APIï¼Œç”¨äºåœ¨ render ä¸­è¯»å–èµ„æºï¼ˆPromise æˆ– Contextï¼‰ã€‚</p><h4 id="1ï¼‰è¯»å–-Context"><a href="#1ï¼‰è¯»å–-Context" class="headerlink" title="1ï¼‰è¯»å– Context"></a><strong><font color="#10c300">1ï¼‰è¯»å– Context</font></strong></h4><p>ä¸å†å—é™äºåªèƒ½åœ¨é¡¶å±‚ä½¿ç”¨ <code>useContext</code>ï¼Œ<code>use</code> å¯ä»¥åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯ä¸­ä½¿ç”¨ï¼ˆå°½ç®¡ä»å»ºè®®åœ¨é¡¶å±‚ï¼‰ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; use &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ThemeContext</span> <span class="keyword">from</span> <span class="string">&quot;./ThemeContext&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Heading</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (children == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// âœ… å¯ä»¥åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">const</span> theme = <span class="title function_">use</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">theme.color</span> &#125;&#125;&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰è¯»å–-Promise"><a href="#2ï¼‰è¯»å–-Promise" class="headerlink" title="2ï¼‰è¯»å– Promise"></a><strong><font color="#10c300">2ï¼‰è¯»å– Promise</font></strong></h4><p>å¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸­ç­‰å¾… Promise è§£æï¼ˆé…åˆ Suspenseï¼‰ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; use, <span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Comments</span>(<span class="params">&#123; commentsPromise &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// âŒ ä»¥å‰ï¼šéœ€è¦ useEffect + useState</span></span><br><span class="line">  <span class="comment">// âœ… ç°åœ¨ï¼šç›´æ¥ use(promise)</span></span><br><span class="line">  <span class="keyword">const</span> comments = <span class="title function_">use</span>(commentsPromise);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> comments.<span class="title function_">map</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">key</span>=<span class="string">&#123;c.id&#125;</span>&gt;</span>&#123;c.text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Page</span>(<span class="params">&#123; post &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&quot;åŠ è½½è¯„è®ºä¸­...&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Comments</span> <span class="attr">commentsPromise</span>=<span class="string">&#123;fetchComments(post.id)&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-4-Ref-ä½œä¸º-Prop"><a href="#7-4-Ref-ä½œä¸º-Prop" class="headerlink" title="7.4 Ref ä½œä¸º Prop"></a><strong><font color="red">7.4 Ref ä½œä¸º Prop</font></strong></h3><p>ç»ˆäºï¼åœ¨ React 19 ä¸­ï¼Œä½ ä¸å†éœ€è¦ <code>forwardRef</code> äº†ã€‚<code>ref</code> ç°åœ¨åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ propã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// React 19 å†™æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyInput</span>(<span class="params">&#123; placeholder, ref &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&#123;placeholder&#125;</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line">&lt;<span class="title class_">MyInput</span> ref=&#123;inputRef&#125; /&gt;;</span><br></pre></td></tr></table></figure><h3 id="7-5-æ–‡æ¡£å…ƒæ•°æ®æ”¯æŒ"><a href="#7-5-æ–‡æ¡£å…ƒæ•°æ®æ”¯æŒ" class="headerlink" title="7.5 æ–‡æ¡£å…ƒæ•°æ®æ”¯æŒ"></a><strong><font color="red">7.5 æ–‡æ¡£å…ƒæ•°æ®æ”¯æŒ</font></strong></h3><p>ç›´æ¥åœ¨ç»„ä»¶ä¸­æ¸²æŸ“ <code>&lt;title&gt;</code>ã€<code>&lt;meta&gt;</code> å’Œ <code>&lt;link&gt;</code> æ ‡ç­¾ï¼ŒReact ä¼šè‡ªåŠ¨å°†å®ƒä»¬æå‡åˆ° <code>&lt;head&gt;</code> ä¸­ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">HomePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ - æˆ‘çš„åº”ç”¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;è¿™æ˜¯é¦–é¡µ&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ¬¢è¿<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><br><h2 id="å…«ã€-æœ€ä½³å®è·µ"><a href="#å…«ã€-æœ€ä½³å®è·µ" class="headerlink" title="å…«ã€ æœ€ä½³å®è·µ"></a><strong>å…«ã€ æœ€ä½³å®è·µ</strong></h2><h3 id="8-1-ç»„ä»¶æ‹†åˆ†ä¸ç»“æ„"><a href="#8-1-ç»„ä»¶æ‹†åˆ†ä¸ç»“æ„" class="headerlink" title="8.1 ç»„ä»¶æ‹†åˆ†ä¸ç»“æ„"></a><strong><font color="red">8.1 ç»„ä»¶æ‹†åˆ†ä¸ç»“æ„</font></strong></h3><ol><li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šæ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ã€‚å¦‚æœä¸€ä¸ªç»„ä»¶è¶…è¿‡ 200 è¡Œï¼Œæˆ–è€…åŒ…å«å¤šä¸ª <code>useEffect</code> å¤„ç†ä¸åŒé€»è¾‘ï¼Œè€ƒè™‘æ‹†åˆ†ã€‚</li><li><strong>å®¹å™¨ä¸å±•ç¤ºç»„ä»¶åˆ†ç¦»</strong>ï¼š<ul><li><strong>å±•ç¤ºç»„ä»¶ (Presentational)</strong>ï¼šåªè´Ÿè´£æ¸²æŸ“ UIï¼Œé€šè¿‡ props æ¥æ”¶æ•°æ®å’Œå›è°ƒï¼ˆå¦‚ <code>Button</code>, <code>Card</code>ï¼‰ã€‚</li><li><strong>å®¹å™¨ç»„ä»¶ (Container)</strong>ï¼šè´Ÿè´£è·å–æ•°æ®ã€å¤„ç†é€»è¾‘ï¼Œå°†æ•°æ®ä¼ ç»™å±•ç¤ºç»„ä»¶ã€‚</li></ul></li></ol><h3 id="8-2-æ€§èƒ½ä¼˜åŒ–æŒ‡å—"><a href="#8-2-æ€§èƒ½ä¼˜åŒ–æŒ‡å—" class="headerlink" title="8.2 æ€§èƒ½ä¼˜åŒ–æŒ‡å—"></a><strong><font color="red">8.2 æ€§èƒ½ä¼˜åŒ–æŒ‡å—</font></strong></h3><ol><li><p><strong>å˜åŠ¨åˆ†ç¦»</strong>ï¼šå°†å˜åŠ¨é¢‘ç¹çš„éƒ¨åˆ†ï¼ˆå¦‚è¾“å…¥æ¡†æ–‡å­—ï¼‰æŠ½ç¦»æˆç‹¬ç«‹ç»„ä»¶ï¼Œé¿å…å¸¦åŠ¨çˆ¶ç»„ä»¶é‡æ¸²æŸ“ã€‚</p></li><li><p><strong>åˆ—è¡¨è™šæ‹ŸåŒ–</strong>ï¼šå¯¹äºé•¿åˆ—è¡¨ï¼ˆè¶…è¿‡ 50 æ¡ï¼‰ï¼Œä½¿ç”¨ <code>react-window</code> æˆ– <code>react-virtuoso</code> ä»…æ¸²æŸ“å¯è§†åŒºåŸŸçš„å…ƒç´ ã€‚</p></li><li><p><strong>æ‡’åŠ è½½ (Lazy Loading)</strong>ï¼š<br>å¯¹äºéé¦–å±è·¯ç”±æˆ–å¤§å‹ç»„ä»¶ï¼Œä½¿ç”¨ <code>lazy</code> å’Œ <code>Suspense</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AdminPanel</span> = <span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./AdminPanel&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">Spinner</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">AdminPanel</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>é¿å…æ»¥ç”¨ Context</strong>ï¼šContext é€‚åˆå…¨å±€é…ç½®ï¼ˆä¸»é¢˜ã€ç”¨æˆ·ã€è¯­è¨€ï¼‰ï¼Œä¸é€‚åˆé«˜é¢‘å˜åŠ¨çš„æ•°æ®ã€‚é«˜é¢‘æ•°æ®åº”è€ƒè™‘ <code>Zustand</code> æˆ– <code>Redux</code> ç­‰ä¸“é—¨çš„çŠ¶æ€ç®¡ç†åº“ã€‚</p></li></ol><h3 id="8-3-è‡ªå®šä¹‰-Hooks-å°è£…é€»è¾‘"><a href="#8-3-è‡ªå®šä¹‰-Hooks-å°è£…é€»è¾‘" class="headerlink" title="8.3 è‡ªå®šä¹‰ Hooks å°è£…é€»è¾‘"></a><strong><font color="red">8.3 è‡ªå®šä¹‰ Hooks å°è£…é€»è¾‘</font></strong></h3><p>ä¸è¦åœ¨ç»„ä»¶é‡Œå †ç Œ <code>useEffect</code>ã€‚å°†ç›¸å…³çš„é€»è¾‘ï¼ˆå¦‚ data fetching, event listenersï¼‰å°è£…åˆ°è‡ªå®šä¹‰ Hook ä¸­ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ ä¸æ¨è</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [width, setWidth] = <span class="title function_">useState</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>);</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handle</span> = (<span class="params"></span>) =&gt; <span class="title function_">setWidth</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, handle);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;resize&quot;</span>, handle);</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ¨è</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> width = <span class="title function_">useWindowSize</span>(); <span class="comment">// é€»è¾‘å¤ç”¨ä¸”æ¸…æ™°</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-4-é”™è¯¯è¾¹ç•Œ-Error-Boundaries"><a href="#8-4-é”™è¯¯è¾¹ç•Œ-Error-Boundaries" class="headerlink" title="8.4 é”™è¯¯è¾¹ç•Œ (Error Boundaries)"></a><strong><font color="red">8.4 é”™è¯¯è¾¹ç•Œ (Error Boundaries)</font></strong></h3><p>ä½¿ç”¨é”™è¯¯è¾¹ç•Œæ•è·ç»„ä»¶æ ‘ä¸­çš„ JS é”™è¯¯ï¼Œé˜²æ­¢æ•´ä¸ªåº”ç”¨å´©æºƒï¼ˆç™½å±ï¼‰ã€‚æ¨èä½¿ç”¨ <code>react-error-boundary</code> åº“ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ErrorBoundary</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-error-boundary&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ErrorBoundary</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>å‡ºé”™äº†ï¼<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">MyWidget</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ErrorBoundary</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure><hr><br><h2 id="ä¹ã€-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#ä¹ã€-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¹ã€ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a><strong>ä¹ã€ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</strong></h2><h3 id="Q1-ä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶æ¸²æŸ“äº†ä¸¤æ¬¡ï¼Ÿ"><a href="#Q1-ä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶æ¸²æŸ“äº†ä¸¤æ¬¡ï¼Ÿ" class="headerlink" title="Q1: ä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶æ¸²æŸ“äº†ä¸¤æ¬¡ï¼Ÿ"></a><strong><font color="red">Q1: ä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶æ¸²æŸ“äº†ä¸¤æ¬¡ï¼Ÿ</font></strong></h3><p><strong>A:</strong> è¿™æ˜¯ React 18+ åœ¨ <strong>å¼€å‘æ¨¡å¼ (Strict Mode)</strong> ä¸‹çš„é¢„æœŸè¡Œä¸ºã€‚<br>React ä¼šæ•…æ„å¸è½½å¹¶é‡æ–°æŒ‚è½½ç»„ä»¶ï¼ˆmount -&gt; unmount -&gt; mountï¼‰ï¼Œä¸»è¦ä¸ºäº†æ£€æµ‹ï¼š</p><ul><li><code>useEffect</code> æ¸…ç†å‡½æ•°æ˜¯å¦æ­£ç¡®ã€‚</li><li>æ˜¯å¦æœ‰ä¸çº¯çš„å‰¯ä½œç”¨ã€‚</li></ul><p><strong>ç”Ÿäº§ç¯å¢ƒåªä¼šæ¸²æŸ“ä¸€æ¬¡</strong>ï¼Œæ— éœ€æ‹…å¿ƒæ€§èƒ½ã€‚</p><h3 id="Q2-â€œToo-many-re-rendersâ€-æŠ¥é”™"><a href="#Q2-â€œToo-many-re-rendersâ€-æŠ¥é”™" class="headerlink" title="Q2: â€œToo many re-rendersâ€ æŠ¥é”™"></a><strong><font color="red">Q2: â€œToo many re-rendersâ€ æŠ¥é”™</font></strong></h3><p><strong>A:</strong> é€šå¸¸æ˜¯å› ä¸ºä½ åœ¨<strong>æ¸²æŸ“é˜¶æ®µ</strong>ç›´æ¥è°ƒç”¨äº† <code>setState</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="title function_">setCount</span>(<span class="number">1</span>); <span class="comment">// ğŸ”´ æ¯æ¬¡æ¸²æŸ“åˆè§¦å‘æ›´æ–° -&gt; æ­»å¾ªç¯</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setCount</span>(<span class="number">1</span>);</span><br><span class="line">&#125;, []); <span class="comment">// ä»…åœ¨æŒ‚è½½æ—¶æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="Q3-useEffect-ä¾èµ–è­¦å‘Š-exhaustive-deps"><a href="#Q3-useEffect-ä¾èµ–è­¦å‘Š-exhaustive-deps" class="headerlink" title="Q3: useEffect ä¾èµ–è­¦å‘Š (exhaustive-deps)"></a><strong><font color="red">Q3: useEffect ä¾èµ–è­¦å‘Š (exhaustive-deps)</font></strong></h3><p><strong>A:</strong> ESLint è­¦å‘Šä½ é—æ¼äº†ä¾èµ–é¡¹ã€‚</p><ul><li><strong>ä¸è¦å¿½ç•¥å®ƒ</strong>ï¼šå¿½ç•¥é€šå¸¸ä¼šå¯¼è‡´é—­åŒ…é™·é˜±ï¼ˆè¯»åˆ°æ—§å€¼ï¼‰ã€‚</li><li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š<ol><li>å°†å‡½æ•°ç§»åˆ° <code>useEffect</code> å†…éƒ¨ã€‚</li><li>ä½¿ç”¨ <code>useCallback</code> åŒ…è£¹å‡½æ•°ã€‚</li><li>å¦‚æœçœŸçš„åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼Œæ£€æŸ¥é€»è¾‘æ˜¯å¦æ­£ç¡®ï¼Œæˆ–è€…ç”¨ <code>useRef</code> ä¿å­˜ä¸éœ€è¦è§¦å‘æ›´æ–°çš„å€¼ã€‚</li></ol></li></ul><h3 id="Q4-ä¸ºä»€ä¹ˆ-console-log-æ‰“å°-State-æ€»æ˜¯æ—§å€¼ï¼Ÿ"><a href="#Q4-ä¸ºä»€ä¹ˆ-console-log-æ‰“å°-State-æ€»æ˜¯æ—§å€¼ï¼Ÿ" class="headerlink" title="Q4: ä¸ºä»€ä¹ˆ console.log æ‰“å° State æ€»æ˜¯æ—§å€¼ï¼Ÿ"></a><strong><font color="red">Q4: ä¸ºä»€ä¹ˆ console.log æ‰“å° State æ€»æ˜¯æ—§å€¼ï¼Ÿ</font></strong></h3><p><strong>A:</strong> <code>setState</code> æ˜¯<strong>å¼‚æ­¥</strong>ï¼ˆæ‰¹å¤„ç†ï¼‰çš„ã€‚è°ƒç”¨åçŠ¶æ€ä¸ä¼šç«‹åˆ»æ”¹å˜ï¼Œè€Œæ˜¯ç­‰åˆ°ä¸‹ä¸€æ¬¡æ¸²æŸ“ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setCount</span>(<span class="number">10</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(count); <span class="comment">// ä»ç„¶æ˜¯ 0 (æ—§å€¼)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å†³æ–¹æ³•ï¼šä½¿ç”¨ useEffect ç›‘å¬å˜åŒ–</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(count); <span class="comment">// 10 (æ–°å€¼)</span></span><br><span class="line">&#125;, [count]);</span><br></pre></td></tr></table></figure><h3 id="Q5-A-component-is-changing-an-uncontrolled-input-to-be-controlled"><a href="#Q5-A-component-is-changing-an-uncontrolled-input-to-be-controlled" class="headerlink" title="Q5: A component is changing an uncontrolled input to be controlled"></a><strong><font color="red">Q5: A component is changing an uncontrolled input to be controlled</font></strong></h3><p><strong>A:</strong> è¿™é€šå¸¸æ˜¯å› ä¸ºä½ ç»™ input çš„ <code>value</code> ä¼ äº† <code>undefined</code> æˆ– <code>null</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šåˆå§‹æ˜¯ undefined (éå—æ§)ï¼Œåæ¥å˜æˆ &#x27;hello&#x27; (å—æ§)</span></span><br><span class="line"><span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>();</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> /&gt;</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šç»™åˆå§‹å€¼</span></span><br><span class="line"><span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="Q6-å¦‚ä½•å¤„ç†ç»„ä»¶å¸è½½åçš„å¼‚æ­¥çŠ¶æ€æ›´æ–°ï¼Ÿ"><a href="#Q6-å¦‚ä½•å¤„ç†ç»„ä»¶å¸è½½åçš„å¼‚æ­¥çŠ¶æ€æ›´æ–°ï¼Ÿ" class="headerlink" title="Q6: å¦‚ä½•å¤„ç†ç»„ä»¶å¸è½½åçš„å¼‚æ­¥çŠ¶æ€æ›´æ–°ï¼Ÿ"></a><strong><font color="red">Q6: å¦‚ä½•å¤„ç†ç»„ä»¶å¸è½½åçš„å¼‚æ­¥çŠ¶æ€æ›´æ–°ï¼Ÿ</font></strong></h3><p><strong>A:</strong> åœ¨ <code>useEffect</code> ä¸­å‘èµ·å¼‚æ­¥è¯·æ±‚æ—¶ï¼Œå¦‚æœç»„ä»¶åœ¨è¯·æ±‚å®Œæˆå‰è¢«å¸è½½ï¼Œå°è¯•æ›´æ–°çŠ¶æ€å¯èƒ½ä¼šå¯¼è‡´è­¦å‘Šï¼ˆReact 18 å‰ï¼‰æˆ–æ½œåœ¨çš„ç«æ€æ¡ä»¶ã€‚</p><p><strong>ğŸ¤” ä¸ºä»€ä¹ˆè¯´â€œç»„ä»¶å¯èƒ½å·²å¸è½½â€ï¼Ÿ</strong></p><p>ç”±äº <code>fetch</code> æ˜¯å¼‚æ­¥çš„ï¼ˆç½‘ç»œè¯·æ±‚éœ€è¦æ—¶é—´ï¼‰ï¼Œåœ¨è¯·æ±‚å‘å‡ºååˆ°å“åº”è¿”å›å‰çš„è¿™æ®µæ—¶é—´å†…ï¼Œç”¨æˆ·å¯èƒ½å·²ç»ç‚¹å‡»äº†è·¯ç”±è·³è½¬ã€å…³é—­äº†å¼¹çª—æˆ–æ¡ä»¶æ¸²æŸ“å¯¼è‡´è¯¥ç»„ä»¶è¢«é”€æ¯ã€‚<br>æ­¤æ—¶ä»£ç æ‰§è¡Œåˆ° <code>.then(setUser)</code> æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨è¯•å›¾æ›´æ–°ä¸€ä¸ªâ€œå·²ç»ä¸å­˜åœ¨çš„ç»„ä»¶â€çš„çŠ¶æ€ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é—®é¢˜ï¼šç»„ä»¶å¸è½½åæ›´æ–°çŠ¶æ€</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserData</span>(<span class="params">&#123; userId &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;userId&#125;</span>`</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> <span class="title function_">setUser</span>(data)); <span class="comment">// å¦‚æœæ­¤æ—¶ç”¨æˆ·å·²ç»ç¦»å¼€å½“å‰é¡µé¢ï¼Œç»„ä»¶å·²å¸è½½ï¼Œè¿™é‡Œå°±ä¼šæŠ¥é”™</span></span><br><span class="line">  &#125;, [userId]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… è§£å†³ï¼šä½¿ç”¨ AbortController (æ¨è)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserData</span>(<span class="params">&#123; userId &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>(); <span class="comment">// 1. åˆ›å»ºæ§åˆ¶å™¨</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;userId&#125;</span>`</span>, &#123; <span class="attr">signal</span>: controller.<span class="property">signal</span> &#125;) <span class="comment">// 2. ç»‘å®š signal</span></span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> <span class="title function_">setUser</span>(data))</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 3. å¿½ç•¥å› å–æ¶ˆå¯¼è‡´çš„é”™è¯¯</span></span><br><span class="line">        <span class="keyword">if</span> (err.<span class="property">name</span> !== <span class="string">&quot;AbortError&quot;</span>) <span class="keyword">throw</span> err;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. ç»„ä»¶å¸è½½æˆ– userId å˜åŒ–æ—¶å–æ¶ˆè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> controller.<span class="title function_">abort</span>();</span><br><span class="line">  &#125;, [userId]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âš ï¸ ä¼ ç»Ÿè§£æ³•ï¼šä½¿ç”¨ cleanup function + æ ‡è®°å˜é‡ (isMounted)</span></span><br><span class="line"><span class="comment">// è¿™ç§æ–¹æ³•ä¸ç»ˆæ­¢ç½‘ç»œè¯·æ±‚ï¼Œåªæ˜¯ä¸æ‰§è¡Œ setStateï¼Œæµªè´¹æµé‡ä½†èƒ½é¿å…æŠ¥é”™</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserDataFallback</span>(<span class="params">&#123; userId &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> isMounted = <span class="literal">true</span>; <span class="comment">// 1. è®¾ç½®æ ‡è®°</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;userId&#125;</span>`</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 2. åªæœ‰ç»„ä»¶è¿˜åœ¨æŒ‚è½½ä¸­æ—¶æ‰æ›´æ–°çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (isMounted) <span class="title function_">setUser</span>(data);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶å°†æ ‡è®°è®¾ä¸º false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isMounted = <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [userId]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="post-footer"><div>è½¬è½½å£°æ˜ï¼š å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒ,éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ Â© <a href="" target="_blank">ZHB</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/posts/e2d3b4a5wq.html" class="pre-post btn btn-default" title="React Router å…¨é¢æŒ‡å— (v6.4+ & v7)"><i class="fa fa-angle-left fa-fw"></i> <span class="hidden-lg">ä¸Šä¸€ç¯‡</span> <span class="hidden-xs">React Router å…¨é¢æŒ‡å— (v6.4+ & v7)</span></a> <a href="/posts/4179c0b9543543.html" class="next-post btn btn-default" title="React ç±»ç»„ä»¶å¼€å‘å…¨æ”»ç•¥"><span class="hidden-lg">ä¸‹ä¸€ç¯‡</span> <span class="hidden-xs">React ç±»ç»„ä»¶å¼€å‘å…¨æ”»ç•¥</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div class="utteranc"><script src="https://utteranc.es/client.js" repo="shenliyang/snippet-comment" issue-term="pathname" issue-number="" theme="github-light" label="" crossorigin="anonymous" async></script></div></div></main><aside id="article-toc" role="navigation" class="col-md-3"><div class="widget"><h3 class="title">æ–‡ç« ç›®å½•</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React-%E5%88%9D%E5%AD%A6%E8%80%85%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97-React-18-19"><span class="toc-text">React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-text">ç›®å½•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81React-%E7%AE%80%E4%BB%8B"><span class="toc-text">ä¸€ã€React ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF-React%EF%BC%9F"><span class="toc-text">1.1 ä»€ä¹ˆæ˜¯ Reactï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-React%EF%BC%9F"><span class="toc-text">1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">äºŒã€ ç¯å¢ƒæ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%BD%BF%E7%94%A8-Vite-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">2.1 ä½¿ç”¨ Vite åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%BD%BF%E7%94%A8-Create-React-App"><span class="toc-text">2.2 ä½¿ç”¨ Create React App</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">2.3 é¡¹ç›®ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE"><span class="toc-text">2.4 è·¨åŸŸè¯·æ±‚ä»£ç†é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89Vite-%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F%E4%BB%A3%E7%90%86"><span class="toc-text">1ï¼‰Vite é…ç½®è·¨åŸŸä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89Create-React-App-%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F%E4%BB%A3%E7%90%86"><span class="toc-text">2ï¼‰Create React App é…ç½®è·¨åŸŸä»£ç†</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">ä¸‰ã€ æ ¸å¿ƒæ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-JSX-%E8%AF%AD%E6%B3%95"><span class="toc-text">3.1 JSX è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89JSX-%E8%A7%84%E5%88%99%E9%80%9F%E8%AE%B0"><span class="toc-text">1ï¼‰JSX è§„åˆ™é€Ÿè®°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%BB%84%E4%BB%B6"><span class="toc-text">3.2 ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E7%B1%BB%E7%BB%84%E4%BB%B6%EF%BC%88%E4%BA%86%E8%A7%A3%E5%8D%B3%E5%8F%AF%EF%BC%89"><span class="toc-text">2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Props%EF%BC%88%E5%B1%9E%E6%80%A7%EF%BC%89"><span class="toc-text">3.3 Propsï¼ˆå±æ€§ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89Props-%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">1ï¼‰Props é»˜è®¤å€¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-State%EF%BC%88%E7%8A%B6%E6%80%81%EF%BC%89"><span class="toc-text">3.4 Stateï¼ˆçŠ¶æ€ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89State-%E6%9B%B4%E6%96%B0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">1ï¼‰State æ›´æ–°æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-text">3.5 äº‹ä»¶å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">3.6 æ¡ä»¶æ¸²æŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-text">3.7 åˆ—è¡¨æ¸²æŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-CSS-Modules-%E6%A0%B7%E5%BC%8F%E7%AE%A1%E7%90%86"><span class="toc-text">3.8 CSS Modules - æ ·å¼ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E4%BB%80%E4%B9%88%E6%98%AF-CSS-Modules%EF%BC%9F"><span class="toc-text">1ï¼‰ä»€ä¹ˆæ˜¯ CSS Modulesï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2ï¼‰åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E5%8A%A8%E6%80%81%E7%B1%BB%E5%90%8D%E7%BB%84%E5%90%88"><span class="toc-text">3ï¼‰åŠ¨æ€ç±»åç»„åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89composes-%E6%A0%B7%E5%BC%8F%E7%BB%84%E5%90%88"><span class="toc-text">4ï¼‰composes æ ·å¼ç»„åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E4%BB%8E%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E7%BB%84%E5%90%88%E6%A0%B7%E5%BC%8F"><span class="toc-text">5ï¼‰ä»å…¶ä»–æ–‡ä»¶ç»„åˆæ ·å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F%E4%B8%8E%E5%B1%80%E9%83%A8%E6%A0%B7%E5%BC%8F%E6%B7%B7%E5%90%88"><span class="toc-text">6ï¼‰å…¨å±€æ ·å¼ä¸å±€éƒ¨æ ·å¼æ··åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89CSS-%E5%8F%98%E9%87%8F%E4%B8%8E%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2"><span class="toc-text">7ï¼‰CSS å˜é‡ä¸ä¸»é¢˜åˆ‡æ¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%EF%BC%89%E9%85%8D%E5%90%88-Sass-Less-%E4%BD%BF%E7%94%A8"><span class="toc-text">8ï¼‰é…åˆ Sass&#x2F;Less ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%EF%BC%89TypeScript-%E6%94%AF%E6%8C%81"><span class="toc-text">9ï¼‰TypeScript æ”¯æŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%EF%BC%89%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6"><span class="toc-text">10ï¼‰å®æˆ˜æ¡ˆä¾‹ï¼šå¡ç‰‡ç»„ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%EF%BC%89%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E5%93%88%E5%B8%8C%E5%91%BD%E5%90%8D"><span class="toc-text">11ï¼‰é…ç½®è‡ªå®šä¹‰å“ˆå¸Œå‘½å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%EF%BC%89%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">12ï¼‰æœ€ä½³å®è·µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%EF%BC%89%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">13ï¼‰å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14%EF%BC%89CSS-Modules-vs-%E5%85%B6%E4%BB%96%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94"><span class="toc-text">14ï¼‰CSS Modules vs å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15%EF%BC%89%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7"><span class="toc-text">15ï¼‰é«˜çº§æŠ€å·§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16%EF%BC%89%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1-%E2%9A%A0%EF%B8%8F"><span class="toc-text">16ï¼‰å¸¸è§é™·é˜± âš ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17%EF%BC%89%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7"><span class="toc-text">17ï¼‰è°ƒè¯•æŠ€å·§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18%EF%BC%89%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE"><span class="toc-text">18ï¼‰æ€§èƒ½ä¼˜åŒ–å»ºè®®</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-React-Hooks-%E8%AF%A6%E8%A7%A3"><span class="toc-text">å››ã€ React Hooks è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-useState-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">4.1 useState - çŠ¶æ€ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">2ï¼‰åŸºæœ¬ç”¨æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7%E8%AF%A6%E8%A7%A3"><span class="toc-text">3ï¼‰æ ¸å¿ƒç‰¹æ€§è¯¦è§£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89TypeScript-%E6%94%AF%E6%8C%81"><span class="toc-text">4ï¼‰TypeScript æ”¯æŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E2%9A%A0%EF%B8%8F"><span class="toc-text">5ï¼‰å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆâš ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">6ï¼‰æœ€ä½³å®è·µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-useEffect-%E5%89%AF%E4%BD%9C%E7%94%A8%E5%A4%84%E7%90%86"><span class="toc-text">4.2 useEffect-å‰¯ä½œç”¨å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%B8%89%E7%A7%8D%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA"><span class="toc-text">2ï¼‰ä¸‰ç§æ‰§è¡Œæ—¶æœº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%B8%85%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%88Cleanup%EF%BC%89"><span class="toc-text">3ï¼‰æ¸…ç†å‡½æ•°ï¼ˆCleanupï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">4ï¼‰å®é™…åº”ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1%E2%9A%A0%EF%B8%8F"><span class="toc-text">5ï¼‰å¸¸è§é™·é˜±âš ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89useEffect-vs-useLayoutEffect"><span class="toc-text">6ï¼‰useEffect vs useLayoutEffect</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89TypeScript-%E6%94%AF%E6%8C%81"><span class="toc-text">7ï¼‰TypeScript æ”¯æŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%EF%BC%89%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">8ï¼‰æœ€ä½³å®è·µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-useContext-%E8%B7%A8%E7%BB%84%E4%BB%B6%E5%85%B1%E4%BA%AB%E7%8A%B6%E6%80%81"><span class="toc-text">4.3 useContext - è·¨ç»„ä»¶å…±äº«çŠ¶æ€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95-%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">1ï¼‰åŸºç¡€ç”¨æ³•(ä½¿ç”¨æ­¥éª¤)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E8%87%AA%E5%AE%9A%E4%B9%89-Hook-%E5%B0%81%E8%A3%85%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">2ï¼‰è‡ªå®šä¹‰ Hook å°è£…ï¼ˆæ¨èï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%88%E5%85%B3%E9%94%AE%EF%BC%89"><span class="toc-text">3ï¼‰æ€§èƒ½ä¼˜åŒ–ï¼ˆå…³é”®ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89TypeScript-%E6%94%AF%E6%8C%81-1"><span class="toc-text">4ï¼‰TypeScript æ”¯æŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1%E2%9A%A0%EF%B8%8F-1"><span class="toc-text">5ï¼‰å¸¸è§é™·é˜±âš ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8-vs-%E4%B8%8D%E7%94%A8"><span class="toc-text">6ï¼‰ä½•æ—¶ä½¿ç”¨ vs ä¸ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F%EF%BC%9ARender-Props-%E8%BD%AC-Context"><span class="toc-text">7ï¼‰é«˜çº§æ¨¡å¼ï¼šRender Props è½¬ Context</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-useMemo-%E7%BC%93%E5%AD%98%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C"><span class="toc-text">4.4 useMemo- ç¼“å­˜è®¡ç®—ç»“æœ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-2"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E4%B8%8E-useCallback-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">3ï¼‰ä¸ useCallback çš„å…³ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%AE%9E%E9%99%85%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4"><span class="toc-text">4ï¼‰å®é™…ç¤ºä¾‹ï¼šæœç´¢è¿‡æ»¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89TypeScript-%E6%94%AF%E6%8C%81-2"><span class="toc-text">4ï¼‰TypeScript æ”¯æŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1%E2%9A%A0%EF%B8%8F-2"><span class="toc-text">5ï¼‰å¸¸è§é™·é˜±âš ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F"><span class="toc-text">6ï¼‰é«˜çº§æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-useCallback-%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%E5%BC%95%E7%94%A8"><span class="toc-text">4.5 useCallback- ç¼“å­˜å‡½æ•°å¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-3"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E6%A0%B8%E5%BF%83%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E7%94%A8-useCallback"><span class="toc-text">3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨ useCallback</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89TypeScript-%E6%94%AF%E6%8C%81-3"><span class="toc-text">4ï¼‰TypeScript æ”¯æŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F"><span class="toc-text">5ï¼‰é«˜çº§æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E5%B8%B8%E8%A7%81%E8%AF%AF%E5%8C%BA%E2%9A%A0%EF%B8%8F"><span class="toc-text">6ï¼‰å¸¸è§è¯¯åŒºâš ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-useReducer-%E5%A4%8D%E6%9D%82%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">4.6 useReducer-å¤æ‚çŠ¶æ€ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-4"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B-1"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89useReducer-%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-text">3ï¼‰useReducer çš„æ‰§è¡Œæµç¨‹å›¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89useState-vs-useReducer-%E9%80%89%E6%8B%A9%E6%8C%87%E5%8D%97"><span class="toc-text">4ï¼‰useState vs useReducer é€‰æ‹©æŒ‡å—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E4%BD%BF%E7%94%A8%E6%83%B0%E6%80%A7%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%89"><span class="toc-text">5ï¼‰ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89useReducer-useContext"><span class="toc-text">6ï¼‰useReducer + useContext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89TypeScript-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">7ï¼‰TypeScript æœ€ä½³å®è·µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-useRef-%E5%BC%95%E7%94%A8-DOM-%E5%92%8C%E4%BF%9D%E5%AD%98%E5%8F%AF%E5%8F%98%E5%80%BC"><span class="toc-text">4.7 useRef - å¼•ç”¨ DOM å’Œä¿å­˜å¯å˜å€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-5"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B-2"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%9A%A0%EF%B8%8F"><span class="toc-text">3ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%92%8C-forwardRef-%E6%90%AD%E9%85%8D"><span class="toc-text">4ï¼‰å’Œ forwardRef æ­é…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89TypeScript-%E6%94%AF%E6%8C%81"><span class="toc-text">5ï¼‰TypeScript æ”¯æŒ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-useId-%E7%94%9F%E6%88%90%E5%94%AF%E4%B8%80-ID"><span class="toc-text">4.8 useId - ç”Ÿæˆå”¯ä¸€ ID</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-6"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B-3"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E4%B8%8E-SSR-%E9%85%8D%E5%90%88"><span class="toc-text">3ï¼‰ä¸ SSR é…åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%9A%A0%EF%B8%8F"><span class="toc-text">4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-useDeferredValue-%E5%BB%B6%E8%BF%9F%E6%9B%B4%E6%96%B0%E5%80%BC"><span class="toc-text">4.9 useDeferredValue - å»¶è¿Ÿæ›´æ–°å€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-7"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B-4"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89useDeferredValue%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-text">3ï¼‰useDeferredValueçš„æœ¬è´¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%9A%A0%EF%B8%8F-1"><span class="toc-text">4ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10-useTransition-%E9%9D%9E%E9%98%BB%E5%A1%9E%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0"><span class="toc-text">4.10 useTransition - éé˜»å¡çŠ¶æ€æ›´æ–°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•æœç´¢è¿‡æ»¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B-5"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">3ï¼‰å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E4%B8%8EuseDeferredValue%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-text">4ï¼‰ä¸useDeferredValueçš„å¯¹æ¯”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%9A%A0%EF%B8%8F"><span class="toc-text">5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-11-useImperativeHandle-%E6%9A%B4%E9%9C%B2%E8%87%AA%E5%AE%9A%E4%B9%89ref"><span class="toc-text">4.11 useImperativeHandle - æš´éœ²è‡ªå®šä¹‰ref</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-8"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89React-19-%E4%B9%8B%E5%89%8D%E7%9A%84%E5%86%99%E6%B3%95%EF%BC%88forwardRef%EF%BC%89"><span class="toc-text">2ï¼‰React 19 ä¹‹å‰çš„å†™æ³•ï¼ˆforwardRefï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89React-19-%E7%9A%84%E7%AE%80%E5%8C%96%E5%86%99%E6%B3%95"><span class="toc-text">3ï¼‰React 19 çš„ç®€åŒ–å†™æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">4ï¼‰ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%9A%A0%EF%B8%8F-1"><span class="toc-text">5ï¼‰æ³¨æ„äº‹é¡¹âš ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-12-useLayoutEffect-%E5%90%8C%E6%AD%A5%E6%89%A7%E8%A1%8C%E7%9A%84%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-text">4.12 useLayoutEffect - åŒæ­¥æ‰§è¡Œçš„å‰¯ä½œç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%AF%B9%E6%AF%94"><span class="toc-text">1ï¼‰æ‰§è¡Œæ—¶æœºå¯¹æ¯”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E6%A0%B8%E5%BF%83%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="toc-text">2ï¼‰æ ¸å¿ƒä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E4%B8%8E-useEffect-%E7%9A%84%E9%80%89%E6%8B%A9%E6%8C%87%E5%8D%97"><span class="toc-text">3ï¼‰ä¸ useEffect çš„é€‰æ‹©æŒ‡å—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E6%80%A7%E8%83%BD%E8%AD%A6%E5%91%8A-%E2%9A%A0%EF%B8%8F"><span class="toc-text">4ï¼‰æ€§èƒ½è­¦å‘Š âš ï¸</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-13-%E8%87%AA%E5%AE%9A%E4%B9%89-Hooks"><span class="toc-text">4.13 è‡ªå®šä¹‰ Hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E6%A0%B8%E5%BF%83%E8%A7%84%E5%88%99"><span class="toc-text">1ï¼‰æ ¸å¿ƒè§„åˆ™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF"><span class="toc-text">2ï¼‰åŸºç¡€æ¨¡æ¿</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E5%AE%9E%E6%88%98%E7%A4%BA%E4%BE%8B"><span class="toc-text">3ï¼‰å®æˆ˜ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F"><span class="toc-text">4ï¼‰é«˜çº§æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E9%99%B7%E9%98%B1"><span class="toc-text">5ï¼‰å¸¸è§é™·é˜±</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81-HOC-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="toc-text">äº”ã€ HOC é«˜é˜¶ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-React-memo"><span class="toc-text">5.1 React.memo</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-9"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B"><span class="toc-text">2ï¼‰åŸºæœ¬ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-1"><span class="toc-text">3ï¼‰å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E8%87%AA%E5%AE%9A%E4%B9%89%E6%AF%94%E8%BE%83%E5%87%BD%E6%95%B0"><span class="toc-text">4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E5%9C%BA%E6%99%AF"><span class="toc-text">5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E4%B8%8E-useCallback-%E5%92%8C-useMemo-%E7%9A%84%E9%85%8D%E5%90%88"><span class="toc-text">6ï¼‰ä¸ useCallback å’Œ useMemo çš„é…åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">7ï¼‰æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%EF%BC%89%E6%80%BB%E7%BB%93"><span class="toc-text">8ï¼‰æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81-React-19-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-text">ä¸ƒã€ React 19 æ–°ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-React-Compiler-React-%E7%BC%96%E8%AF%91%E5%99%A8"><span class="toc-text">7.1 React Compiler (React ç¼–è¯‘å™¨)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-Actions-Server-Actions"><span class="toc-text">7.2 Actions (Server Actions)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89useActionState-%E5%8E%9F-useFormState"><span class="toc-text">1ï¼‰useActionState (åŸ useFormState)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89useFormStatus"><span class="toc-text">2ï¼‰useFormStatus</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E6%96%B0%E7%9A%84-use-API"><span class="toc-text">7.3 æ–°çš„ use API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E8%AF%BB%E5%8F%96-Context"><span class="toc-text">1ï¼‰è¯»å– Context</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E8%AF%BB%E5%8F%96-Promise"><span class="toc-text">2ï¼‰è¯»å– Promise</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-Ref-%E4%BD%9C%E4%B8%BA-Prop"><span class="toc-text">7.4 Ref ä½œä¸º Prop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-%E6%96%87%E6%A1%A3%E5%85%83%E6%95%B0%E6%8D%AE%E6%94%AF%E6%8C%81"><span class="toc-text">7.5 æ–‡æ¡£å…ƒæ•°æ®æ”¯æŒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">å…«ã€ æœ€ä½³å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E7%BB%84%E4%BB%B6%E6%8B%86%E5%88%86%E4%B8%8E%E7%BB%93%E6%9E%84"><span class="toc-text">8.1 ç»„ä»¶æ‹†åˆ†ä¸ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97"><span class="toc-text">8.2 æ€§èƒ½ä¼˜åŒ–æŒ‡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E8%87%AA%E5%AE%9A%E4%B9%89-Hooks-%E5%B0%81%E8%A3%85%E9%80%BB%E8%BE%91"><span class="toc-text">8.3 è‡ªå®šä¹‰ Hooks å°è£…é€»è¾‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E9%94%99%E8%AF%AF%E8%BE%B9%E7%95%8C-Error-Boundaries"><span class="toc-text">8.4 é”™è¯¯è¾¹ç•Œ (Error Boundaries)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">ä¹ã€ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Q1-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E7%9A%84%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%E4%BA%86%E4%B8%A4%E6%AC%A1%EF%BC%9F"><span class="toc-text">Q1: ä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶æ¸²æŸ“äº†ä¸¤æ¬¡ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q2-%E2%80%9CToo-many-re-renders%E2%80%9D-%E6%8A%A5%E9%94%99"><span class="toc-text">Q2: â€œToo many re-rendersâ€ æŠ¥é”™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q3-useEffect-%E4%BE%9D%E8%B5%96%E8%AD%A6%E5%91%8A-exhaustive-deps"><span class="toc-text">Q3: useEffect ä¾èµ–è­¦å‘Š (exhaustive-deps)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q4-%E4%B8%BA%E4%BB%80%E4%B9%88-console-log-%E6%89%93%E5%8D%B0-State-%E6%80%BB%E6%98%AF%E6%97%A7%E5%80%BC%EF%BC%9F"><span class="toc-text">Q4: ä¸ºä»€ä¹ˆ console.log æ‰“å° State æ€»æ˜¯æ—§å€¼ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q5-A-component-is-changing-an-uncontrolled-input-to-be-controlled"><span class="toc-text">Q5: A component is changing an uncontrolled input to be controlled</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q6-%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E7%BB%84%E4%BB%B6%E5%8D%B8%E8%BD%BD%E5%90%8E%E7%9A%84%E5%BC%82%E6%AD%A5%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%EF%BC%9F"><span class="toc-text">Q6: å¦‚ä½•å¤„ç†ç»„ä»¶å¸è½½åçš„å¼‚æ­¥çŠ¶æ€æ›´æ–°ï¼Ÿ</span></a></li></ol></li></ol></li></ol></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi"></div></div><div class="col-sm-12"><span>Copyright &copy; 2017</span> | <span>Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a></span> | <span>Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a></span></div></div></div></div><script src="/js/app.js?rev=2f9097f8c1d5adfecd923b78b47be31b"></script></body></html>